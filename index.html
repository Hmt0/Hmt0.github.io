<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hemengting.xyz","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="hmtçš„åšå®¢">
<meta property="og:url" content="http://hemengting.xyz/index.html">
<meta property="og:site_name" content="hmtçš„åšå®¢">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="He Mengting">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://hemengting.xyz/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>hmtçš„åšå®¢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hmtçš„åšå®¢</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2022/01/21/d3-js%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/21/d3-js%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">d3.jså…¥é—¨å­¦ä¹ ç¬”è®°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-01-21 14:30:55 / Modified: 14:31:22" itemprop="dateCreated datePublished" datetime="2022-01-21T14:30:55+08:00">2022-01-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><p>selectï¼šé€‰æ‹©htmlèŠ‚ç‚¹</p>
</li>
<li><p>```javascript<br>select.All()</p>
<p>.data(dataset)</p>
<p>.enter()</p>
<p>.append(â€œdivâ€)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¡«å……æ•°ç»„å…ƒç´ ï¼Œè¡¥å……ç¼ºå°‘çš„å¯¹åº”èŠ‚ç‚¹</span><br><span class="line"></span><br><span class="line">- attrï¼šæ·»åŠ ç±»åæˆ–è€…å±æ€§</span><br><span class="line"></span><br><span class="line">ç»ƒä¹ 1ï¼š**ä¸ºé›†åˆä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹åˆ›å»ºä¸€ä¸ªæ•°æ®æ¡**</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];</span><br><span class="line"></span><br><span class="line">    const w = 500;</span><br><span class="line">    const h = 100;</span><br><span class="line"></span><br><span class="line">    const svg = d3.select(&quot;body&quot;)</span><br><span class="line">                  .append(&quot;svg&quot;)</span><br><span class="line">                  .attr(&quot;width&quot;, w)</span><br><span class="line">                  .attr(&quot;height&quot;, h);</span><br><span class="line"></span><br><span class="line">    svg.selectAll(&quot;rect&quot;)</span><br><span class="line">       // åœ¨è¿™è¡Œä¸‹é¢æ·»åŠ ä»£ç </span><br><span class="line">      .data(dataset)</span><br><span class="line">      .enter()</span><br><span class="line">      .append(&quot;rect&quot;)</span><br><span class="line">       // åœ¨è¿™è¡Œä¸Šé¢æ·»åŠ ä»£ç </span><br><span class="line">       .attr(&quot;x&quot;, 0)</span><br><span class="line">       .attr(&quot;y&quot;, 0)</span><br><span class="line">       .attr(&quot;width&quot;, 25)</span><br><span class="line">       .attr(&quot;height&quot;, 100);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>åœ¨ SVG ä¸­ï¼Œåæ ‡è½´çš„åŸç‚¹åœ¨å·¦ä¸Šè§’ã€‚ <code>x</code> åæ ‡ä¸º 0 å°†å›¾å½¢æ”¾åœ¨ SVG åŒºåŸŸçš„å·¦è¾¹ç¼˜ï¼Œ <code>y</code> åæ ‡ä¸º 0 å°†å›¾å½¢æ”¾åœ¨ SVG åŒºåŸŸçš„ä¸Šè¾¹ç¼˜ã€‚ <code>x</code> å€¼å¢å¤§çŸ©å½¢å°†å‘å³ç§»åŠ¨ï¼Œ <code>y</code> å€¼å¢å¤§çŸ©å½¢å°†å‘ä¸‹ç§»åŠ¨ã€‚</p>
<p>ç»ƒä¹ 2ï¼š<strong>åè½¬ SVG å…ƒç´ </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];</span><br><span class="line"></span><br><span class="line">    const w = 500;</span><br><span class="line">    const h = 100;</span><br><span class="line"></span><br><span class="line">    const svg = d3.select(&quot;body&quot;)</span><br><span class="line">                  .append(&quot;svg&quot;)</span><br><span class="line">                  .attr(&quot;width&quot;, w)</span><br><span class="line">                  .attr(&quot;height&quot;, h);</span><br><span class="line"></span><br><span class="line">    svg.selectAll(&quot;rect&quot;)</span><br><span class="line">       .data(dataset)</span><br><span class="line">       .enter()</span><br><span class="line">       .append(&quot;rect&quot;)</span><br><span class="line">       .attr(&quot;x&quot;, (d, i) =&gt; i * 30)</span><br><span class="line">       .attr(&quot;y&quot;, (d, i) =&gt; h - d * 3)</span><br><span class="line">       .attr(&quot;width&quot;, 25)</span><br><span class="line">       .attr(&quot;height&quot;, (d, i) =&gt; 3 * d);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ 3. <strong>ç»™ D3 å…ƒç´ æ·»åŠ æ‚¬åœæ•ˆæœ</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.bar</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">    fill: brown;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> dataset = [<span class="number">12</span>, <span class="number">31</span>, <span class="number">22</span>, <span class="number">17</span>, <span class="number">25</span>, <span class="number">18</span>, <span class="number">29</span>, <span class="number">14</span>, <span class="number">9</span>];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> h = <span class="number">100</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - <span class="number">3</span> * d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;width&quot;</span>, <span class="number">25</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;height&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> <span class="number">3</span> * d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;fill&quot;</span>, <span class="string">&quot;navy&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// åœ¨è¿™è¡Œä¸‹é¢æ·»åŠ ä»£ç </span></span></span><br><span class="line"><span class="javascript">        .attr(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;bar&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// åœ¨è¿™è¡Œä¸Šé¢æ·»åŠ ä»£ç </span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .text(<span class="function">(<span class="params">d</span>) =&gt;</span> d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - (<span class="number">3</span> * d) - <span class="number">3</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ 4.<strong>ç»™ D3 å…ƒç´ æ·»åŠ å·¥å…·æç¤º</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.bar</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">    fill: brown;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> dataset = [<span class="number">12</span>, <span class="number">31</span>, <span class="number">22</span>, <span class="number">17</span>, <span class="number">25</span>, <span class="number">18</span>, <span class="number">29</span>, <span class="number">14</span>, <span class="number">9</span>];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> h = <span class="number">100</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - <span class="number">3</span> * d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;width&quot;</span>, <span class="number">25</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;height&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> d * <span class="number">3</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;fill&quot;</span>, <span class="string">&quot;navy&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;bar&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// åœ¨è¿™è¡Œä¸‹é¢æ·»åŠ ä»£ç </span></span></span><br><span class="line"><span class="javascript">        .append(<span class="string">&quot;title&quot;</span>)</span></span><br><span class="line"><span class="javascript">        .text(<span class="function"><span class="params">d</span> =&gt;</span> d)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">       <span class="comment">// åœ¨è¿™è¡Œä¸Šé¢æ·»åŠ ä»£ç </span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .text(<span class="function">(<span class="params">d</span>) =&gt;</span> d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - (d * <span class="number">3</span> + <span class="number">3</span>))</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•£ç‚¹å›¾</p>
<p>ç»ƒä¹ 1.<strong>ç»™ Circle å…ƒç´ æ·»åŠ å±æ€§</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> dataset = [</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">34</span>,    <span class="number">78</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">109</span>,   <span class="number">280</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">310</span>,   <span class="number">120</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">79</span>,    <span class="number">411</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">420</span>,   <span class="number">220</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">233</span>,   <span class="number">145</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">333</span>,   <span class="number">96</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">222</span>,   <span class="number">333</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">78</span>,    <span class="number">320</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">21</span>,    <span class="number">123</span> ]</span></span><br><span class="line"><span class="javascript">                ];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> h = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;circle&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;circle&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// åœ¨è¿™è¡Œä¸‹é¢æ·»åŠ ä»£ç </span></span></span><br><span class="line"><span class="javascript">      .attr(<span class="string">&quot;cx&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> d[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript">      .attr(<span class="string">&quot;cy&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> w - d[<span class="number">1</span>])</span></span><br><span class="line"><span class="javascript">      .attr(<span class="string">&quot;r&quot;</span>, <span class="number">5</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">       <span class="comment">// åœ¨è¿™è¡Œä¸Šé¢æ·»åŠ ä»£ç </span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2022/01/21/%E4%B8%A4%E9%81%93%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BB%83%E4%B9%A0%E9%A2%98%EF%BC%9A%E8%BD%AC%E7%A7%BB%E5%9C%B0%E5%9D%80%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84jmp%E6%8C%87%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/21/%E4%B8%A4%E9%81%93%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BB%83%E4%B9%A0%E9%A2%98%EF%BC%9A%E8%BD%AC%E7%A7%BB%E5%9C%B0%E5%9D%80%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84jmp%E6%8C%87%E4%BB%A4/" class="post-title-link" itemprop="url">ä¸¤é“æ±‡ç¼–è¯­è¨€ç»ƒä¹ é¢˜:è½¬ç§»åœ°å€åœ¨å†…å­˜ä¸­çš„jmpæŒ‡ä»¤</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-01-21 12:18:53 / Modified: 21:09:24" itemprop="dateCreated datePublished" datetime="2022-01-21T12:18:53+08:00">2022-01-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æ–­æ–­ç»­ç»­åœ°æ±‡ç¼–è¯­è¨€å­¦åˆ°ä¸€åŠäº†ï¼Œè¿™æ¬¡åšè¯¾åä½œä¸šå¯æŠŠæˆ‘éš¾åäº†ï¼Œèµ¶ç´§è®°å½•ä¸€ä¸‹ã€‚</p>
<h4 id="æ£€æµ‹ç‚¹9-1"><a href="#æ£€æµ‹ç‚¹9-1" class="headerlink" title="æ£€æµ‹ç‚¹9.1"></a>æ£€æµ‹ç‚¹9.1</h4><h5 id="ï¼ˆ1ï¼‰ç¨‹åºå¦‚ä¸‹ã€‚"><a href="#ï¼ˆ1ï¼‰ç¨‹åºå¦‚ä¸‹ã€‚" class="headerlink" title="ï¼ˆ1ï¼‰ç¨‹åºå¦‚ä¸‹ã€‚"></a>ï¼ˆ1ï¼‰ç¨‹åºå¦‚ä¸‹ã€‚</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">data segment</span><br><span class="line">    ?</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    start: mov ax, data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov bx,0</span><br><span class="line">    jmp word ptr [bx+1]</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

<p><em>è‹¥è¦ä½¿ç¨‹åºä¸­çš„<code>jmp</code>æŒ‡ä»¤æ‰§è¡Œåï¼Œ<code>CS:IP</code>æŒ‡å‘ç¨‹åºçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œåœ¨dataæ®µä¸­åº”è¯¥å®šä¹‰å“ªäº›æ•°æ®ï¼Ÿ</em></p>
<h5 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h5><p>é¦–å…ˆæŠŠ<code>jmp word ptr</code>çš„åŠŸèƒ½å®šä¹‰è¯»äº†å¥½å‡ éï¼šä»å†…å­˜å•å…ƒåœ°å€å‡ºå¼€å§‹å­˜æ”¾ç€ä¸€ä¸ªå­—ï¼Œæ˜¯è½¬ç§»çš„ç›®çš„åç§»åœ°å€ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´<code>[bx+1]</code>æŒ‡æ˜çš„<strong>å†…å­˜åœ°å€</strong>å­˜æ”¾ç€ç›®çš„åç§»åœ°å€çš„<strong>å­—</strong>ã€‚</p>
<p>è€Œ<code>[bx]</code>è¡¨ç¤ºæ®µåœ°å€å­˜æ”¾åœ¨<code>ds</code>ï¼Œåç§»åœ°å€å­˜æ”¾åœ¨<code>bx</code>ä¸­çš„å†…å­˜å•å…ƒï¼Œåœ¨æœ¬é¢˜ä¸­å°±æ˜¯<code>ax:0001H</code>ï¼Œä¹Ÿå°±æ˜¯dataæ®µä¸­åç§»åœ°å€ä¸º1çš„å†…å­˜å•å…ƒã€‚</p>
<p>CSä¸å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¡«å…¥çš„æ•°æ®åº”ä½¿<strong>dataæ®µä¸­åç§»åœ°å€ä¸º1çš„å†…å­˜å•å…ƒ</strong>ï¼ˆå­—ï¼‰å­˜æ”¾çš„å†…å®¹ä¸º0ï¼Œè¿™æ ·æ‰èƒ½è·³è½¬åˆ°codeçš„ç¬¬ä¸€æ¡è¯­å¥ï¼Œæ‰€ä»¥ç­”æ¡ˆåº”è¯¥æ˜¯<code>db 2 dup(0)</code></p>
<h5 id="ï¼ˆ2ï¼‰ç¨‹åºå¦‚ä¸‹"><a href="#ï¼ˆ2ï¼‰ç¨‹åºå¦‚ä¸‹" class="headerlink" title="ï¼ˆ2ï¼‰ç¨‹åºå¦‚ä¸‹"></a>ï¼ˆ2ï¼‰ç¨‹åºå¦‚ä¸‹</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    dd 12345678h</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    start: mov ax,data</span><br><span class="line">           mov ds,ax</span><br><span class="line">           mov bx,0</span><br><span class="line">           mov [bx],__</span><br><span class="line">           mov [bx+2],__</span><br><span class="line">           jmp sword ptr ds:[0]</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

<p><em>è¡¥å…¨ç¨‹åºï¼Œä½¿<code>jmp</code>æŒ‡ä»¤æ‰§è¡Œåï¼Œ<code>CS:IP</code>æŒ‡å‘ç¨‹åºçš„ç¬¬ä¸€æ¡æŒ‡ä»¤</em></p>
<h5 id="æ€è·¯ï¼š-1"><a href="#æ€è·¯ï¼š-1" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h5><p>è¿™ä¸¤é“é¢˜æ€è·¯å·®ä¸å¤šï¼Œå°±æ˜¯å®ç°ç»†èŠ‚ä¸Šæœ‰ç‚¹åŒºåˆ«ã€‚</p>
<p>dataæ®µä¸­å®šä¹‰äº†åŒå­—å‹æ•°æ®ï¼Œå å†…å­˜ä¸­çš„2ä¸ªå­—ï¼Œ4ä¸ªå­—èŠ‚ã€‚<code>jmp sword ptr</code>çš„åŠŸèƒ½æ˜¯ä»å†…å­˜å•å…ƒåœ°å€å¤„å¼€å§‹å­˜æ”¾ç€ä¸¤ä¸ªå­—ï¼Œé«˜åœ°å€å¤„çš„å­—æ˜¯è½¬ç§»çš„ç›®çš„æ®µåœ°å€ï¼Œä½åœ°å€å¤„äº‹è½¬ç§»çš„ç›®çš„åç§»åœ°å€ã€‚</p>
<p>è¿™æ®µä»£ç ä¸­ï¼Œ<code>[bx]</code>æŒ‡æ˜çš„å†…å­˜å†…å­˜åœ°å€åº”è¯¥æ˜¯åç§»åœ°å€ï¼ˆ0ï¼‰ï¼Œ<code>[bx+2]</code>æ˜¯æ®µåœ°å€ï¼ˆcsï¼‰ã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯ä½¿dataæ®µä¸­å®šä¹‰çš„å†…å®¹æ˜¯<code>cs:0</code>ã€‚</p>
<p>æ˜ç¡®äº†è¿™ä¸ªæ€è·¯ä¹‹åè¿˜æ˜¯è¸©äº†ä¸¤ä¸ªå°å‘ï¼Œä¸€å¼€å§‹ç›´æ¥å¡«äº†0ï¼ŒæŠ¥é”™äº†ï¼Œè¿™æ˜¯å› ä¸ºæ•°æ®ä¸èƒ½ç›´æ¥æ”¾å…¥å†…å­˜å•å…ƒï¼Œåº”è¯¥é€šè¿‡å¯„å­˜å™¨ä¼ é€ï¼›è¿™ä¹Ÿå°±æ˜¯ä¸Šä¸€è¡Œ<code>mov bx,0</code>çš„ä½œç”¨ï¼Œå¡«å…¥<code>mov[bx],bx</code>æ­£å¥½å®ç°æŠŠ0ä¼ é€åˆ°<code>ds:0</code>ã€‚è¿™æ˜¯åç§»åœ°å€ã€‚</p>
<p>ç¬¬äºŒå¤„è¡¥ä¸Š<code>mov[bx+2],cs</code>å°±å¯ä»¥äº†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2022/01/18/%E5%89%8D%E7%AB%AF%E4%B8%8EHTML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/18/%E5%89%8D%E7%AB%AF%E4%B8%8EHTML/" class="post-title-link" itemprop="url">é’è®­è¥ç¬”è®°ä¸€ å‰ç«¯ä¸HTML</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-01-18 17:37:28 / Modified: 17:38:08" itemprop="dateCreated datePublished" datetime="2022-01-18T17:37:28+08:00">2022-01-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æœ¬èŠ‚è¯¾è€å¸ˆæ¢³ç†äº†HTMLçš„ç›¸å…³æ¦‚å¿µï¼ŒåŒæ—¶å­¦äº†ä¸€äº›ä¸å¸¸ç”¨çš„æ ‡ç­¾å’Œå±æ€§ã€‚</p>
<h2 id="ä¸€ã€å‰ç«¯æ¦‚è¿°"><a href="#ä¸€ã€å‰ç«¯æ¦‚è¿°" class="headerlink" title="ä¸€ã€å‰ç«¯æ¦‚è¿°"></a>ä¸€ã€å‰ç«¯æ¦‚è¿°</h2><h3 id="1-æŠ€æœ¯æ ˆ"><a href="#1-æŠ€æœ¯æ ˆ" class="headerlink" title="1. æŠ€æœ¯æ ˆ"></a>1. æŠ€æœ¯æ ˆ</h3><ul>
<li><p>js</p>
</li>
<li><p>css</p>
</li>
<li><p>html</p>
</li>
</ul>
<h3 id="2-å‰ç«¯åº”è¯¥å…³æ³¨å“ªäº›æ–¹é¢ï¼Ÿ"><a href="#2-å‰ç«¯åº”è¯¥å…³æ³¨å“ªäº›æ–¹é¢ï¼Ÿ" class="headerlink" title="2. å‰ç«¯åº”è¯¥å…³æ³¨å“ªäº›æ–¹é¢ï¼Ÿ"></a>2. å‰ç«¯åº”è¯¥å…³æ³¨å“ªäº›æ–¹é¢ï¼Ÿ</h3><p>å›¾å½¢ç•Œé¢ä¸‹çš„äººæœºäº¤äº’</p>
<p>åŠŸèƒ½ ç¾è§‚ æ— éšœç¢ å®‰å…¨ æ€§èƒ½ å…¼å®¹æ€§ ä½“éªŒ</p>
<h3 id="3-å‰ç«¯çš„è¾¹ç•Œ"><a href="#3-å‰ç«¯çš„è¾¹ç•Œ" class="headerlink" title="3. å‰ç«¯çš„è¾¹ç•Œ"></a>3. å‰ç«¯çš„è¾¹ç•Œ</h3><ul>
<li><p><code>node</code> - æœåŠ¡å™¨ç«¯åº”ç”¨</p>
</li>
<li><p><code>Electron</code>/<code>React Native</code> - è·¨å¹³å°æ¡Œé¢åº”ç”¨</p>
</li>
<li><p><code>WebRTC</code>ï¼ˆWeb Real-Time Communicationï¼‰ - P2Påœ¨çº¿ä¼ è¾“ï¼Œå¤šäººä¼šè®®</p>
</li>
<li><p>WebGLï¼ˆWeb Graphics Libraryï¼‰ - 3Dæ¸¸æˆ</p>
</li>
<li><p>WebAssembly - å¯ä»¥ä½¿ç”¨é JavaScript ç¼–ç¨‹è¯­è¨€ç¼–å†™ä»£ç å¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œ</p>
</li>
</ul>
<h3 id="4-å¼€å‘ç¯å¢ƒ"><a href="#4-å¼€å‘ç¯å¢ƒ" class="headerlink" title="4.å¼€å‘ç¯å¢ƒ"></a>4.å¼€å‘ç¯å¢ƒ</h3><p>æµè§ˆå™¨+ç¼–è¾‘å™¨</p>
<h2 id="äºŒã€HTMLæ¦‚è¿°"><a href="#äºŒã€HTMLæ¦‚è¿°" class="headerlink" title="äºŒã€HTMLæ¦‚è¿°"></a>äºŒã€HTMLæ¦‚è¿°</h2><h3 id="1-HTMLæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-HTMLæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. HTMLæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. HTMLæ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul>
<li><p>HyperTextï¼ˆå›¾ç‰‡ã€é“¾æ¥ã€è¡¨æ ¼ç­‰ï¼‰ </p>
</li>
<li><p>Markupï¼ˆ æ ‡è®°è¯­è¨€ï¼Œ<code>&lt;img src=&quot;photo.jpg&quot; /&gt;</code>ï¼Œ<code>src</code>æ˜¯å±æ€§åï¼Œç­‰å·å³è¾¹æ˜¯å±æ€§å€¼ï¼‰</p>
</li>
<li><p>Language</p>
</li>
</ul>
<p>ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¡µé¢æ ‡é¢˜<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸€çº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;!DOCTYPE html&gt;</code>ï¼šå¯¹ HTMLæ–‡ä»¶æ¥è¯´ï¼Œæµè§ˆå™¨ä½¿ç”¨æ–‡ä»¶å¼€å¤´çš„ DOCTYPE æ¥å†³å®šç”¨<strong>æ€ªå¼‚æ¨¡å¼</strong>å¤„ç†æˆ–<strong>æ ‡å‡†æ¨¡å¼</strong>å¤„ç†ã€‚</p>
<p><code>html</code>ï¼šæ–‡æ¡£æ ¹æ ‡ç­¾ï¼Œæ‰€æœ‰å…¶ä»–å…ƒç´ å¿…é¡»æ˜¯æ­¤å…ƒç´ çš„åä»£ã€‚</p>
<p><code>head</code>ï¼šé¡µé¢å…ƒæ•°æ®ï¼Œä¸éœ€è¦ç›´æ¥å‘ˆç°ç»™ç”¨æˆ·</p>
<p><code>body</code>ï¼šéœ€è¦å‘ˆç°ç»™ç”¨æˆ·çš„å†…å®¹</p>
<h3 id="2-DOMæ ‘"><a href="#2-DOMæ ‘" class="headerlink" title="2. DOMæ ‘"></a>2. DOMæ ‘</h3><p>æµè§ˆå™¨å¯¹htmlæ–‡ä»¶è¿›è¡Œè§£æï¼Œå¾—åˆ°DOMæ ‘ï¼ŒDOMèŠ‚ç‚¹</p>
<h2 id="ä¸‰ã€HTMLè¯­æ³•"><a href="#ä¸‰ã€HTMLè¯­æ³•" class="headerlink" title="ä¸‰ã€HTMLè¯­æ³•"></a>ä¸‰ã€HTMLè¯­æ³•</h2><ul>
<li>æ ‡ç­¾å’Œå±æ€§ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ¨è<strong>å°å†™</strong></li>
<li>ç©ºæ ‡ç­¾å¯ä»¥ä¸é—­åˆï¼Œæ¯”å¦‚inputã€meta</li>
<li>å±æ€§å€¼æ¨èç”¨åŒå¼•å·åŒ…è£¹</li>
<li>æŸäº›å±æ€§å€¼å¯ä»¥çœç•¥ï¼Œæ¯”å¦‚ requiredã€readonly</li>
</ul>
<h3 id="1-æ ‡é¢˜h1-h6"><a href="#1-æ ‡é¢˜h1-h6" class="headerlink" title="1.æ ‡é¢˜h1~h6"></a>1.æ ‡é¢˜h1~h6</h3><h3 id="2-åˆ—è¡¨"><a href="#2-åˆ—è¡¨" class="headerlink" title="2.åˆ—è¡¨"></a>2.åˆ—è¡¨</h3><ul>
<li>æœ‰åºåˆ—è¡¨<code>&lt;ol&gt;</code>ï¼šordered list</li>
<li>æ— åºåˆ—è¡¨<code>&lt;ul&gt;</code>ï¼šunordered list</li>
<li>key-valueåˆ—è¡¨<code>&lt;dl&gt;</code>ï¼šdefination list<ul>
<li><code>&lt;dt&gt;</code>title</li>
<li><code>&lt;dd&gt;</code>description</li>
<li>å¤šå¯¹å¤šçš„å…³ç³»</li>
</ul>
</li>
</ul>
<h3 id="3-é“¾æ¥anchor"><a href="#3-é“¾æ¥anchor" class="headerlink" title="3.é“¾æ¥anchor"></a>3.é“¾æ¥anchor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;www.aboutmt.top&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>target</code>ï¼šè¯¥å±æ€§æŒ‡å®šåœ¨ä½•å¤„æ˜¾ç¤ºé“¾æ¥çš„èµ„æºã€‚ å–å€¼ä¸ºæ ‡ç­¾ï¼ˆtabï¼‰ï¼Œçª—å£ï¼ˆwindowï¼‰ï¼Œæˆ–æ¡†æ¶ï¼ˆiframeï¼‰ç­‰æµè§ˆä¸Šä¸‹æ–‡çš„åç§°æˆ–å…¶ä»–å…³é”®è¯ã€‚</li>
</ul>
<h3 id="4-å¤šåª’ä½“ï¼šå›¾ç‰‡å’ŒéŸ³è§†é¢‘"><a href="#4-å¤šåª’ä½“ï¼šå›¾ç‰‡å’ŒéŸ³è§†é¢‘" class="headerlink" title="4. å¤šåª’ä½“ï¼šå›¾ç‰‡å’ŒéŸ³è§†é¢‘"></a>4. å¤šåª’ä½“ï¼šå›¾ç‰‡å’ŒéŸ³è§†é¢‘</h3><p><code>&lt;img/&gt;</code></p>
<ul>
<li><code>alt</code>ï¼šå®šä¹‰äº†å›¾åƒçš„å¤‡ç”¨æ–‡æœ¬æè¿°ã€‚</li>
</ul>
<p><code>&lt;audio /&gt;</code></p>
<p><code>&lt;video /&gt;</code></p>
<ul>
<li><code>controls</code>ï¼šé»˜è®¤æ’­æ”¾æ§ä»¶</li>
</ul>
<h3 id="5-è¾“å…¥"><a href="#5-è¾“å…¥" class="headerlink" title="5.è¾“å…¥"></a>5.è¾“å…¥</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;range&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">min</span>=<span class="string">&quot;2018-02-10&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span>Hey<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-é€‰æ‹©"><a href="#6-é€‰æ‹©" class="headerlink" title="6.é€‰æ‹©"></a>6.é€‰æ‹©</h3><p>å¤šé€‰ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span>ğŸ<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span>ğŸŒ<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å•é€‰ï¼šé€šè¿‡nameè¾¾åˆ°äº’æ–¥å…³ç³»</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span> /&gt;</span>ğŸ</span><br><span class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span> /&gt;</span>ğŸŒ		<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸‹æ‹‰èœå•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>ğŸ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>ğŸŒ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>ğŸˆ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è‡ªç”±è¾“å…¥çš„åŒæ—¶æœ‰æç¤ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">list</span>=<span class="string">&quot;fruits&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">&quot;fruits&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>ğŸ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>ğŸŒ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>ğŸˆ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-æ–‡æœ¬ç±»æ ‡ç­¾"><a href="#7-æ–‡æœ¬ç±»æ ‡ç­¾" class="headerlink" title="7.æ–‡æœ¬ç±»æ ‡ç­¾"></a>7.æ–‡æœ¬ç±»æ ‡ç­¾</h3><h4 id="æ–‡å­—å¼•ç”¨"><a href="#æ–‡å­—å¼•ç”¨" class="headerlink" title="æ–‡å­—å¼•ç”¨"></a>æ–‡å­—å¼•ç”¨</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">cite</span>=<span class="string">&quot;http://aboutmt.top&quot;</span>&gt;</span></span><br><span class="line">    é•¿å¼•ç”¨ï¼Œç›´æ¥å¼•ç”¨åˆ«äººçš„ä¸€æ®µæ–‡å­—ï¼Œå¯ä»¥æ¢è¡Œ</span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    çŸ­å¼•ç”¨ï¼Œæˆ‘æœ€å–œæ¬¢çš„ä¸€æœ¬ä¹¦æ˜¯<span class="tag">&lt;<span class="name">cite</span>&gt;</span>å°ç‹å­<span class="tag">&lt;/<span class="name">cite</span>&gt;</span></span><br><span class="line">    å¼•ç”¨å†…å®¹ä¸è¦åŒ…å«æ¢è¡Œ</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    åœ¨<span class="tag">&lt;<span class="name">cite</span>&gt;</span>ç¬¬ä¸€ç« <span class="tag">&lt;/<span class="name">cite</span>&gt;</span>ï¼Œæˆ‘ä»¬è®²è¿‡<span class="tag">&lt;<span class="name">q</span>&gt;</span>å­—ç¬¦ä¸²æ˜¯</span><br><span class="line">    ä¸å¯å˜é‡ã€‚<span class="tag">&lt;/<span class="name">q</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>q</code>å’Œ<code>cite</code>åŒºåˆ«ï¼š</p>
<ul>
<li><p><code>cite</code>è¡¨ç¤ºä¸€ä¸ªä½œå“çš„å¼•ç”¨ï¼Œä¸”å¿…é¡»åŒ…å«ä½œå“çš„æ ‡é¢˜ï¼›</p>
</li>
<li><p><code>q</code>è¡¨ç¤ºä¸€ä¸ªå°é—­çš„å¹¶ä¸”æ˜¯çŸ­çš„è¡Œå†…å¼•ç”¨çš„æ–‡æœ¬ã€‚</p>
</li>
</ul>
<h4 id="ä»£ç å¼•ç”¨ï¼š"><a href="#ä»£ç å¼•ç”¨ï¼š" class="headerlink" title="ä»£ç å¼•ç”¨ï¼š"></a>ä»£ç å¼•ç”¨ï¼š</h4><p>ä½¿ç”¨ç­‰å®½å­—ä½“ï¼ˆç¼–ç¨‹å­—ä½“ï¼‰å±•ç¤º</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">code</span>&gt;</span>const<span class="tag">&lt;/<span class="name">code</span>&gt;</span>å£°æ˜åˆ›å»ºä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line">    	const add = (a, b) =&gt; a + b;</span><br><span class="line">        const multiply = (a, b) =&gt; a * b;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="å¼ºè°ƒæ ‡ç­¾"><a href="#å¼ºè°ƒæ ‡ç­¾" class="headerlink" title="å¼ºè°ƒæ ‡ç­¾"></a>å¼ºè°ƒæ ‡ç­¾</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    åœ¨æŠ•èµ„ä¹‹å‰ï¼Œ<span class="tag">&lt;<span class="name">strong</span>&gt;</span>ä¸€å®šè¦åšé£é™©è¯„ä¼°<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>ã€‚</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Cats <span class="tag">&lt;<span class="name">em</span>&gt;</span>are<span class="tag">&lt;/<span class="name">em</span>&gt;</span> cute animals.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>strong</code>å¼ºè°ƒå†…å®¹é‡è¦</li>
<li><code>em</code>å¼ºè°ƒè¯­æ°”</li>
</ul>
<h3 id="8-å†…å®¹åˆ’åˆ†"><a href="#8-å†…å®¹åˆ’åˆ†" class="headerlink" title="8. å†…å®¹åˆ’åˆ†"></a>8. å†…å®¹åˆ’åˆ†</h3><p><code>header</code></p>
<p><code>nav</code></p>
<p><code>main</code></p>
<p><code>article</code></p>
<p><code>aside</code> å¹¿å‘Š çƒ­ç‚¹æ¨è</p>
<p><code>footer</code> ç‰ˆæƒä¿¡æ¯ å¤‡æ¡ˆ</p>
<h2 id="å››ã€è¯­ä¹‰åŒ–æ˜¯ä»€ä¹ˆ"><a href="#å››ã€è¯­ä¹‰åŒ–æ˜¯ä»€ä¹ˆ" class="headerlink" title="å››ã€è¯­ä¹‰åŒ–æ˜¯ä»€ä¹ˆ"></a>å››ã€è¯­ä¹‰åŒ–æ˜¯ä»€ä¹ˆ</h2><ul>
<li><p>HTMLä¸­çš„å…ƒç´ ã€å±æ€§åŠå±æ€§å€¼éƒ½æ‹¥æœ‰æŸäº›å«ä¹‰</p>
</li>
<li><p>å¼€å‘è€…åº”è¯¥éµå¾ªè¯­ä¹‰æ¥ç¼–å†™HTML</p>
<ul>
<li><p>æœ‰åºåˆ—è¡¨ç”¨olï¼›æ— åºåˆ—è¡¨ç”¨ul</p>
</li>
<li><p>langå±æ€§è¡¨ç¤ºå†…å®¹æ‰€ä½¿ç”¨çš„è¯­è¨€</p>
</li>
</ul>
</li>
</ul>
<p>æœ‰åŠ©äºchromeè‡ªåŠ¨ç¿»è¯‘</p>
<h3 id="1-è°åœ¨ä½¿ç”¨æˆ‘ä»¬å†™çš„HTML"><a href="#1-è°åœ¨ä½¿ç”¨æˆ‘ä»¬å†™çš„HTML" class="headerlink" title="1. è°åœ¨ä½¿ç”¨æˆ‘ä»¬å†™çš„HTML"></a>1. è°åœ¨ä½¿ç”¨æˆ‘ä»¬å†™çš„HTML</h3><ul>
<li>å¼€å‘è€…-ä¿®æ”¹ã€ç»´æŠ¤é¡µé¢</li>
<li>æµè§ˆå™¨-å±•ç¤ºé¡µé¢ï¼Œæ¯”å¦‚è¯­è¨€</li>
<li>æœç´¢å¼•æ“-æå–å…³é”®è¯ã€æ’åº</li>
<li>å±å¹•é˜…è¯»å™¨-ç»™ç›²äººæˆ–è€…ä¸æ–¹ä¾¿çš„äººé¡µé¢å†…å®¹ æ— éšœç¢æ€§</li>
</ul>
<h3 id="2-è¯­ä¹‰åŒ–çš„å¥½å¤„"><a href="#2-è¯­ä¹‰åŒ–çš„å¥½å¤„" class="headerlink" title="2. è¯­ä¹‰åŒ–çš„å¥½å¤„"></a>2. è¯­ä¹‰åŒ–çš„å¥½å¤„</h3><ul>
<li>ä»£ç å¯è¯»æ€§</li>
<li>å¯ç»´æŠ¤æ€§</li>
<li>æœç´¢å¼•æ“ä¼˜åŒ–</li>
<li>æå‡æ— éšœç¢æ€§</li>
</ul>
<h3 id="3-ä¼ è¾¾å†…å®¹ï¼Œè€Œä¸æ˜¯æ ·å¼"><a href="#3-ä¼ è¾¾å†…å®¹ï¼Œè€Œä¸æ˜¯æ ·å¼" class="headerlink" title="3. ä¼ è¾¾å†…å®¹ï¼Œè€Œä¸æ˜¯æ ·å¼"></a>3. ä¼ è¾¾å†…å®¹ï¼Œè€Œä¸æ˜¯æ ·å¼</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 32px;&quot;</span>&gt;</span></span><br><span class="line">	å‰ç«¯å·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ï¼ˆè¿™æ˜¯ä¸€ä¸ªä¸å¥½çš„ä¾‹å­ï¼‰</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>å‰ç«¯å·¥ç¨‹å¸ˆçš„è‡ªæˆ‘ä¿®å…»ï¼ˆæ¨èè¿™æ ·å†™ï¼‰<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-å¦‚ä½•åšåˆ°è¯­ä¹‰åŒ–ï¼Ÿ"><a href="#4-å¦‚ä½•åšåˆ°è¯­ä¹‰åŒ–ï¼Ÿ" class="headerlink" title="4. å¦‚ä½•åšåˆ°è¯­ä¹‰åŒ–ï¼Ÿ"></a>4. å¦‚ä½•åšåˆ°è¯­ä¹‰åŒ–ï¼Ÿ</h3><ul>
<li>äº†è§£æ¯ä¸ªæ ‡ç­¾å’Œå±æ€§çš„å«ä¹‰</li>
<li>æ€è€ƒä»€ä¹ˆæ ‡ç­¾æœ€é€‚åˆæè¿°è¿™ä¸ªå†…å®¹</li>
<li>ä¸ä½¿ç”¨å¯è§†åŒ–å·¥å…·ç”Ÿæˆä»£ç </li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/12/10/%E4%BD%BF%E7%94%A8navicat%E8%BF%9E%E6%8E%A5%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84docker%E4%B8%AD%E7%9A%84mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/10/%E4%BD%BF%E7%94%A8navicat%E8%BF%9E%E6%8E%A5%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84docker%E4%B8%AD%E7%9A%84mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">ä½¿ç”¨navicatè¿æ¥äº‘æœåŠ¡å™¨çš„dockerä¸­çš„mysqlæ•°æ®åº“è¿‡ç¨‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-10 21:34:12" itemprop="dateCreated datePublished" datetime="2021-12-10T21:34:12+08:00">2021-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç¬¬ä¸€æ­¥ï¼šåœ¨CentOSä¸­å®‰è£…dockerå¼•æ“"><a href="#ç¬¬ä¸€æ­¥ï¼šåœ¨CentOSä¸­å®‰è£…dockerå¼•æ“" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåœ¨CentOSä¸­å®‰è£…dockerå¼•æ“"></a>ç¬¬ä¸€æ­¥ï¼šåœ¨CentOSä¸­å®‰è£…dockerå¼•æ“</h2><p>è¦å®‰è£…Dockerå¼•æ“ï¼Œéœ€è¦CentOS 7æˆ–CentOS 8çš„ç»´æŠ¤ç‰ˆæœ¬ã€‚</p>
<p>æŸ¥çœ‹CentOsç‰ˆæœ¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat  /etc/redhat-release</span><br></pre></td></tr></table></figure>

<h4 id=""><a href="#" class="headerlink" title=""></a></h4><p><em>ä½¿ç”¨ä»“åº“å®‰è£…çš„æ–¹æ³•</em>ï¼š</p>
<h4 id="è®¾ç½®ä»“åº“"><a href="#è®¾ç½®ä»“åº“" class="headerlink" title="è®¾ç½®ä»“åº“"></a>è®¾ç½®ä»“åº“</h4><p>å®‰è£…<code>yum-utils</code>åŒ…ï¼ˆæä¾›äº†<code>yum-config-manager</code>å·¥å…·ï¼‰å¹¶å¯åŠ¨ä¸€ä¸ªç¨³å®šçš„ä»“åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">   --add-repo \</span><br><span class="line">   https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é”™è¯¯ï¼š<code>Invalid configuration value: failovermethod=priority</code></p>
<p>è§£å†³æ–¹æ³•ï¼šå°† <code>/etc/yum.repos.d/CentOS-Epel.repo</code> æ–‡ä»¶ä¸­ <code>failovermethod=priority</code> æ³¨é‡Šæ‰ã€‚</p>
<h4 id="å®‰è£…Dockerå¼•æ“"><a href="#å®‰è£…Dockerå¼•æ“" class="headerlink" title="å®‰è£…Dockerå¼•æ“"></a>å®‰è£…Dockerå¼•æ“</h4><ol>
<li><p>å®‰è£…æœ€æ–°ç‰ˆDockerå¼•æ“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨Docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li><p>è¿è¡Œ<code>hello-world</code>é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå¯ä»¥è¿è¡Œï¼Œè¯´æ˜Dockerå¼•æ“å®‰è£…æˆåŠŸã€‚</p>
</li>
</ol>
<h2 id="ç¬¬äºŒæ­¥ï¼šåœ¨Dockerä¸­è¿è¡Œmysqlå®¹å™¨"><a href="#ç¬¬äºŒæ­¥ï¼šåœ¨Dockerä¸­è¿è¡Œmysqlå®¹å™¨" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåœ¨Dockerä¸­è¿è¡Œmysqlå®¹å™¨"></a>ç¬¬äºŒæ­¥ï¼šåœ¨Dockerä¸­è¿è¡Œmysqlå®¹å™¨</h2><h4 id="å¯åŠ¨mysql"><a href="#å¯åŠ¨mysql" class="headerlink" title="å¯åŠ¨mysql"></a>å¯åŠ¨mysql</h4><ol>
<li><p>å¯åŠ¨Docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li><p>æ‹‰å–é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure></li>
<li><p>è¿è¡Œå®¹å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql01 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹å®¹å™¨å¯åŠ¨æƒ…å†µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure></li>
</ol>
<p><em>è¿™ä¸ªæ—¶å€™ç”¨navicatè¿æ¥mysqlï¼ŒæŠ¥é”™é”™è¯¯ç ä¸º2003ï¼Œå¤šåŠæ˜¯å› ä¸ºæ²¡æœ‰å¯åŠ¨mysqlï¼Œæˆ–è€…éœ€è¦è®¾ç½®äº‘æœåŠ¡å™¨å¼€æ”¾3306ç«¯å£</em></p>
<h4 id="å®¹å™¨å†…ç™»å½•mysql"><a href="#å®¹å™¨å†…ç™»å½•mysql" class="headerlink" title="å®¹å™¨å†…ç™»å½•mysql"></a>å®¹å™¨å†…ç™»å½•mysql</h4><ol>
<li><p>è¿›å…¥mysql</p>
<p>docker exec -it å®¹å™¨ID mysql -p</p>
</li>
<li><p>è¾“å…¥mysqlå¯†ç ï¼ˆ123456ï¼‰</p>
</li>
</ol>
<h2 id="ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯ç™»å½•mysql"><a href="#ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯ç™»å½•mysql" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯ç™»å½•mysql"></a>ç¬¬ä¸‰æ­¥ï¼šå®¢æˆ·ç«¯ç™»å½•mysql</h2><p>æ‰“å¼€navicatï¼Œè¾“å…¥ä¸»æœºï¼ˆäº‘æœåŠ¡å™¨IPï¼‰ã€ç«¯å£ï¼ˆé»˜è®¤3306ï¼‰ï¼Œç”¨æˆ·åï¼ˆrootï¼‰è¿æ¥ã€‚å¦‚æœé‡åˆ°1251é”™è¯¯ï¼Œéœ€è¦ä¿®æ”¹MySQLç”¨æˆ·ç™»å½•çš„åŠ å¯†è§„åˆ™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY MySQLå¯†ç ;</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY MySQLå¯†ç  PASSWORD EXPIRE NEVER;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<p><code>ALTER USER &#39;root&#39;@&#39;%&#39;</code>@åé¢æ˜¯æŒ‡å®šå¼€æ”¾çš„IPï¼Œ%å°±æ˜¯æ‰€æœ‰IPå‡å¯è®¿é—®</p>
<p>navicatä¸­æ–°å»ºæ•°æ®åº“å’Œè¡¨ï¼Œåœ¨æœåŠ¡å™¨ä¸­å¯ä»¥çœ‹åˆ°åŒæ­¥æ›´æ–°ï¼š</p>
<ol>
<li><p>æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use &lt;æ–°å»ºæ•°æ®åº“&gt;;</span><br><span class="line">show tables;</span><br><span class="line">select * from &lt;æ–°å»ºè¡¨&gt;;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/12/05/docker%E6%8C%87%E4%BB%A4%E6%B1%87%E6%80%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/05/docker%E6%8C%87%E4%BB%A4%E6%B1%87%E6%80%BB/" class="post-title-link" itemprop="url">dockeræŒ‡ä»¤æ±‡æ€»</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-05 00:35:46" itemprop="dateCreated datePublished" datetime="2021-12-05T00:35:46+08:00">2021-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Part1ï¼šå®šä½å’Œå®‰è£…"><a href="#Part1ï¼šå®šä½å’Œå®‰è£…" class="headerlink" title="Part1ï¼šå®šä½å’Œå®‰è£…"></a>Part1ï¼šå®šä½å’Œå®‰è£…</h2><h4 id="è¿è¡Œæ•™ç¨‹å®¹å™¨"><a href="#è¿è¡Œæ•™ç¨‹å®¹å™¨" class="headerlink" title="è¿è¡Œæ•™ç¨‹å®¹å™¨"></a>è¿è¡Œæ•™ç¨‹å®¹å™¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 docker/getting-started</span><br></pre></td></tr></table></figure>



<h2 id="Part2ï¼šç®€å•çš„åº”ç”¨"><a href="#Part2ï¼šç®€å•çš„åº”ç”¨" class="headerlink" title="Part2ï¼šç®€å•çš„åº”ç”¨"></a>Part2ï¼šç®€å•çš„åº”ç”¨</h2><h4 id="æ„å»ºåº”ç”¨å®¹å™¨çš„é•œåƒ"><a href="#æ„å»ºåº”ç”¨å®¹å™¨çš„é•œåƒ" class="headerlink" title="æ„å»ºåº”ç”¨å®¹å™¨çš„é•œåƒ"></a>æ„å»ºåº”ç”¨å®¹å™¨çš„é•œåƒ</h4><ol>
<li><p>åˆ›å»ºDockerFileæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line"></span><br><span class="line">FROM node:12-alpine</span><br><span class="line">RUN apk add --no-cache python3 g++ make</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY . .</span><br><span class="line">RUN yarn install --production</span><br><span class="line">CMD [&quot;node&quot;, &quot;src/index.js&quot;]</span><br></pre></td></tr></table></figure></li>
<li><p>æ„å»ºå®¹å™¨é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="å¯åŠ¨åº”ç”¨å®¹å™¨"><a href="#å¯åŠ¨åº”ç”¨å®¹å™¨" class="headerlink" title="å¯åŠ¨åº”ç”¨å®¹å™¨"></a>å¯åŠ¨åº”ç”¨å®¹å™¨</h4><ol>
<li><p>å¯åŠ¨å®¹å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨<a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000</a>ä¸­æŸ¥çœ‹åº”ç”¨</p>
</li>
</ol>
<h2 id="Part3ï¼šæ›´æ–°åº”ç”¨ç¨‹åº"><a href="#Part3ï¼šæ›´æ–°åº”ç”¨ç¨‹åº" class="headerlink" title="Part3ï¼šæ›´æ–°åº”ç”¨ç¨‹åº"></a>Part3ï¼šæ›´æ–°åº”ç”¨ç¨‹åº</h2><h4 id="æ›´æ–°æºç "><a href="#æ›´æ–°æºç " class="headerlink" title="æ›´æ–°æºç "></a>æ›´æ–°æºç </h4><ol>
<li><p>ä¿®æ”¹<code>src/static/js/app.js</code></p>
</li>
<li><p>æ„å»ºæ–°çš„é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="åˆ é™¤æ—§çš„å®¹å™¨"><a href="#åˆ é™¤æ—§çš„å®¹å™¨" class="headerlink" title="åˆ é™¤æ—§çš„å®¹å™¨"></a>åˆ é™¤æ—§çš„å®¹å™¨</h4><ol>
<li><p>è·å–å®¹å™¨ID</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure></li>
<li><p>åœæ­¢æ—§å®¹å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Swap out &lt;the-container-id&gt; with the ID from docker ps</span><br><span class="line">$ docker stop &lt;the-container-id&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>ç§»é™¤æ—§å®¹å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm &lt;the-container-id&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><em>åˆå¹¶åœæ­¢å’Œç§»é™¤æŒ‡ä»¤</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f &lt;container-id&gt;</span><br></pre></td></tr></table></figure>



<h3 id="å¯åŠ¨æ–°çš„åº”ç”¨å®¹å™¨"><a href="#å¯åŠ¨æ–°çš„åº”ç”¨å®¹å™¨" class="headerlink" title="å¯åŠ¨æ–°çš„åº”ç”¨å®¹å™¨"></a>å¯åŠ¨æ–°çš„åº”ç”¨å®¹å™¨</h3><ol>
<li><p>å¯åŠ¨æ–°å®¹å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ·æ–°æµè§ˆå™¨</p>
</li>
</ol>
<h2 id="Part4ï¼šåº”ç”¨ç¨‹åºå…±äº«"><a href="#Part4ï¼šåº”ç”¨ç¨‹åºå…±äº«" class="headerlink" title="Part4ï¼šåº”ç”¨ç¨‹åºå…±äº«"></a>Part4ï¼šåº”ç”¨ç¨‹åºå…±äº«</h2><h4 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h4><ol>
<li>ç™»å½•<a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a></li>
<li>ç‚¹å‡»Create RespositoryæŒ‰é’®</li>
<li>å‘½åï¼Œç¡®ä¿å¯è§æ€§ä¸ºPublic</li>
<li>ç‚¹å‡»CreateæŒ‰é’®</li>
</ol>
<h4 id="æ¨é€é•œåƒ"><a href="#æ¨é€é•œåƒ" class="headerlink" title="æ¨é€é•œåƒ"></a>æ¨é€é•œåƒ</h4><ol>
<li><p>ç™»å½•Docker Hub</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u YOUR-USER-NAME</span><br></pre></td></tr></table></figure></li>
<li><p>é‡å‘½åé•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag getting-started YOUR-USER-NAME/getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>æ¨é€é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push YOUR-USER-NAME/getting-started</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="åœ¨ä¸€ä¸ªæ–°å®ä¾‹ä¸Šè¿è¡Œé•œåƒ"><a href="#åœ¨ä¸€ä¸ªæ–°å®ä¾‹ä¸Šè¿è¡Œé•œåƒ" class="headerlink" title="åœ¨ä¸€ä¸ªæ–°å®ä¾‹ä¸Šè¿è¡Œé•œåƒ"></a>åœ¨ä¸€ä¸ªæ–°å®ä¾‹ä¸Šè¿è¡Œé•œåƒ</h4><ol>
<li><p>æ‰“å¼€<a target="_blank" rel="noopener" href="https://labs.play-with-docker.com/">Play with Docker</a></p>
</li>
<li><p>ç‚¹å‡»ç™»å½•ï¼Œé€‰æ‹©docker</p>
</li>
<li><p>è¿æ¥è‡³Docker Hubè´¦å·</p>
</li>
<li><p>ç‚¹å‡»ADD NEW INSTANCE</p>
</li>
<li><p>å¯åŠ¨åˆšåˆšæ¨é€çš„åº”ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 YOUR-USER-NAME/getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹3000ç«¯å£</p>
</li>
</ol>
<h2 id="Part5ï¼šæ•°æ®æŒä¹…åŒ–"><a href="#Part5ï¼šæ•°æ®æŒä¹…åŒ–" class="headerlink" title="Part5ï¼šæ•°æ®æŒä¹…åŒ–"></a>Part5ï¼šæ•°æ®æŒä¹…åŒ–</h2><h4 id="æ–°å»ºä¸¤ä¸ªå®¹å™¨"><a href="#æ–°å»ºä¸¤ä¸ªå®¹å™¨" class="headerlink" title="æ–°å»ºä¸¤ä¸ªå®¹å™¨"></a>æ–°å»ºä¸¤ä¸ªå®¹å™¨</h4><ol>
<li><p>æ–°å»ºä¸€ä¸ª<code>ubuntu</code>å®¹å™¨ï¼ŒåŒæ—¶åˆ›å»ºå†…å®¹ä¸ºä¸€ä¸ªéšæœºæ•°å­—çš„<code>/data.txt</code>æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d ubuntu bash -c &quot;shuf -i 1-10000 -n 1 -o /data.txt &amp;&amp; tail -f /dev/null&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p>
<p><em>ubuntuå®¹å™¨shellç»ˆç«¯å‘½ä»¤ï¼š</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /data.txt</span><br></pre></td></tr></table></figure>

<p><em>ä½¿ç”¨dockers execå‘½ä»¤è¡Œï¼š</em></p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec &lt;container-id&gt; cat /data.txt</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨ç›¸åŒé•œåƒçš„å¦ä¸€ä¸ªubuntuå®¹å™¨ï¼Œå¹¶æŸ¥çœ‹ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it ubuntu ls /</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="æŒä¹…åŒ–todoæ•°æ®"><a href="#æŒä¹…åŒ–todoæ•°æ®" class="headerlink" title="æŒä¹…åŒ–todoæ•°æ®"></a>æŒä¹…åŒ–todoæ•°æ®</h4><ol>
<li><p>åˆ›å»ºå·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create todo-db</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºåº”ç”¨ç¨‹åºå®¹å™¨ï¼ŒæŒ‡å®šå·æŒ‚è½½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 -v todo-db:/etc/todos getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹todoæ•°æ®ï¼Œåˆ é™¤å®¹å™¨åé‡æ–°åˆ›å»ºï¼Œå¯ä»¥çœ‹åˆ°todoæ•°æ®ä»ç„¶åœ¨åˆ—è¡¨ä¸­</p>
</li>
</ol>
<h4 id="æŸ¥çœ‹æ•°æ®å­˜å‚¨ä¿¡æ¯ï¼š"><a href="#æŸ¥çœ‹æ•°æ®å­˜å‚¨ä¿¡æ¯ï¼š" class="headerlink" title="æŸ¥çœ‹æ•°æ®å­˜å‚¨ä¿¡æ¯ï¼š"></a>æŸ¥çœ‹æ•°æ®å­˜å‚¨ä¿¡æ¯ï¼š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect todo-db</span><br></pre></td></tr></table></figure>



<h2 id="Part6ï¼šä½¿ç”¨ç»‘å®šæŒ‚è½½"><a href="#Part6ï¼šä½¿ç”¨ç»‘å®šæŒ‚è½½" class="headerlink" title="Part6ï¼šä½¿ç”¨ç»‘å®šæŒ‚è½½"></a>Part6ï¼šä½¿ç”¨ç»‘å®šæŒ‚è½½</h2><h4 id="å¯åŠ¨ä¸€ä¸ªå¼€å‘æ¨¡å¼å®¹å™¨"><a href="#å¯åŠ¨ä¸€ä¸ªå¼€å‘æ¨¡å¼å®¹å™¨" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªå¼€å‘æ¨¡å¼å®¹å™¨"></a>å¯åŠ¨ä¸€ä¸ªå¼€å‘æ¨¡å¼å®¹å™¨</h4><ol>
<li><p>åœ¨PowerShellä¸‹è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 `</span><br><span class="line">     -w /app -v &quot;$(pwd):/app&quot; `</span><br><span class="line">     node:12-alpine `</span><br><span class="line">     sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹æ—¥å¿—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f 8f660e5ddb02</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹<code>src/static/js/app.js</code>ä¸­çš„ä»£ç ï¼Œåˆ·æ–°æµè§ˆå™¨ï¼Œå¯ä»¥çœ‹åˆ°æ›´æ–°</p>
</li>
</ol>
<h2 id="part7ï¼šæ··åˆå®¹å™¨åº”ç”¨ç¨‹åº"><a href="#part7ï¼šæ··åˆå®¹å™¨åº”ç”¨ç¨‹åº" class="headerlink" title="part7ï¼šæ··åˆå®¹å™¨åº”ç”¨ç¨‹åº"></a>part7ï¼šæ··åˆå®¹å™¨åº”ç”¨ç¨‹åº</h2><h4 id="å¯åŠ¨MySQL"><a href="#å¯åŠ¨MySQL" class="headerlink" title="å¯åŠ¨MySQL"></a>å¯åŠ¨MySQL</h4><ol>
<li><p>åˆ›å»ºç½‘ç»œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create todo-app</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºmySQLå®¹å™¨å¹¶å°†å®ƒè¿æ¥åˆ°ç½‘ç»œï¼Œå¹¶å®šä¹‰ç¯å¢ƒå˜é‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d `</span><br><span class="line">     --network todo-app --network-alias mysql `</span><br><span class="line">     -v todo-mysql-data:/var/lib/mysql `</span><br><span class="line">     -e MYSQL_ROOT_PASSWORD=secret `</span><br><span class="line">     -e MYSQL_DATABASE=todos `</span><br><span class="line">     mysql:5.7</span><br></pre></td></tr></table></figure></li>
<li><p>è¿æ¥æ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;mysql-container-id&gt; mysql -u root -p</span><br></pre></td></tr></table></figure></li>
<li><p>è¾“å…¥å¯†ç åï¼Œæ˜¾ç¤ºæ•°æ®åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="è¿æ¥mySQL"><a href="#è¿æ¥mySQL" class="headerlink" title="è¿æ¥mySQL"></a>è¿æ¥mySQL</h4><ol>
<li><p>ä½¿ç”¨nicklaka/netshooté•œåƒåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --network todo-app nicolaka/netshoot</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥æ‰¾mySQLä¸»æœºçš„IPåœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig mysql</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>ç”¨MySQLè¿è¡Œåº”ç”¨ç¨‹åº</strong></p>
<ol>
<li><p>ä¿®æ”¹æ•°æ®åº“æƒé™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER &#x27;root&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;secret&#x27;;</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure></li>
<li><p>æŒ‡å®šç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å®¹å™¨è¿æ¥åˆ°åº”ç”¨ç¨‹åºç½‘ç»œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 `</span><br><span class="line">   -w /app -v &quot;$(pwd):/app&quot; `</span><br><span class="line">   --network todo-app `</span><br><span class="line">   -e MYSQL_HOST=mysql `</span><br><span class="line">   -e MYSQL_USER=root `</span><br><span class="line">   -e MYSQL_PASSWORD=secret `</span><br><span class="line">   -e MYSQL_DB=todos `</span><br><span class="line">   node:12-alpine `</span><br><span class="line">   sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹æ—¥å¿—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;container-id&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨ç¨‹åºå¹¶å‘todoåˆ—è¡¨ä¸­æ·»åŠ å†…å®¹</p>
</li>
<li><p>è¿æ¥mysqlæ•°æ®åº“å¹¶éªŒè¯å†…å®¹å·²ç»è¢«å†™å…¥æ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;mysql-container-id&gt; mysql -p todos</span><br></pre></td></tr></table></figure>

<p> åœ¨mysql sellä¸­è¿è¡Œ</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from todo_items;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Part8ï¼šä½¿ç”¨Docker-Compose"><a href="#Part8ï¼šä½¿ç”¨Docker-Compose" class="headerlink" title="Part8ï¼šä½¿ç”¨Docker Compose"></a>Part8ï¼šä½¿ç”¨Docker Compose</h2><h4 id="å®‰è£…Docker-Compose"><a href="#å®‰è£…Docker-Compose" class="headerlink" title="å®‰è£…Docker Compose"></a>å®‰è£…Docker Compose</h4><p>æŸ¥çœ‹ç‰ˆæœ¬</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºComposeæ–‡ä»¶"><a href="#åˆ›å»ºComposeæ–‡ä»¶" class="headerlink" title="åˆ›å»ºComposeæ–‡ä»¶"></a>åˆ›å»ºComposeæ–‡ä»¶</h4><ol>
<li>åœ¨appé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»º<code>docker-compose.yml</code>æ–‡ä»¶</li>
<li>å®šä¹‰æ¨¡å¼ç‰ˆæœ¬</li>
<li>å®šä¹‰å¸Œæœ›ä½œä¸ºåº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†è¿è¡Œçš„æœåŠ¡(æˆ–å®¹å™¨)åˆ—è¡¨</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br></pre></td></tr></table></figure>

<h4 id="å®šä¹‰åº”ç”¨æœåŠ¡"><a href="#å®šä¹‰åº”ç”¨æœåŠ¡" class="headerlink" title="å®šä¹‰åº”ç”¨æœåŠ¡"></a>å®šä¹‰åº”ç”¨æœåŠ¡</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PS&gt; docker run -dp 3000:3000 `</span><br><span class="line">  -w /app -v &quot;$(pwd):/app&quot; `</span><br><span class="line">  --network todo-app `</span><br><span class="line">  -e MYSQL_HOST=mysql `</span><br><span class="line">  -e MYSQL_USER=root `</span><br><span class="line">  -e MYSQL_PASSWORD=secret `</span><br><span class="line">  -e MYSQL_DB=todos `</span><br><span class="line">  node:12-alpine `</span><br><span class="line">  sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>å®šä¹‰å®¹å™¨çš„æœåŠ¡æ¡ç›®å’Œé•œåƒ</p>
</li>
<li><p>å®šä¹‰æŒ‡ä»¤</p>
</li>
<li><p>å®šä¹‰æœåŠ¡ç«¯å£</p>
</li>
<li><p>å®šä¹‰å·¥ä½œç›®å½•å’Œå·</p>
</li>
<li><p>è¿ç§»ç¯å¢ƒå˜é‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line">   </span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    image: node:12-alpine</span><br><span class="line">    command: sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - 3000:3000</span><br><span class="line">    working_dir: /app</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_HOST: mysql</span><br><span class="line">      MYSQL_USER: root</span><br><span class="line">      MYSQL_PASSWORD: secret</span><br><span class="line">      MYSQL_DB: todos</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="å®šä¹‰MySQLæœåŠ¡"><a href="#å®šä¹‰MySQLæœåŠ¡" class="headerlink" title="å®šä¹‰MySQLæœåŠ¡"></a>å®šä¹‰MySQLæœåŠ¡</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PS&gt; docker run -d `</span><br><span class="line">  --network todo-app --network-alias mysql `</span><br><span class="line">  -v todo-mysql-data:/var/lib/mysql `</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=secret `</span><br><span class="line">  -e MYSQL_DATABASE=todos `</span><br><span class="line">  mysql:5.7</span><br></pre></td></tr></table></figure>

<ol>
<li>å®šä¹‰æ–°æœåŠ¡å¹¶å‘½åä¸º<code>mysql</code></li>
<li>å®šä¹‰å·æ˜ å°„</li>
<li>æŒ‡å®šç¯å¢ƒå˜é‡</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    image: node:12-alpine</span><br><span class="line">    command: sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - 3000:3000</span><br><span class="line">    working_dir: /app</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_HOST: mysql</span><br><span class="line">      MYSQL_USER: root</span><br><span class="line">      MYSQL_PASSWORD: secret</span><br><span class="line">      MYSQL_DB: todos</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    volumes:</span><br><span class="line">      - todo-mysql-data:/var/lib/mysql</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: secret</span><br><span class="line">      MYSQL_DATABASE: todos</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  todo-mysql-data:</span><br></pre></td></tr></table></figure>

<h4 id="è¿è¡Œåº”ç”¨ç¨‹åºå †æ ˆ"><a href="#è¿è¡Œåº”ç”¨ç¨‹åºå †æ ˆ" class="headerlink" title="è¿è¡Œåº”ç”¨ç¨‹åºå †æ ˆ"></a>è¿è¡Œåº”ç”¨ç¨‹åºå †æ ˆ</h4><ol>
<li><p>å¯åŠ¨åº”ç”¨ç¨‹åºå †æ ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹æ—¥å¿—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Part9ï¼šé•œåƒæ„å»ºçš„æœ€ä½³å®è·µ"><a href="#Part9ï¼šé•œåƒæ„å»ºçš„æœ€ä½³å®è·µ" class="headerlink" title="Part9ï¼šé•œåƒæ„å»ºçš„æœ€ä½³å®è·µ"></a>Part9ï¼šé•œåƒæ„å»ºçš„æœ€ä½³å®è·µ</h2><h4 id="å®‰å…¨æ€§æ‰«æ"><a href="#å®‰å…¨æ€§æ‰«æ" class="headerlink" title="å®‰å…¨æ€§æ‰«æ"></a>å®‰å…¨æ€§æ‰«æ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker scan getting-started</span><br></pre></td></tr></table></figure>

<h4 id="é•œåƒå±‚"><a href="#é•œåƒå±‚" class="headerlink" title="é•œåƒå±‚"></a>é•œåƒå±‚</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image history getting-started</span><br></pre></td></tr></table></figure>

<p>å±•å¼€æ‰€æœ‰å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image history --no-trunc getting-started</span><br></pre></td></tr></table></figure>

<h4 id="å±‚ç¼“å­˜"><a href="#å±‚ç¼“å­˜" class="headerlink" title="å±‚ç¼“å­˜"></a>å±‚ç¼“å­˜</h4><ol>
<li><p>æ›´æ–°Dcokerfile</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line"> FROM node:12-alpine</span><br><span class="line"> WORKDIR /app</span><br><span class="line"> COPY package.json yarn.lock ./</span><br><span class="line"> RUN yarn install --production</span><br><span class="line"> COPY . .</span><br><span class="line"> CMD [&quot;node&quot;, &quot;src/index.js&quot;]</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»º<code>dockerignore</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºä¸€ä¸ªæ–°é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹<code>src/static.index.html</code></p>
</li>
<li><p>é‡æ–°æ„å»ºé•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸€æ¬¡æ„å»ºä½¿ç”¨äº†ç¼“å­˜</p>
</li>
</ol>
<h4 id="å¤šçº§æ„å»º"><a href="#å¤šçº§æ„å»º" class="headerlink" title="å¤šçº§æ„å»º"></a>å¤šçº§æ„å»º</h4><p>Reactçš„ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line">FROM node:12 AS build</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY package* yarn.lock ./</span><br><span class="line">RUN yarn install</span><br><span class="line">COPY public ./public</span><br><span class="line">COPY src ./src</span><br><span class="line">RUN yarn run build</span><br><span class="line"></span><br><span class="line">FROM nginx:alpine</span><br><span class="line">COPY --from=build /app/build /usr/share/nginx/html</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/10/29/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AA%E8%83%BD%E5%9C%A8React%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%80%E9%A1%B6%E5%B1%82%E8%B0%83%E7%94%A8Hook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/29/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AA%E8%83%BD%E5%9C%A8React%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%80%E9%A1%B6%E5%B1%82%E8%B0%83%E7%94%A8Hook/" class="post-title-link" itemprop="url">ä¸ºä»€ä¹ˆåªèƒ½åœ¨Reactå‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨Hook?</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-29 17:19:55" itemprop="dateCreated datePublished" datetime="2021-10-29T17:19:55+08:00">2021-10-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Hookæ˜¯Reactå‡½æ•°ç»„ä»¶çš„æœºåˆ¶ï¼Œä»¥Counterç»„ä»¶ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å‡½æ•°ç»„ä»¶å’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [state0, setState0] = Didact.useState(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> [satte1, setState1] = Didact.useState(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> [satte2, setState2] = Didact.useState(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">            setState0(c =&gt; c+1)</span></span><br><span class="line"><span class="xml">            setCount1(c =&gt; c+1)&#125;&#125;&gt; </span></span><br><span class="line"><span class="xml">            Count: &#123;state0&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>é¦–å…ˆå®ƒæ˜¯é€šè¿‡å‡½æ•°å®šä¹‰çš„ï¼Œå®é™…è¦æ¸²æŸ“çš„å†…å®¹å†™åœ¨è¿”å›å€¼ä¸­</li>
<li>åœ¨å‡½æ•°ä¸­å¯ä»¥å†™å„ç§å„æ ·çš„Hookï¼ˆ<code>useState</code>ï¼‰</li>
</ol>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ç§å‡½æ•°å«Hookå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>useState</code>çš„å†…éƒ¨åŸç†ï¼š</p>
<p>åœ¨æˆ‘ä»¬è°ƒç”¨<code>useState</code>æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªhookå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«stateçš„å€¼å’Œä¸€ä¸ªactionsé˜Ÿåˆ—ã€‚</p>
<p>åœ¨Counterç¬¬ä¸€æ¬¡æŒ‚è½½çš„æ—¶å€™ä¼šæŠŠé€šè¿‡<code>useState</code>åˆ›å»ºå¥½çš„hookä¸€ä¸ªä¸ªæ·»åŠ åˆ°<code>wipFiber</code>çš„hooksé˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶<code>wipFiber.hook</code>ä¸­æœ‰ä¸‰ä¸ªhook:</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20211029145820062.png" alt="image-20211029145820062"></p>
<p>å› æ­¤ï¼Œåœ¨æˆ‘ä»¬æ‰§è¡Œ<code>[state, setState] = useState(0)</code>çš„æ—¶å€™å®é™…ä¸Š<code>useState</code>å‡½æ•°è¿”å›çš„å°±æ˜¯<code>hook.state</code>å’Œä¸€ä¸ªé—­åŒ…å‡½æ•°<code>setState</code>ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™actionsé˜Ÿåˆ—ä¸­è¿˜æ˜¯ç©ºç©ºå¦‚ä¹Ÿçš„ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»äº†Counterï¼Œå°±ä¼šæ ¹æ®<code>onClick</code>çš„å›è°ƒå‡½æ•°è°ƒç”¨ç›¸åº”çš„<code>setState</code>å‡½æ•°ï¼Œè¿™é‡Œåšçš„ä¸»è¦å·¥ä½œæ˜¯å‘å¯¹åº”hookï¼ˆ<code>setState</code>æ˜¯é—­åŒ…å‡½æ•°ï¼Œä¿å­˜ç€ç›¸åº”<code>useState</code>å‡½æ•°ä¸­å®šä¹‰çš„hookï¼‰çš„actions queueä¸­åŠ å…¥actionï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼ ç»™<code>setState</code>çš„å›è°ƒå‡½æ•°ï¼ŒåŒæ—¶æ›´æ–°<code>wipRoot</code>ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å°±æœ‰å¯èƒ½è°ƒç”¨åˆ°å‡½æ•°ç»„ä»¶çš„æ›´æ–°äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡è°ƒç”¨<code>requestIdleCallback</code>å»æ‰§è¡Œç»„ä»¶çš„æ›´æ–°ä»»åŠ¡çš„ï¼Œæ‰€ä»¥ä¸èƒ½ä¿è¯æ›´æ–°çš„æ—¶æœºï¼Œæœ‰å¯èƒ½æ‰§è¡Œäº†å‡ ä¸ª<code>setState</code>ä¹‹ååˆå¹¶èµ·æ¥ä¸€èµ·æ›´æ–°ã€‚</p>
<p>æ›´æ–°å‡½æ•°å¼ç»„ä»¶æ—¶ï¼Œä¼šå†æ¬¡ä¾æ¬¡æ‰§è¡Œ<code>useState</code>å‡½æ•°ï¼Œä¸åˆæ¬¡æ¸²æŸ“ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡ä¼š<strong>æ ¹æ®<code>hookIndex</code>è·å–ä¸Šä¸€ä¸ªFiber</strong>çš„hooksé˜Ÿåˆ—ä¸­ä¿å­˜çš„å¯¹åº”çš„<code>hook</code>ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªä¿å­˜ç€çŠ¶æ€å’ŒåŠ¨ä½œçš„å¯¹è±¡å«hookçš„åŸå› ï¼šæ€»æ˜¯è¦åœ¨é‡æ–°æ¸²æŸ“æ—¶æŠŠä¸Šæ¬¡çš„çŠ¶æ€å’ŒåŠ¨ä½œç»™â€œé’©â€è¿‡æ¥ï¼Œæ‰èƒ½å®ç°çŠ¶æ€çš„æ›´æ–°ï¼Œä¹Ÿæ˜¯Hookå‡½æ•°è¿™ä¹ˆå«çš„åŸå› ã€‚</p>
<p>ä½¿ç”¨<code>hookIndex</code>å°±æ˜¯æˆ‘ä»¬æŠŠæ–°çš„<code>useState</code>ä¸­çš„hookå’Œä¸Šä¸€æ¬¡è”ç³»èµ·æ¥çš„æ‰‹æ®µï¼Œæ‰€ä»¥è¦ç¡®ä¿å‡½æ•°ç»„ä»¶æ¯ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œ<code>useState</code>è°ƒç”¨çš„é¡ºåºéƒ½æ˜¯ä¸€è‡´çš„ï¼</p>
<p>å…³äºå€’è®¡æ—¶ï¼š</p>
<p>åœ¨<code>setInterval</code>ä¸­è°ƒç”¨<code>setState</code>ï¼Œä¼šå‘ç°å€’è®¡æ—¶åªæ”¹å˜äº†ä¸€æ¬¡æ•°å­—å°±ä¸å†å˜åŒ–äº†ï¼ŒæŠŠ<code>useState</code>çš„æ‰§è¡Œè¿‡ç¨‹æ‰“å°å‡ºæ¥å¯ä»¥çœ‹åˆ°ï¼š</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20211031180819358.png" alt="image-20211031180819358"></p>
<p>åªæœ‰åœ¨<code>useState</code>ç¬¬äºŒæ¬¡ï¼ˆç¬¬ä¸€æ¬¡æ˜¯åˆæ¬¡æ¸²æŸ“ï¼‰è¢«è°ƒç”¨çš„æ—¶å€™æ‰åœ¨hookä¸­æ·»åŠ äº†actionï¼Œè€Œä¸”<code>setState</code>æ‰§è¡Œäº†äº”æ¬¡ï¼Œæ·»åŠ äº†äº”æ¬¡ã€‚è¿™æ˜¯å› ä¸º<code>setState</code>å®åœ¨<code>setInterval</code>ä¸­è°ƒç”¨çš„ï¼Œè€Œ<code>setInterval</code>æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ›´æ–°çš„æ—¶å€™çš„useStateä¸­è¢«è°ƒç”¨çš„ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/10/20/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAReact%E4%B8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/20/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAReact%E4%B8%8B/" class="post-title-link" itemprop="url">ä»0å¼€å§‹å®ç°ä¸€ä¸ªReactä¸‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-20 23:00:10" itemprop="dateCreated datePublished" datetime="2021-10-20T23:00:10+08:00">2021-10-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ä¹¦æ¥ä¸Šå›ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†<code>createElement</code>å‡½æ•°ã€<code>render</code>å‡½æ•°å’ŒFibersï¼Œæ¥ä¸‹æ¥å°±è¦å¼€å§‹å¤„ç†ç»„ä»¶æ›´æ–°çš„éƒ¨åˆ†äº†~</p>
<h2 id="5-Renderå’ŒCommité˜¶æ®µ"><a href="#5-Renderå’ŒCommité˜¶æ®µ" class="headerlink" title="5.Renderå’ŒCommité˜¶æ®µ"></a>5.<code>Render</code>å’Œ<code>Commit</code>é˜¶æ®µ</h2><p>ä½†åœ¨è¿™ä¹‹å‰ï¼ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ä¸€ä¸ªé—®é¢˜ï¼šåœ¨<code>performUnitOfWork</code>ä¸­æ¯æ¬¡æˆ‘ä»¬å¤„ç†ä¸€ä¸ªå…ƒç´ æ—¶éƒ½ä¼šåœ¨DOM ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ã€‚è€Œä¸”ï¼Œæµè§ˆå™¨è¿˜ä¼šåœ¨å®Œæˆæ•´æ£µæ ‘çš„æ¸²æŸ“ä¹‹å‰æ‰“æ–­æˆ‘ä»¬çš„å·¥ä½œã€‚è¿™æ ·ï¼Œç”¨æˆ·å°†ä¼šçœ‹åˆ°ä¸€ä¸ªä¸å®Œæ•´çš„<code>UI</code>ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çš„ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æŠŠä¿®æ”¹DOMçš„è¿™éƒ¨åˆ†ä»£ç ç§»é™¤ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">performUnitOfWork</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;performUnitOfWork&quot;</span>, fiber)</span><br><span class="line">    <span class="comment">// TODO add dom node</span></span><br><span class="line">    <span class="keyword">if</span>(!fiber.dom) &#123;</span><br><span class="line">        fiber.dom = createDom(fiber)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// TODO create new fibers</span></span><br><span class="line">    <span class="keyword">const</span> elements = fiber.props.children</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> prevSibling = <span class="literal">null</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”åœ¨renderå‡½æ•°ä¸­å»è·Ÿè¸ªfiberæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å«å®ƒâ€œæ­£åœ¨è¿›è¡Œçš„å·¥ä½œâ€rootæˆ–è€…<code>wipRoot</code>ã€‚</p>
<p>å½“æˆ‘ä»¬å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡ï¼ˆä¹Ÿå°±æ˜¯ä»»åŠ¡ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªå•å…ƒçš„æ—¶å€™ï¼‰ï¼Œæˆ‘ä»¬å°±æŠŠæ•´ä¸ªfiberæ ‘æäº¤åˆ°DOMä¸­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitRoot</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// TODO add nodes to dom</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">element, container</span>) </span>&#123;</span><br><span class="line">  wipRoot = &#123;</span><br><span class="line">    <span class="attr">dom</span>: container,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">children</span>: [element],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  nextUnitOfWork = wipRoot</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextUnitOfWork = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> wipRoot = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">workLoop</span>(<span class="params">deadline</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> shouldYield = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">while</span> (nextUnitOfWork &amp;&amp; !shouldYield) &#123;</span><br><span class="line">    nextUnitOfWork = performUnitOfWork(</span><br><span class="line">      nextUnitOfWork</span><br><span class="line">    )</span><br><span class="line">    shouldYield = deadline.timeRemaining() &lt; <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!nextUnitOfWork &amp;&amp; wipRoot) &#123;</span><br><span class="line">    commitRoot()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  requestIdleCallback(workLoop)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨<code>commitRoot</code>å‡½æ•°ä¸­å®Œæˆæäº¤ã€‚è¿™é‡Œæˆ‘ä»¬é€’å½’åœ°å°†æ‰€æœ‰èŠ‚ç‚¹æ·»åŠ åˆ°DOMä¸­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitRoot</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  commitWork(wipRoot.child)</span><br><span class="line">  wipRoot = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitWork</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fiber) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> domParent = fiber.parent.dom</span><br><span class="line">  domParent.appendChild(fiber.dom)</span><br><span class="line">  commitWork(fiber.child)</span><br><span class="line">  commitWork(fiber.sibling)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆä¹Ÿå°±æ˜¯ä¸æ–­æ‰§è¡Œ<code>requestIdleCallback(workLoop)</code>ç”Ÿæˆfiberæ ‘ï¼Œä¿®æ”¹DOMçš„æ“ä½œé›†ä¸­åœ¨commité˜¶æ®µï¼‰</p>
<h2 id="6-åè°ƒ"><a href="#6-åè°ƒ" class="headerlink" title="6.åè°ƒ"></a>6.åè°ƒ</h2><p>å¸¦ç›®å‰ä¸ºæ­¢æˆ‘ä»¬åªæ˜¯åœ¨DOMä¸­æ·»åŠ ä¸œè¥¿ï¼Œæ€ä¹ˆå»æ›´æ–°æˆ–è€…åˆ é™¤èŠ‚ç‚¹å‘¢ï¼Ÿ</p>
<p>è¿™å°±æ˜¯æ‰€è°“çš„åè°ƒï¼ˆreconciliationï¼‰äº†ï¼Œæˆ‘ä»¬éœ€è¦å°†åœ¨<code>render</code>å‡½æ•°ä¸Šæ¥æ”¶åˆ°çš„å…ƒç´ ä¸æäº¤ç»™DOMçš„æœ€åä¸€ä¸ªfiberæ ‘è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p>æ‰€ä»¥å®Œæˆæäº¤åï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜â€œä¸Šä¸€ä¸ªæäº¤åˆ°DOMçš„fiberæ ‘â€çš„å¼•ç”¨ã€‚æˆ‘ä»¬ç§°å®ƒä¸º<code>currentRoot</code>ã€‚</p>
<p>æˆ‘ä»¬è¿˜è¦ä¸ºæ¯ä¸€ä¸ªfiberæ·»åŠ ä¸€ä¸ª<code>alternate</code>å±æ€§ã€‚è¿™ä¸ªå±æ€§æ˜¯åˆ°åˆ°æ—§fiberçš„é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€æ¬¡æäº¤é˜¶æ®µä¸­æäº¤åˆ°DOMä¸­çš„fiberã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitRoot</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	...</span><br><span class="line">	currentRoot = wipRoot</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">funciton <span class="function"><span class="title">render</span>(<span class="params">element, container</span>)</span> &#123;</span><br><span class="line">	wipRoot = &#123;</span><br><span class="line">		...</span><br><span class="line">		<span class="attr">alternate</span>: currentRoot</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> currentRoot = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è®©æˆ‘ä»¬æŠŠåˆ›å»ºæ–°fibersçš„ä»£ç ä»<code>performUnitOfWork</code>ä¸­æå–å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€ä¸ªæ–°çš„<code>reconcileChildren</code>å‡½æ•°ä¸­ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æŠŠæ—§fiberså’Œæ–°å…ƒç´ è°ƒå’Œèµ·æ¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">performUnitOfWork</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">const</span> elements = fiber.props.children</span><br><span class="line">    reconcileChildren(fiber, element)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reconcileChildren</span>(<span class="params">wipFiber, elements</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åŒæ—¶è¿­ä»£æ—§fiberçš„å­©å­ï¼ˆ<code>wipFiber.alternate</code>ï¼‰å’Œæˆ‘ä»¬æƒ³è°ƒå’Œçš„å…ƒç´ æ•°ç»„ã€‚</p>
<p>å¦‚æœå¿½ç•¥åŒæ—¶éå†ä¸€ä¸ªæ•°ç»„å’Œé“¾è¡¨çš„æ¨¡æ¿ä»£ç ï¼Œåœ¨whileå¾ªç¯ä¸­åªå‰©ä¸‹æœ€é‡è¦çš„éƒ¨åˆ†ï¼š<code>oldFiber</code>å’Œ<code>element</code>ã€‚**<code>element</code>æ˜¯æˆ‘ä»¬æƒ³æ¸²æŸ“åœ¨DOMä¸­çš„ä¸œè¥¿ï¼Œ<code>oldFiber</code>åˆ™æ˜¯æˆ‘ä»¬ä¸Šæ¬¡çš„æ¸²æŸ“çš„å†…å®¹ã€‚**</p>
<p>æˆ‘ä»¬éœ€è¦æ¯”è¾ƒå®ƒä»¬ï¼Œæ¥çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰éœ€è¦åº”ç”¨åœ¨DOMä¸­çš„æ›´æ”¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> oldFiber =</span><br><span class="line">    wipFiber.alternate &amp;&amp; wipFiber.alternate.child</span><br><span class="line">  <span class="keyword">let</span> prevSibling = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (</span><br><span class="line">    index &lt; elements.length ||</span><br><span class="line">    oldFiber != <span class="literal">null</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">const</span> element = elements[index]</span><br><span class="line">    <span class="keyword">let</span> newFiber = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO compare oldFiber to element</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨ç±»å‹æ¥æ¯”è¾ƒå®ƒä»¬ï¼š</p>
<ul>
<li>å¦‚æœæ—§fiberå’Œæ–°å…ƒç´ ç±»å‹ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¿ç•™DOMèŠ‚ç‚¹å¹¶ä¸”åªæ›´æ–°çš„å±æ€§</li>
<li>å¦‚æœç±»å‹ä¸åŒï¼Œå¹¶ä¸”å­˜åœ¨æ–°å…ƒç´ ï¼Œæ„å‘³ç€æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„DOMèŠ‚ç‚¹</li>
<li>å¦‚æœç±»å‹ä¸åŒï¼Œå¹¶ä¸”å­˜åœ¨æ—§fiberï¼Œæˆ‘ä»¬éœ€è¦ç§»é™¤æ—§èŠ‚ç‚¹</li>
</ul>
<p>åœ¨è¿™é‡ŒReactè¿˜ç”¨äº†keysï¼Œæ¥å®ç°æ›´é«˜æ•ˆçš„è°ƒå’Œã€‚æ¯”å¦‚ï¼Œå®ƒæ£€æµ‹å­å…ƒç´ åœ¨å…ƒç´ æ•°ç»„ä¸­çš„ä½ç½®ä½•æ—¶æ”¹å˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sameType =</span><br><span class="line">    oldFiber &amp;&amp;</span><br><span class="line">    element &amp;&amp;</span><br><span class="line">    element.type == oldFiber.type</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (sameType) &#123;</span><br><span class="line">    <span class="comment">// TODO update the node</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (element &amp;&amp; !sameType) &#123;</span><br><span class="line">    <span class="comment">// TODO add this node</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (oldFiber &amp;&amp; !sameType) &#123;</span><br><span class="line">    <span class="comment">// TODO delete the oldFiber&#x27;s node</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>å½“æ—§fiberå’Œå…ƒç´ æœ‰ç›¸åŒçš„ç±»å‹æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°fiberï¼Œä½¿DOMèŠ‚ç‚¹å’Œæ—§fiberä¿æŒä¸€è‡´ï¼Œå±æ€§å’Œå…ƒç´ ä¿æŒä¸€è‡´ã€‚</p>
<p>æˆ‘ä»¬è¿˜ç»™fiberæ·»åŠ äº†ä¸€ä¸ªæ–°çš„å±æ€§ï¼š<code>effectTag</code>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨æäº¤é˜¶æ®µä½¿ç”¨è¿™ä¸ªå±æ€§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sameType =</span><br><span class="line">      oldFiber &amp;&amp;</span><br><span class="line">      element &amp;&amp;</span><br><span class="line">      element.type == oldFiber.type</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sameType) &#123;</span><br><span class="line">      newFiber = &#123;</span><br><span class="line">        <span class="attr">type</span>: oldFiber.type,</span><br><span class="line">        <span class="attr">props</span>: element.props,</span><br><span class="line">        <span class="attr">dom</span>: oldFiber.dom,</span><br><span class="line">        <span class="attr">parent</span>: wipFiber,</span><br><span class="line">        <span class="attr">alternate</span>: oldFiber,</span><br><span class="line">        <span class="attr">effectTag</span>: <span class="string">&quot;UPDATE&quot;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºéœ€è¦ä¸€ä¸ªæ–°çš„DOMèŠ‚ç‚¹çš„å…ƒç´ ï¼Œæˆ‘ä»¬ç”¨<code>PLACEMENT</code>æ¥æ ‡è®°æ–°fiberï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (element &amp;&amp; !sameType) &#123;</span><br><span class="line">      newFiber = &#123;</span><br><span class="line">        <span class="attr">type</span>: element.type,</span><br><span class="line">        <span class="attr">props</span>: element.props,</span><br><span class="line">        <span class="attr">dom</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">parent</span>: wipFiber,</span><br><span class="line">        <span class="attr">alternate</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">effectTag</span>: <span class="string">&quot;PLACEMENT&quot;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºéœ€è¦åˆ é™¤èŠ‚ç‚¹çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸éœ€è¦æ–°fiberï¼Œåªè¦åœ¨æ—§fiberä¸Šæ·»åŠ effect tagå°±å¥½äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (oldFiber &amp;&amp; !sameType) &#123;</span><br><span class="line">     oldFiber.effectTag = <span class="string">&quot;DELETION&quot;</span></span><br><span class="line">     deletions.push(oldFiber)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬æŠŠfiberæ ‘æäº¤åˆ°DOMæ—¶ï¼Œæˆ‘ä»¬ä»â€œæ­£åœ¨å·¥ä½œä¸­çš„â€æ ¹æ‰§è¡Œï¼Œå®ƒå¹¶æ²¡æœ‰æ—§fiberså‘€ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°ç»„deletionsæ¥è·Ÿè¸ªæƒ³è¦ç§»é™¤çš„èŠ‚ç‚¹ã€‚æ¥ç€ï¼Œå½“æˆ‘ä»¬å‘DOMæäº¤æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬ä»ç„¶ä½¿ç”¨deletionsæ•°ç»„ä¸­çš„fibersï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitRoot</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  deletions.forEach(commitWork)</span><br><span class="line">  commitWork(wipRoot.child)</span><br><span class="line">  currentRoot = wipRoot</span><br><span class="line">  wipRoot = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¿®æ”¹<code>commitWork</code>å‡½æ•°æ¥å¤„ç†æ–°çš„<code>effectTags</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitWork</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fiber) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> domParent = fiber.parent.dom</span><br><span class="line">  domParent.appendChild(fiber.dom)</span><br><span class="line">  commitWork(fiber.child)</span><br><span class="line">  commitWork(fiber.sibling)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœfiberçš„effect tagå€¼æ˜¯<code>PLACEMENT</code>ï¼Œæˆ‘ä»¬å’Œä¹‹å‰åšçš„ä¸€æ ·ï¼ŒæŠŠDOMèŠ‚ç‚¹è¿½åŠ åˆ°çˆ¶fiberçš„èŠ‚ç‚¹ä¸Šï¼›</p>
<p>å¦‚æœæ˜¯<code>DELETION</code>,åˆ™ç›¸åï¼Œæˆ‘ä»¬è¦åˆ é™¤å­èŠ‚ç‚¹ï¼›</p>
<p>å¦‚æœæ˜¯<code>UPDATE</code>ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ›´æ”¹åçš„å±æ€§æ›´æ–°ç°å­˜çš„DOMèŠ‚ç‚¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitWork</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fiber) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> domParent = fiber.parent.dom</span><br><span class="line">   <span class="keyword">if</span> (</span><br><span class="line">    fiber.effectTag === <span class="string">&quot;PLACEMENT&quot;</span> &amp;&amp;</span><br><span class="line">    fiber.dom != <span class="literal">null</span></span><br><span class="line">   ) &#123;</span><br><span class="line">       domParent.appendChild(fiber.dom)</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">    fiber.effectTag === <span class="string">&quot;UPDATE&quot;</span> &amp;&amp;</span><br><span class="line">    fiber.dom != <span class="literal">null</span></span><br><span class="line">   ) &#123;</span><br><span class="line">       updateDom(</span><br><span class="line">           fiber.dom,</span><br><span class="line">           fiber.alternate.props,</span><br><span class="line">           fiber.props</span><br><span class="line">       ) </span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fiber.effectTag === <span class="string">&quot;DELETION&quot;</span>) &#123;</span><br><span class="line">     domParent.removeChild(fiber.dom)</span><br><span class="line">   &#125; </span><br><span class="line">  commitWork(fiber.child)</span><br><span class="line">  commitWork(fiber.sibling)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æŠŠæ›´æ–°çš„æ“ä½œå†™åœ¨<code>updateDom</code>å‡½æ•°ä¸­ï¼šæˆ‘ä»¬å¯¹æ¯”æ–°æ—§fibersçš„å±æ€§ï¼Œç§»é™¤æ— ç”¨å±æ€§ï¼Œè®¾ç½®æ–°çš„æˆ–æ”¹å˜çš„å±æ€§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isProperty = <span class="function"><span class="params">key</span> =&gt;</span> key !== <span class="string">&quot;children&quot;</span></span><br><span class="line"><span class="keyword">const</span> isNew = <span class="function">(<span class="params">prev, next</span>) =&gt;</span> <span class="function"><span class="params">key</span> =&gt;</span></span><br><span class="line">  prev[key] !== next[key]</span><br><span class="line"><span class="keyword">const</span> isGone = <span class="function">(<span class="params">prev, next</span>) =&gt;</span> <span class="function"><span class="params">key</span> =&gt;</span> !(key <span class="keyword">in</span> next)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDom</span>(<span class="params">dom, prevProps, nextProps</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Remove old properties</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(prevProps)</span><br><span class="line">    .filter(isProperty)</span><br><span class="line">    .filter(isGone(prevProps, nextProps))</span><br><span class="line">    .forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">      dom[name] = <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Set new or changed properties</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(nextProps)</span><br><span class="line">    .filter(isProperty)</span><br><span class="line">    .filter(isNew(prevProps, nextProps))</span><br><span class="line">    .forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">      dom[name] = nextProps[name]</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºäº‹ä»¶ç›‘å¬å±æ€§æˆ‘ä»¬éœ€è¦åšç‰¹æ®Šå¤„ç†ï¼Œä¹Ÿå°±æ˜¯å±æ€§åä»¥â€œonâ€å‰ç¼€å¼€å¤´çš„å±æ€§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isEvent = <span class="function"><span class="params">key</span> =&gt;</span> key.startsWith(<span class="string">&quot;on&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> isProperty = <span class="function"><span class="params">key</span> =&gt;</span></span><br><span class="line">  key !== <span class="string">&quot;children&quot;</span> &amp;&amp; !isEvent(key)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœäº‹ä»¶å¤„ç†ç¨‹åºå‘ç”Ÿäº†æ”¹å˜ï¼Œæˆ‘ä»¬æŠŠå®ƒä»èŠ‚ç‚¹ä¸­ç§»é™¤ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Remove old or changed event listeners</span></span><br><span class="line"><span class="built_in">Object</span>.keys(prevProps)</span><br><span class="line">  .filter(isEvent)</span><br><span class="line">  .filter(</span><br><span class="line">    <span class="function"><span class="params">key</span> =&gt;</span></span><br><span class="line">      !(key <span class="keyword">in</span> nextProps) ||</span><br><span class="line">      isNew(prevProps, nextProps)(key)</span><br><span class="line">  )</span><br><span class="line">  .forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> eventType = name</span><br><span class="line">      .toLowerCase()</span><br><span class="line">      .substring(<span class="number">2</span>)</span><br><span class="line">    dom.removeEventListener(</span><br><span class="line">      eventType,</span><br><span class="line">      prevProps[name]</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ·»åŠ ä¸€ä¸ªæ–°çš„å¤„ç†ç¨‹åºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Add event listeners</span></span><br><span class="line"> <span class="built_in">Object</span>.keys(nextProps)</span><br><span class="line">   .filter(isEvent)</span><br><span class="line">   .filter(isNew(prevProps, nextProps))</span><br><span class="line">   .forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> eventType = name</span><br><span class="line">       .toLowerCase()</span><br><span class="line">       .substring(<span class="number">2</span>)</span><br><span class="line">     dom.addEventListener(</span><br><span class="line">       eventType,</span><br><span class="line">       nextProps[name]</span><br><span class="line">     )</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>

<p>ï¼ˆå…¶å®å°±æ˜¯åˆæ¬¡æ¸²æŸ“çš„æ—¶å€™è¦ä»å¤´ï¼ˆæ ¹ï¼‰åˆ°å°¾ï¼ˆå¶ï¼‰ç”Ÿæˆä¸€æ£µfiberæ ‘ï¼Œä¹‹åæœ‰æ›´æ–°åªéœ€è¦è°ƒæ•´éƒ¨åˆ†èŠ‚ç‚¹ï¼Œä¿ç•™ä¸å˜çš„èŠ‚ç‚¹ï¼‰</p>
<h2 id="7-å‡½æ•°ç»„ä»¶"><a href="#7-å‡½æ•°ç»„ä»¶" class="headerlink" title="7.å‡½æ•°ç»„ä»¶"></a>7.å‡½æ•°ç»„ä»¶</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„æ˜¯æ”¯æŒå‡½æ•°å¼ç»„ä»¶ã€‚é¦–å…ˆè®©æˆ‘ä»¬æŠŠåŸæ¥çš„ä¾‹å­ä¿®æ”¹æˆå‡½æ•°å¼ç»„ä»¶ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code>h1</code>å…ƒç´ ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@jsx </span>Didact.createElement */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hi &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">App</span> <span class="attr">name</span>=<span class="string">&quot;foo&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">Didact.render(element, container)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæŠŠJSXè¯­æ³•è½¬æ¢æˆJSå‘¢ï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Didact.createElement(</span><br><span class="line">    <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&quot;Hi &quot;</span>,</span><br><span class="line">    props.name</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> element = Didact.createElement(App, &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å¼ç»„ä»¶æœ‰ä¸¤ä¸ªä¸åŒç‚¹ï¼š</p>
<ul>
<li>å‡½æ•°å¼ç»„ä»¶çš„fiberï¼ˆæœ¬èº«ï¼‰æ²¡æœ‰DOMèŠ‚ç‚¹ï¼ˆæœ¬èº«æ˜¯ç”±å…¶ä»–ç”±DOMèŠ‚ç‚¹çš„fiberç»„æˆçš„å˜›ï¼‰</li>
<li>è€Œä¸”ç»„ä»¶çš„å­©å­æ¥è‡ªäºå‡½æ•°çš„æ‰§è¡Œè€Œä¸æ˜¯ç›´æ¥æ¥è‡ªäº<code>props</code></li>
</ul>
<p>æˆ‘ä»¬æ£€æŸ¥fiber typeæ˜¯ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ®æ­¤åˆ‡æ¢åˆ°ä¸€ä¸ªä¸åŒçš„æ›´æ–°å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isFunctionComponent =</span><br><span class="line">    fiber.type <span class="keyword">instanceof</span> <span class="built_in">Function</span></span><br><span class="line">  <span class="keyword">if</span> (isFunctionComponent) &#123;</span><br><span class="line">    updateFunctionComponent(fiber)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    updateHostComponent(fiber)</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>updateHostComponent</code>ä¸­æˆ‘ä»¬åšçš„äº‹å’Œä¹‹å‰ä¸€æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function <span class="title">updateFunctionComponent</span><span class="params">(fiber)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">function <span class="title">updateHostComponent</span><span class="params">(fiber)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fiber.dom) &#123;</span><br><span class="line">    fiber.dom = createDom(fiber)</span><br><span class="line">  &#125;</span><br><span class="line">  reconcileChildren(fiber, fiber.props.children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨<code>updateFunctionComponent</code>ä¸­æˆ‘ä»¬è¿è¡Œå‡½æ•°æ¥è·å¾—childrenã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™é‡Œçš„<code>fiber.type</code>æ˜¯<code>App</code>å‡½æ•°ï¼Œå½“æˆ‘ä»¬è¿è¡Œå®ƒæ—¶ä¼šè¿”å›ä¸€ä¸ª<code>h1</code>å…ƒç´ ã€‚</p>
<p>æ¥ç€ï¼Œä¸€æ—¦æˆ‘ä»¬å¾—åˆ°äº†childrenï¼Œè°ƒå’Œå‡½æ•°ä¹Ÿä¼šä»¥åŒæ ·çš„æ–¹å¼æ‰§è¡Œï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹å®ƒåšä»»ä½•ä¿®æ”¹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateFunctionComponent</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> children = [fiber.type(fiber.props)]</span><br><span class="line">  reconcileChildren(fiber, children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯<code>commitWork</code>å‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬çš„åˆ°äº†ä¸€äº›æ²¡æœ‰DOMèŠ‚ç‚¹çš„fibersï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ä¸¤ä»¶äº‹ã€‚</p>
<p>é¦–å…ˆï¼Œä¸ºäº†æ‰¾åˆ°DOMèŠ‚ç‚¹çš„çˆ¶äº²ï¼Œæˆ‘ä»¬éœ€è¦åœ¨fiber treeä¸­å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°äº†æ‹¥æœ‰DOMèŠ‚ç‚¹çš„fiberï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> domParentFiber = fiber.parent</span><br><span class="line"> <span class="keyword">while</span> (!domParentFiber.dom) &#123;</span><br><span class="line">   domParentFiber = domParentFiber.parent</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">const</span> domParent = domParentFiber.dom</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (</span><br><span class="line">   fiber.effectTag === <span class="string">&quot;PLACEMENT&quot;</span> &amp;&amp;</span><br><span class="line">   fiber.dom != <span class="literal">null</span></span><br><span class="line"> ) &#123;</span><br><span class="line">   domParent.appendChild(fiber.dom)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ç€å½“åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå…·æœ‰DOMèŠ‚ç‚¹çš„å­å…ƒç´ ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commitDeletion</span>(<span class="params">fiber, domParent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fiber.dom) &#123;</span><br><span class="line">    domParent.removeChild(fiber.dom)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    commitDeletion(fiber.child, domParent)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-Hooks"><a href="#8-Hooks" class="headerlink" title="8.Hooks"></a>8.<code>Hooks</code></h2><p>æœ€åä¸€æ­¥äº†ï¼ç°åœ¨æˆ‘ä»¬å®ç°äº†å‡½æ•°å¼ç»„ä»¶ï¼Œç°åœ¨è®©æˆ‘ä»¬åŠ å…¥çŠ¶æ€ã€‚</p>
<p>è®©æˆ‘ä»¬å†™ä¸€ä¸ªç»å…¸çš„è®¡æ•°å™¨ä¾‹å­ã€‚æ¯æ¬¡æˆ‘ä»¬ç‚¹å‡»å®ƒï¼Œå®ƒçš„stateå°±åŠ ä¸€ã€‚æ³¨æ„æˆ‘ä»¬ç”¨çš„æ˜¯<code>Diadact.useState</code>æ¥è·å–å’Œæ›´æ–°counterå€¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = Didact.useState(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setState(c =&gt; c + 1)&#125;&gt;</span></span><br><span class="line"><span class="xml">      Count: &#123;state&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><code>updateFunctionComponent</code>æ˜¯æˆ‘ä»¬è°ƒç”¨ç¤ºä¾‹ä¸­<code>Counter</code>å‡½æ•°çš„åœ°æ–¹ï¼Œåœ¨<strong>å‡½æ•°å†…éƒ¨</strong>æˆ‘ä»¬è¿˜è°ƒç”¨äº†<code>useState</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateFunctionComponent</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> children = [fiber.type(fiber.props)]</span><br><span class="line">  reconcileChildren(fiber, children)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useState</span>(<span class="params">initial</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è°ƒç”¨å‡½æ•°ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€äº›å…¨å±€å˜é‡ï¼Œä¾›æˆ‘ä»¬åœ¨<code>useState</code>å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰â€œæ­£åœ¨å·¥ä½œçš„â€fiberã€‚</p>
<p>æˆ‘ä»¬è¿˜åœ¨fiberä¸­æ·»åŠ äº†<code>hooks</code>æ•°ç»„ï¼Œæ¥å®ç°åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¤šæ¬¡è°ƒç”¨<code>useState</code>ã€‚åŒæ—¶æˆ‘ä»¬è·Ÿè¸ªå½“å‰çš„hookä¸‹æ ‡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wipFiber = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> hookIndex = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateFunctionComponent</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  wipFiber = fiber</span><br><span class="line">  hookIndex = <span class="number">0</span></span><br><span class="line">  wipFiber.hooks = []</span><br><span class="line">  <span class="keyword">const</span> children = [fiber.type(fiber.props)]</span><br><span class="line">  reconcileChildren(fiber, children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å‡½æ•°å¼ç»„ä»¶è°ƒç”¨<code>useState</code>æ—¶ï¼Œæˆ‘ä»¬æ£€æŸ¥æ˜¯å¦æœ‰ä¸€ä¸ªæ—§hookã€‚æˆ‘ä»¬ç”¨hookä¸‹æ ‡åœ¨fiberçš„<code>alternate</code>å±æ€§ä¸­æ£€æŸ¥ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªæ—§hookï¼Œå°±æŠŠæ—§hookä¸­çš„stateå¤åˆ¶åˆ°æ–°hookä¸­ï¼Œæ²¡æœ‰çš„è¯å‘¢å°±åˆå§‹åŒ–stateã€‚</p>
<p>æ¥ç€æˆ‘ä»¬æŠŠæ–°hookæ·»åŠ åˆ°fiberï¼ŒæŠŠhookä¸‹æ ‡åŠ ä¸€ï¼Œå¹¶ä¸”è¿”å›stateï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useState</span>(<span class="params">initial</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> oldHook =</span><br><span class="line">    wipFiber.alternate &amp;&amp;</span><br><span class="line">    wipFiber.alternate.hooks &amp;&amp;</span><br><span class="line">    wipFiber.alternate.hooks[hookIndex]</span><br><span class="line">  <span class="keyword">const</span> hook = &#123;</span><br><span class="line">    <span class="attr">state</span>: oldHook ? oldHook.state : initial,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  wipFiber.hooks.push(hook)</span><br><span class="line">  hookIndex++</span><br><span class="line">  <span class="keyword">return</span> [hook.state]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>useState</code>è¿˜åº”è¯¥è¿”å›ä¸€ä¸ªæ›´æ–°stateçš„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>setState</code>å‡½æ•°æ¥æ¥æ”¶ä¸€ä¸ªåŠ¨ä½œï¼ˆåœ¨<code>Counter</code>ä¾‹å­ä¸­è¿™ä¸ªåŠ¨ä½œæ˜¯æŠŠstateåŠ ä¸€çš„å‡½æ•°ï¼‰ã€‚</p>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ªåŠ¨ä½œæ¨å…¥ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ˜¯æ·»åŠ åœ¨hookä¸Šçš„ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„äº‹å’Œä¹‹å‰åœ¨<code>render</code>å‡½æ•°ä¸­çš„ç±»ä¼¼ï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„â€œå·¥ä½œä¸­çš„â€rootä½œä¸ºä»»åŠ¡çš„ä¸‹ä¸€ä¸ªå•å…ƒï¼Œä½¿workLoopèƒ½å¼€å¯ä¸€ä¸ªæ–°çš„æ¸²æŸ“é˜¶æ®µï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hook = &#123;</span><br><span class="line">    <span class="attr">state</span>: oldHook ? oldHook.state : initial,</span><br><span class="line">    <span class="attr">queue</span>: [],</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> setState = <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">    hook.queue.push(action)</span><br><span class="line">    wipRoot = &#123;</span><br><span class="line">      <span class="attr">dom</span>: currentRoot.dom,</span><br><span class="line">      <span class="attr">props</span>: currentRoot.props,</span><br><span class="line">      <span class="attr">alternate</span>: currentRoot,</span><br><span class="line">    &#125;</span><br><span class="line">    nextUnitOfWork = wipRoot</span><br><span class="line">    deletions = []</span><br><span class="line">  &#125;</span><br><span class="line">â€‹</span><br><span class="line">  wipFiber.hooks.push(hook)</span><br><span class="line">  hookIndex++</span><br><span class="line">  <span class="keyword">return</span> [hook.state, setState]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿˜æ²¡æ‰§è¡ŒåŠ¨ä½œå‘¢ï¼</p>
<p>æˆ‘ä»¬åœ¨<strong>ä¸‹æ¬¡æ¸²æŸ“ç»„ä»¶çš„æ—¶å€™</strong>å†æ‰§è¡Œï¼Œæˆ‘ä»¬ä»æ—§hooké˜Ÿåˆ—ä¸­æ‹¿åˆ°æ‰€æœ‰åŠ¨ä½œï¼Œå†æŠŠä»–ä»¬ä¸€ä¸ªä¸ªåº”ç”¨åœ¨æ–°hook stateä¸Šï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è¿”å›stateçš„æ—¶å€™å®ƒå·²ç»æ›´æ–°è¿‡äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = oldHook ? oldHook.queue : []</span><br><span class="line">actions.forEach(<span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">    hook.state = action(hook.state)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¤§åŠŸå‘Šæˆï¼æˆ‘ä»¬å†™äº†ä¸€ä¸ªè‡ªå·±çš„ReactğŸ˜€</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥å¤ä¹ ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹8ï¼š</p>
<p>render:</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20211028180235291.png" alt="image-20211028180235291"></p>
<p>hookindexæ˜¯å¹²å˜›çš„ï¼Ÿ</p>
<p>æ¯æ¬¡è§¦å‘ä¸€ä¸ªæ›´æ–°ï¼Œè°ƒç”¨setStateå‡½æ•°ï¼Œéƒ½ä¼šæ›´æ–°nextUnitOfWorkï¼Œå¼€å§‹æ–°ä¸€è½®çš„é‡æ–°æ¸²æŸ“</p>
<p>æ­¤æ—¶fiberä¸€å®šæ˜¯å‡½æ•°ç»„ä»¶ï¼Œindexåœ¨æ›´æ–°å‡½æ•°ä¸­åˆå§‹åŒ–ä¸º0</p>
<p>ç”Ÿæˆchildrençš„å°±æ˜¯æ‰§è¡Œå‡½æ•°çš„è¿‡ç¨‹</p>
<p>ä¼šæŒ¨ä¸ªæ‰§è¡ŒuseStateå‡½æ•°</p>
<p>åˆå§‹åŒ–çš„æ—¶å€™ä¸æ‰§è¡ŒsetStateçš„å›è°ƒ</p>
<p>ä½†æ˜¯åœ¨ä¹‹åçš„æ›´æ–°ä¸­ï¼Œéœ€è¦æ‹¿åˆ°ä¸Šä¸€ä¸ªfiberçŠ¶æ€ä¸­ä¿å­˜çš„å¯¹åº”useState,setStateå›è°ƒé˜Ÿåˆ—ï¼Œå› ä¸ºä¸æ˜¯æ¯ä¸€ä¸ªsetStateéƒ½æ‰§è¡Œ</p>
<p>å¯èƒ½å†ä¸€æ¬¡äº‹ä»¶ä¸­è°ƒç”¨äº†å¤šä¸ªsetState</p>
<p>åœ¨æ‰§è¡ŒsetStateçš„è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸ä¼šç›´æ¥æ”¹å˜çŠ¶æ€çš„å€¼</p>
<p>è€Œæ˜¯æŠŠå›è°ƒå‡½æ•°æ¨åˆ°hooké˜Ÿåˆ—ä¸­ï¼ŒåŒæ—¶æ›´æ–°nextUnitOfWorkï¼Œæµè§ˆå™¨ä¸€æ—¦æœ‰ç©ºé—²å°±ä¼šé‡æ–°æ¸²æŸ“</p>
<p>æ¯”å¦‚è°ƒç”¨äº†5ä¸ªuseStateï¼Œåœ¨ç¬¬ä¸‰ä¸ªuseStateçš„æ—¶å€™æµè§ˆå™¨é‡æ–°æ¸²æŸ“</p>
<p>å‰ä¸¤ä¸ªuseStateæ˜¯æ²¡æœ‰è¢«æ‰“æ–­çš„ï¼Œé‚£ä¹ˆhookIndexé€’å¢åˆ°äº†2</p>
<p>ç¬¬ä¸‰ä¸ªçš„æ—¶å€™ï¼Œåˆæœ‰äº”ä¸ªuseStateè¦æ‰§è¡Œï¼Œå°±è¦ä»0å¼€å§‹äº†</p>
<p>åˆ™æ„å‘³ç€hookIndexç½®ä¸º0ï¼Œè€Œä¸”åˆè¦é‡æ–°æ‰§è¡Œ5ä¸ªuseState</p>
<p>ç”±äºidleçš„å­˜åœ¨ï¼Œå¯èƒ½é˜Ÿåˆ—ä¸­æœ‰å¤šä¸ªaction</p>
<p>å½“æ‰§è¡Œperformçš„æ—¶å€™ï¼Œindexåˆå§‹åŒ–ä¸º0ï¼Œåˆå¼€å§‹æ‰§è¡ŒuseState</p>
<p>è¿™æ—¶wipFiber.alternate.hooksä¸ä¸ºç©ºï¼Œè€Œä¸”hookindexä¹Ÿæœ‰å€¼</p>
<p>ä¸»è¦æ˜¯setStateå’ŒuseStateæ‰§è¡Œé¡ºåºçš„é—®é¢˜</p>
<p>æ ˆ</p>
<p>ä¸ºäº†è®©æ–°çš„hookèƒ½å¤Ÿå’Œæ—§çš„hookè”ç³»èµ·æ¥</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/10/17/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAReact/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/17/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAReact/" class="post-title-link" itemprop="url">ä»0å¼€å§‹å®ç°ä¸€ä¸ªReact</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-17 12:18:53" itemprop="dateCreated datePublished" datetime="2021-10-17T12:18:53+08:00">2021-10-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æœ€è¿‘çœ‹åˆ°ä¸€ç¯‡<a target="_blank" rel="noopener" href="https://pomb.us/build-your-own-react/">æ•™ä½ æ„å»ºä¸€ä¸ªReact</a> çš„æ–‡ç« ï¼Œæ„Ÿè§‰å†™çš„å¾ˆå¥½ï¼Œè€Œä¸”äº¤äº’ä¹Ÿåšå¾—ç‰¹åˆ«æ£’ï¼Œåœ¨æ­¤ç¿»è¯‘è®°å½•ä¸€ä¸‹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« çš„ä¸»è¦ç›®çš„æ˜¯éµå¾ªReactä»£ç çš„ä½“ç³»ç»“æ„ä¸€æ­¥æ­¥åœ°å†™å‡ºä¸€ä¸ªç®€å•çš„Reactï¼Œä½†æ²¡æœ‰æ‰€æœ‰çš„ä¼˜åŒ–å’Œéå¿…è¦çš„åŠŸèƒ½ã€‚</p>
<p>è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>The <code>createElement</code> Function</li>
<li>The <code>render</code> Function</li>
<li>å¹¶å‘æ¨¡å‹</li>
<li>Fibers</li>
<li>æ¸²æŸ“å’Œæäº¤é˜¶æ®µ</li>
<li>åè°ƒ</li>
<li>å‡½æ•°ç»„ä»¶</li>
<li>Hooks</li>
</ol>
<h2 id="1ï¼šå‡†å¤‡"><a href="#1ï¼šå‡†å¤‡" class="headerlink" title="-1ï¼šå‡†å¤‡"></a>-1ï¼šå‡†å¤‡</h2><p>é¦–å…ˆï¼Œ<code>JSX</code>è¯­æ³•æ˜¯é€šè¿‡Babelè½¬æ¢æˆJavaScriptçš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­é…ç½®Babelã€‚</p>
<p>å®‰è£…ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @babel/core @babel/cli @babel/preset-env @babel/preset-react</span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¹ç›®å½•ä¸­æ·»åŠ <code>.babelrc</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>, <span class="string">&quot;@babel/preset-react&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>.babel.config.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> presets = [</span><br><span class="line">  [</span><br><span class="line">    <span class="string">&quot;@babel/env&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">targets</span>: &#123;</span><br><span class="line">        <span class="attr">edge</span>: <span class="string">&quot;17&quot;</span>,</span><br><span class="line">        <span class="attr">firefox</span>: <span class="string">&quot;60&quot;</span>,</span><br><span class="line">        <span class="attr">chrome</span>: <span class="string">&quot;67&quot;</span>,</span><br><span class="line">        <span class="attr">safari</span>: <span class="string">&quot;11.1&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">useBuiltIns</span>: <span class="string">&quot;usage&quot;</span>,</span><br><span class="line">      <span class="attr">corejs</span>: <span class="string">&quot;3.6.4&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; presets &#125;;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ<code>npx babel src --out-dir lib</code>å°±å¯ä»¥æŠŠè½¬æ¢ç»“æœä¿å­˜åœ¨libæ–‡ä»¶å¤¹ä¸‹é¢äº†~</p>
<h2 id="0ï¼šå›é¡¾"><a href="#0ï¼šå›é¡¾" class="headerlink" title="0ï¼šå›é¡¾"></a>0ï¼šå›é¡¾</h2><p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†æ¸²æŸ“ä¸€ä¸ªReactç»„ä»¶çš„è¿‡ç¨‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">title</span>=<span class="string">&quot;foo&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> <span class="comment">// å®šä¹‰Reactç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>) <span class="comment">// ä»DOMä¸­è·å–ä¸€ä¸ªèŠ‚ç‚¹container</span></span><br><span class="line">ReactDOM.render(element, container) <span class="comment">// æŠŠReactç»„ä»¶æ¸²æŸ“åˆ°container</span></span><br></pre></td></tr></table></figure>

<p>è¦å®ç°ä¸€ä¸ªReactï¼Œé¦–å…ˆè¦çŸ¥é“Reactçš„æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œç”¨åŸç”Ÿçš„JavaScriptæ€ä¹ˆå†™ï¼Œå†å»å°è£…æˆæˆ‘ä»¬çš„æ–¹æ³•ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸ä½¿ç”¨Reactè¯­æ³•æ¥å®ç°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<ol>
<li><h4 id="å®šä¹‰ç»„ä»¶"><a href="#å®šä¹‰ç»„ä»¶" class="headerlink" title="å®šä¹‰ç»„ä»¶"></a>å®šä¹‰ç»„ä»¶</h4></li>
</ol>
<p>Babelè½¬æ¢<code>JSX</code>çš„è§„åˆ™å°±æ˜¯ç”¨è°ƒç”¨<code>createElement</code>æ›¿æ¢<code>&lt;&gt;</code>å†…éƒ¨çš„ä»£ç ï¼Œå°†<code>tag name</code>ã€<code>props</code>å’Œå­å…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = React.createElement(</span><br><span class="line">  <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  &#123; <span class="attr">title</span>: <span class="string">&quot;foo&quot;</span> &#125;,</span><br><span class="line">  <span class="string">&quot;Hello&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><code>React.createElement</code>ä¼šå¯¹å‚æ•°åšä¸€äº›éªŒè¯å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé•¿è¿™æ ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: <span class="string">&quot;Hello&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªå¯¹è±¡æ›¿æ¢å‡½æ•°è°ƒç”¨ã€‚<code>type</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜DOMèŠ‚ç‚¹çš„ç±»å‹ï¼Œå°±æ˜¯åœ¨ç”ŸæˆHTMLå…ƒç´ æ—¶å°†è¦ä¼ ç»™<code>document.createElement</code>çš„<code>tagName</code>ã€‚</p>
<p><code>props</code>å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬<code>JSX</code>å±æ€§çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š<code>children</code>ï¼š</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­<code>children</code>æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå…ƒç´ çš„æ•°ç»„ã€‚æ‰€ä»¥å…ƒç´ å®æ•°å‹ç»“æ„çš„ã€‚</p>
<ol start="2">
<li><h4 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h4></li>
</ol>
<p>ï¼ˆ<code>container</code>æ˜¯ç›´æ¥è°ƒç”¨<code>document.getElementById</code>è·å–çš„ä¸ç”¨ç®¡ã€‚ï¼‰å¦ä¸€ä¸ªæˆ‘ä»¬è¦æ›¿æ¢çš„Reactä»£ç æ˜¯<code>ReactDOM.render</code>çš„è°ƒç”¨ã€‚<code>render</code>æ˜¯Reactä¿®æ”¹DOMçš„åœ°æ–¹ï¼Œå› æ­¤æˆ‘ä»¬è¦åœ¨è¿™é‡Œå®ç°DOMæ›´æ–°ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬ç”¨<code>type</code>å±æ€§åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹*ï¼Œæœ¬ä¾‹ä¸­æ˜¯<code>h1</code>ã€‚ç„¶åæˆ‘ä»¬æŠŠå…ƒç´ çš„å…ƒç´ çš„å±æ€§åˆ†é…ç»™èŠ‚ç‚¹ï¼Œæœ¬ä¾‹ä¸­æ˜¯titleå±æ€§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = <span class="built_in">document</span>.createElement(element.type)</span><br><span class="line">node[<span class="string">&quot;title&quot;</span>] = element.props.title</span><br></pre></td></tr></table></figure>

<p>*ä¸ºäº†é¿å…æ··æ·†ï¼Œä¸‹æ–‡ä¸­ä½¿ç”¨â€å…ƒç´ â€è¡¨ç¤ºReactå…ƒç´ ï¼Œâ€œèŠ‚ç‚¹â€è¡¨ç¤ºDOMèŠ‚ç‚¹ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºå­èŠ‚ç‚¹ï¼Œæœ¬ä¾‹ä¸­åªæœ‰ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ã€‚ä½¿ç”¨<code>textNode</code>è€Œä¸æ˜¯<code>innerText</code>å¯ä»¥è®©æˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹å¼å¤„ç†æ‰€æœ‰å…ƒç´ ï¼ˆæ–¹ä¾¿é€’å½’ï¼‰ã€‚æ³¨æ„æˆ‘ä»¬åƒå¤„ç†<code>h1</code>çš„titleä¸€æ ·ç»™æ–‡æœ¬èŠ‚ç‚¹è®¾ç½®<code>nodeValue</code>ï¼š<code>&#123;nodeValue: &quot;hello&quot;&#125;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> text = <span class="built_in">document</span>.createTextNode(<span class="string">&quot;&quot;</span>)</span><br><span class="line">text[<span class="string">&quot;nodeValue&quot;</span>] = element.props.children</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œæˆ‘ä»¬æŠŠ<code>textNode</code>æ·»åŠ åˆ°<code>h1</code>ï¼Œå†æŠŠ<code>h1</code>æ·»åŠ åˆ°<code>container</code>ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±åœ¨ä¸ä½¿ç”¨Reactçš„æƒ…å†µä¸‹å®ç°äº†åŒæ ·çš„åŠŸèƒ½ã€‚ç½—å—¦äº†è¿™ä¹ˆå¤šï¼Œå®ç°èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œç”¨è¿‡Reactçš„åŒå­¦åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: <span class="string">&quot;Hello&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> node = <span class="built_in">document</span>.createElement(element.type)</span><br><span class="line">node[<span class="string">&quot;title&quot;</span>] = element.props.title</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> text = <span class="built_in">document</span>.createTextNode(<span class="string">&quot;&quot;</span>)</span><br><span class="line">text[<span class="string">&quot;nodeValue&quot;</span>] = element.props.children</span><br><span class="line"></span><br><span class="line">node.appendChild(text)</span><br><span class="line">container.appendChild(node)</span><br></pre></td></tr></table></figure>

<h2 id="1ï¼šcreateElementå‡½æ•°"><a href="#1ï¼šcreateElementå‡½æ•°" class="headerlink" title="1ï¼šcreateElementå‡½æ•°"></a>1ï¼š<code>createElement</code>å‡½æ•°</h2><p>ï¼ˆä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥å®šä¹‰äº†elementå¯¹è±¡ï¼‰æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¯¥çœŸæ­£å®ç°ä¸€ä¸ªè‡ªå·±çš„<code>createElement</code>å‡½æ•°äº†ã€‚é¦–å…ˆæŠŠ<code>JSX</code>è½¬æ¢æˆ<code>JS</code>ç ”ç©¶ä¸€ä¸‹<code>createElement</code>æ˜¯å¦‚ä½•è°ƒç”¨çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = React.createElement(</span><br><span class="line">  <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;foo&quot;</span> &#125;,</span><br><span class="line">  React.createElement(<span class="string">&quot;a&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;bar&quot;</span>),</span><br><span class="line">  React.createElement(<span class="string">&quot;b&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¿˜è®°å¾—æˆ‘ä»¬ä¸Šä¸€æ­¥ä¸­å®šä¹‰çš„elementå¯¹è±¡å—ï¼Ÿæˆ‘ä»¬çš„å‡½æ•°çš„åŠŸèƒ½åº”è¯¥æ˜¯åˆ›å»ºä¸€ä¸ªå…·æœ‰<code>type</code>å’Œ<code>props</code>å±æ€§çš„å¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, props, ...children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      ...props,</span><br><span class="line">      children,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä½¿ç”¨äº†å±•å¼€è¿ç®—ç¬¦å¤„ç†<code>props</code>ï¼Œä½¿ç”¨å‰©ä½™å‚æ•°å¤„ç†<code>children</code>ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›<code>children</code>å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ä¾‹å¦‚ï¼Œ<code>createElement(&quot;div&quot;)</code>è¿”å›</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  <span class="string">&quot;props&quot;</span>: &#123; <span class="string">&quot;children&quot;</span>: [] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>createElement(&quot;div&quot;, null, a)</code>è¿”å›</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  <span class="string">&quot;props&quot;</span>: &#123; <span class="string">&quot;children&quot;</span>: [a] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>createElement(&quot;div&quot;, null, a, b)</code>è¿”å›</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  <span class="string">&quot;props&quot;</span>: &#123; <span class="string">&quot;children&quot;</span>: [a, b] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>children</code>æ•°ç»„æˆ–è®¸åŒ…å«å­—ç¬¦ä¸²æˆ–æ•°å­—è¿™æ ·çš„åŸå§‹å€¼ï¼ˆæ ‘ä¸­çš„å¶å­èŠ‚ç‚¹ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥åŒ…è£…ä¸æ˜¯å¯¹è±¡çš„å…ƒç´ ï¼Œå†ç»™å®ƒä»¬ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼š<code>TEXT_ELEMENT</code>ã€‚</p>
<p>(è¿™é‡Œçš„ç®­å¤´å‡½æ•°æˆ‘ä¸€å¼€å§‹å¤šå†™äº†ä¸ªå¤§æ‹¬å·ï¼Œç„¶åå°±ä¸€ç›´æŠ¥é”™ï¼)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">      ...props,</span><br><span class="line">      <span class="attr">children</span>: children.map(<span class="function"><span class="params">child</span> =&gt;</span></span><br><span class="line">        <span class="keyword">typeof</span> child === <span class="string">&quot;object&quot;</span></span><br><span class="line">          ? child</span><br><span class="line">          : createTextElement(child)</span><br><span class="line">      ),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createTextElement</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;TEXT_ELEMENT&quot;</span>,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">nodeValue</span>: text,</span><br><span class="line">      <span class="attr">children</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“æ²¡æœ‰å­å…ƒç´ æ—¶ï¼ŒReactå¹¶æ²¡æœ‰åŒ…è£…åŸå§‹å€¼æˆ–åˆ›å»ºç©ºæ•°ç»„ï¼Œä½†æˆ‘ä»¬æ›´å¸Œæœ›ç®€åŒ–ä»£ç è€Œä¸æ˜¯è¿½æ±‚ä»£ç æ€§èƒ½ğŸ˜€ã€‚</p>
<p>ä¸ºäº†æ›¿æ¢Reactï¼Œæˆ‘ä»¬è¦ç»™è‡ªå·±çš„åº“èµ·ä¸ªåå­—ï¼Œå°±å«<code>Didact</code>å§ï¼ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶æƒ³ä½¿ç”¨<code>JSX</code>è¯­æ³•ï¼Œæ€ä¹ˆå‘Šè¯‰<code>babel</code>è¦ç”¨<code>Didact</code>çš„<code>createElement</code>è€Œä¸æ˜¯<code>React</code>çš„å‘¢ï¼Ÿ</p>
<p>ç”¨è¿™æ ·ä¸€ä¸ªæ³¨é‡Šï¼Œå½“babelç¼–è¯‘<code>JSX</code>æ—¶ï¼Œå°±ä¼šä½¿ç”¨æˆ‘ä»¬å®šä¹‰çš„å‡½æ•°è¾£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@jsx </span>Didact.createElement */</span></span><br><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;foo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">b</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="2-renderå‡½æ•°"><a href="#2-renderå‡½æ•°" class="headerlink" title="2.renderå‡½æ•°"></a>2.<code>render</code>å‡½æ•°</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å†™ä¸€ä¸ªè‡ªå·±çš„<code>ReactDOM.render</code>å‡½æ•°ã€‚ç°åœ¨å‘¢ï¼Œæˆ‘ä»¬åªå…³å¿ƒå‘DOMä¸­æ·»åŠ ä¸œè¥¿ï¼Œä¹‹åæˆ‘ä»¬å†å®ç°æ›´æ–°å’Œåˆ é™¤ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ ¹æ®<code>element type</code>ç”Ÿæˆä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œå†æŠŠè¿™ä¸ªæ–°èŠ‚ç‚¹æ·»åŠ åˆ°containerã€‚</p>
<p>æˆ‘ä»¬è¦é€’å½’åœ°å¯¹æ¯ä¸ªå­èŠ‚ç‚¹æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚åˆ«å¿˜äº†æ–‡æœ¬å…ƒç´ ï¼Œå¦‚æœå…ƒç´ ç±»å‹æ˜¯<code>TEXT_ELEMENT</code>æˆ‘ä»¬å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹è€Œä¸æ˜¯å¸¸è§„èŠ‚ç‚¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">element, container</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dom =</span><br><span class="line">    element.type == <span class="string">&quot;TEXT_ELEMENT&quot;</span></span><br><span class="line">      ? <span class="built_in">document</span>.createTextNode(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      : <span class="built_in">document</span>.createElement(element.type)</span><br><span class="line"></span><br><span class="line">  element.props.children.forEach(<span class="function"><span class="params">child</span> =&gt;</span></span><br><span class="line">    render(child, dom)</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<p>æœ€åæˆ‘ä»¬éœ€è¦ç»™èŠ‚ç‚¹åˆ†é…å…ƒç´ å±æ€§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isProperty = <span class="function"><span class="params">key</span> =&gt;</span> key !== <span class="string">&quot;children&quot;</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(element.props)</span><br><span class="line">    .filter(isProperty)</span><br><span class="line">    .forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">      dom[name] = element.props[name]</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>å®Œæˆï¼æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¯ä»¥æŠŠ<code>JSX</code>æ¸²æŸ“åˆ°DOMä¸­çš„åº“ã€‚</p>
<h2 id="3-å¹¶å‘æ¨¡å‹"><a href="#3-å¹¶å‘æ¨¡å‹" class="headerlink" title="3.å¹¶å‘æ¨¡å‹"></a>3.å¹¶å‘æ¨¡å‹</h2><p>åœ¨å®ç°æ›´å¤šåŠŸèƒ½å‰Â·Â·Â·Â·Â·Â·æˆ‘ä»¬éœ€è¦é‡æ„ä¸€ä¸‹ä»£ç ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬çš„é€’å½’è°ƒç”¨æœ‰ä¸€ä¸ªé—®é¢˜ã€‚ä¸€æ—¦æˆ‘ä»¬å¼€å§‹æ¸²æŸ“ï¼Œç›´åˆ°æˆ‘ä»¬æ¸²æŸ“å®Œæ•´æ£µelementæ ‘éƒ½ä¸ä¼šåœä¸‹æ¥ã€‚å¦‚æœè¿™æ£µelementæ ‘å¾ˆå¤§çš„è¯ï¼Œå®ƒå¯èƒ½ä¼šä½¿ä¸»çº¿ç¨‹é˜»å¡å¾ˆä¹…ã€‚è€Œä¸”å¦‚æœæµè§ˆå™¨éœ€è¦å®ç°ä¸€æ®µå¹³æ»‘çš„åŠ¨ç”»æˆ–è€…å¤„ç†ç”¨æˆ·è¾“å…¥è¿™ç§é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œå®ƒå°†ä¼šä¸€ç›´ç­‰å¾…ç›´åˆ°æ¸²æŸ“å®Œæˆã€‚</p>
<p>å› æ­¤æˆ‘ä»¬å°†æŠŠå·¥ä½œæ‹†åˆ†æˆå°çš„å•å…ƒï¼Œè€Œä¸”æ¯å½“æˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå•å…ƒï¼Œå¦‚æœæœ‰å…¶ä»–äº‹æƒ…è¦åšçš„è¯æˆ‘ä»¬ä¼šè®©æµè§ˆå™¨æ‰“æ–­æ¸²æŸ“ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nextUnitOfWork = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">workLoop</span>(<span class="params">deadline</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> shouldYield = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">while</span> (nextUnitOfWork &amp;&amp; !shouldYield) &#123; </span><br><span class="line">    <span class="comment">// ä»»åŠ¡åˆ—è¡¨ä¸­è¿˜æœ‰ä¸‹ä¸€ä¸ªå•å…ƒè€Œä¸”è¿˜æœ‰ç©ºé—²æ—¶é—´</span></span><br><span class="line">    nextUnitOfWork = performUnitOfWork(</span><br><span class="line">      <span class="comment">// æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">      nextUnitOfWork</span><br><span class="line">    )</span><br><span class="line">    shouldYield = deadline.timeRemaining() &lt; <span class="number">1</span></span><br><span class="line">   	<span class="comment">// åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ç©ºé—²æ—¶é—´</span></span><br><span class="line">  &#125;</span><br><span class="line">  requestIdleCallback(workLoop)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">requestIdleCallback(workLoop)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">performUnitOfWork</span>(<span class="params">nextUnitOfWork</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨<code>requestIdleCallback</code>æ¥å®ç°å¾ªç¯ã€‚å¯ä»¥æŠŠ<code>reuqestIdleCallback</code>çœ‹ä½œä¸€ä¸ª<code>setTimeout    </code>,åªä¸è¿‡ä¸æ˜¯æˆ‘ä»¬å‘Šè¯‰ä»–ä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Œ<strong>æµè§ˆå™¨ä¼šåœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶è¿è¡Œå›è°ƒå‡½æ•°</strong>ã€‚</p>
<p>Reactä¸å†ä½¿ç”¨<code>requestIdleCallback</code>äº†ï¼Œç°åœ¨äººå®¶ç”¨<em>the scheduler package</em>ï¼Œä½†åœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€æ ·çš„æ¦‚å¿µã€‚</p>
<p><code>requestIdleCallback</code>è¿˜ç»™äº†æˆ‘ä»¬ä¸€ä¸ªdeadlineå‚æ•°ã€‚æˆ‘ä»¬å°±æ˜¯ç”¨å®ƒæ¥åˆ¤æ–­åœ¨æµè§ˆå™¨è·å¾—æŒæ§æƒä¹‹å‰æˆ‘ä»¬è¿˜æœ‰å¤šå°‘æ—¶é—´çš„ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡è®¾ç½®ä»»åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå•å…ƒæ¥å¯åŠ¨å¾ªç¯ï¼Œæ¥ä¸‹æ¥å†™äº†ä¸€ä¸ª<code>performUnitOfWork</code>å‡½æ•°ï¼Œå³æ‰§è¡Œäº†ä»»åŠ¡åˆè¿”å›äº†ä»»åŠ¡ä¸­çš„ä¸‹ä¸€ä¸ªå•å…ƒã€‚</p>
<h2 id="4-Fibers"><a href="#4-Fibers" class="headerlink" title="4.Fibers"></a>4.<code>Fibers</code></h2><p>ï¼ˆç°åœ¨æˆ‘ä»¬è¿˜ä¸çŸ¥é“<code>nextUnitOfWork</code>é•¿å•¥æ ·ï¼Œä¹Ÿå°±æ— æ³•å®ç°<code>performUnitOfWork</code>ï¼‰ä¸ºäº†ç»„ç»‡ä»»åŠ¡ä¸­çš„æ‰€æœ‰å•å…ƒæˆ‘ä»¬éœ€è¦ä¸€ç§æ•°æ®ç»“æ„ï¼šé‚£å°±æ˜¯<code>fiber</code>æ ‘ã€‚</p>
<p>ï¼ˆFiberå°±æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„â€è™šæ‹ŸDOMâ€œï¼Œå…¶å®å°±æ˜¯å…ˆç”¨ä¸€ä¸ªå¯¹è±¡æ¥è¡¨è¿°è¿™ä¸ªèŠ‚ç‚¹çš„è‡ªèº«å±æ€§å’Œå®ƒçš„çˆ¶äº²å„¿å­å…„å¼Ÿçš„å…³ç³»ï¼‰</p>
<p><strong>æ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„<code>fiber</code>è€Œä¸”æ¯ä¸ª<code>fiber</code>éƒ½æ˜¯ä»»åŠ¡ä¸­çš„ä¸€ä¸ªå•å…ƒã€‚</strong></p>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦æ¸²æŸ“ä¸€ä¸ªè¿™æ ·çš„elementæ ‘ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Didact.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">a</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">  container</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>render</code>ä¸­æˆ‘ä»¬å°†ä¼šåˆ›å»ºä¸€ä¸ª<code>root fiber</code>ï¼Œå¹¶æŠŠå®ƒè®¾ç½®ä¸º<code>nextUnitOfWork</code>ã€‚æ¥ä¸‹æ¥çš„ä»»åŠ¡å°†ä¼šåœ¨<code>performUnitOfWork</code>ä¸­æ‰§è¡Œï¼Œæˆ‘ä»¬å°†ä¼šå¯¹æ¯ä¸ªfiberåšä¸‰ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>æŠŠå…ƒç´ æ·»åŠ åˆ°DOMä¸­</li>
<li>ä¸ºå…ƒç´ çš„å­©å­åˆ›å»º<code>fibers</code></li>
<li>é€‰æ‹©ä¸‹ä¸€ä¸ªä»»åŠ¡</li>
</ol>
<p>ï¼ˆä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰çœ‹å‡ºæ¥ï¼Œå…¶å®è¿˜æ˜¯é€’å½’ï¼Œåªä¸è¿‡æˆ‘ä»¬æ²¡æœ‰åœ¨é€’å½’é‡Œé¢ä¸å‡æ€ç´¢åœ°æ¸²æŸ“æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ï¼‰</p>
<p>å­¦è¿‡æ•°æ®ç»“æ„çš„åŒå­¦éƒ½åº”è¯¥çŸ¥é“æ ‘é•¿å•¥æ ·ï¼š</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20211018223652632.png" alt="image-20211018223652632"></p>
<p>å°±é•¿fiberæ ‘è¿™æ ·ï¼å…¶å®æ˜¯fiberæ ‘å°±é•¿æ ‘è¿™æ ·ğŸ˜€é€‰æ‹©è¿™ç§æ•°æ®ç»“æ„å½“ç„¶æ˜¯ä¸ºäº†æ–¹ä¾¿éå†äº†ï¼Œæ¯ä¸ªfiberéƒ½é“¾æ¥ç€å®ƒçš„ç¬¬ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œç›¸é‚»çš„å…„å¼ŸèŠ‚ç‚¹å’Œå®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚</p>
<p>å½“æˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªfiberä¸Šçš„ä»»åŠ¡æ—¶ï¼Œå¦‚æœä»–æœ‰<code>child</code>èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå­©å­fiberå°±ä¼šæ˜¯ä»»åŠ¡æ‰§è¡Œçš„ä¸‹ä¸€ä¸ªå•å…ƒã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬å®Œæˆäº†<code>div</code>fiberä¸Šçš„ä»»åŠ¡æ—¶ï¼Œä¸‹ä¸€ä¸ªå•å…ƒå°†ä¼šæ˜¯<code>h1</code>fiberã€‚</p>
<p>å¦‚æœä¸€ä¸ªfiberæ²¡æœ‰<code>child</code>ï¼Œæˆ‘ä»¬æŠŠ<code>sibling</code>å½“ä½œä»»åŠ¡çš„ä¸‹ä¸€ä¸ªå•å…ƒã€‚æ¯”å¦‚ï¼Œ<code>p</code>fiberæ²¡æœ‰<code>child</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®ƒå®Œæˆä¹‹åæ¥åˆ°äº†<code>a</code>fiberã€‚</p>
<p>å†å¦‚æœä¸€ä¸ªfiberæ—¢æ²¡æœ‰<code>child</code>ä¹Ÿæ²¡æœ‰<code>sibling</code>å‘¢ï¼Œæˆ‘ä»¬æ‰¾åˆ°å®ƒçš„â€œå”å”â€ï¼š<code>parent</code>çš„<code>sibling</code>ã€‚å°±åƒ<code>a</code>fiberå’Œ<code>h2</code>fiberçš„å…³ç³»ã€‚</p>
<p>å½“ç„¶å•¦ï¼Œå¦‚æœ<code>parent</code>ä¹Ÿæ²¡æœ‰<code>sibling</code>çš„è¯ï¼Œæˆ‘ä»¬å°±ä¸€ç›´é¡ºç€<code>parent</code>så‘ä¸Šæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°äº†ä¸€ä¸ªå…·æœ‰<code>sibling</code>çš„fiberæˆ–è€…åˆ°è¾¾äº†rootã€‚å¦‚æœæˆ‘ä»¬åˆ°è¾¾äº†rootï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å®Œæˆäº†æ­¤æ¬¡<code>render</code>çš„æ‰€æœ‰ä»»åŠ¡ã€‚ï¼ˆç†Ÿæ‚‰æ•°æ®ç»“æ„çš„åŒå­¦ä¸€å®šå¾ˆå¼€å¿ƒå§ï¼è¿™ä¸å°±æ˜¯å…ˆæ ¹éå†çš„è¿‡ç¨‹å˜›ğŸ˜„ï¼‰</p>
<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬å®ç°ä»£ç éƒ¨åˆ†ï¼š</p>
<p>é¦–å…ˆæŠŠrenderå‡½æ•°ä¸­åˆ›å»ºDOMèŠ‚ç‚¹éƒ¨åˆ†çš„ä»£ç æŠ½å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„<code>createDom</code>å‡½æ•°ä¸­ï¼Œç¨åæˆ‘ä»¬ä¼šç”¨åˆ°å®ƒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDom</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dom =</span><br><span class="line">    fiber.type == <span class="string">&quot;TEXT_ELEMENT&quot;</span></span><br><span class="line">      ? <span class="built_in">document</span>.createTextNode(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      : <span class="built_in">document</span>.createElement(fiber.type)</span><br><span class="line">â€‹</span><br><span class="line">  <span class="keyword">const</span> isProperty = <span class="function"><span class="params">key</span> =&gt;</span> key !== <span class="string">&quot;children&quot;</span></span><br><span class="line">  <span class="built_in">Object</span>.keys(fiber.props)</span><br><span class="line">    .filter(isProperty)</span><br><span class="line">    .forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">      dom[name] = fiber.props[name]</span><br><span class="line">    &#125;)</span><br><span class="line">â€‹</span><br><span class="line">  <span class="keyword">return</span> dom</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>render</code>å‡½æ•°ä¸­æˆ‘ä»¬æŠŠfiber treeçš„rootè®¾ç½®ä¸º<code>nextUnitOfWork</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">element, container</span>) </span>&#123;</span><br><span class="line">  nextUnitOfWork = &#123;</span><br><span class="line">    <span class="attr">dom</span>: container,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">children</span>: [element],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œå½“æµè§ˆå™¨å‡†å¤‡å¥½æ—¶ï¼Œå®ƒä¼šå›è°ƒæˆ‘ä»¬çš„<code>workLoop</code>ï¼Œæˆ‘ä»¬å°†ä¼šä»<code>root</code>å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹å¹¶æŠŠå®ƒæ·»åŠ åˆ°DOMä¸­ã€‚æˆ‘ä»¬ç”¨<code>fiber.dom</code>å±æ€§æ¥è·Ÿè¸ªè¿™ä¸ªDOMèŠ‚ç‚¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">performUnitOfWork</span>(<span class="params">fiber</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fiber.dom) &#123;</span><br><span class="line">    fiber.dom = createDom(fiber)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fiber.parent) &#123;</span><br><span class="line">    fiber.parent.dom.appendChild(fiber.dom)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODO create new fibers</span></span><br><span class="line">  <span class="comment">// TODO return next unit of work</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºæ¯ä¸ª<code>child</code>åˆ›å»ºä¸€ä¸ªæ–°çš„fiberï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = fiber.props.children</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> prevSibling = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (index &lt; elements.length) &#123;</span><br><span class="line">    <span class="keyword">const</span> element = elements[index]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newFiber = &#123;</span><br><span class="line">      <span class="attr">type</span>: element.type,</span><br><span class="line">      <span class="attr">props</span>: element.props,</span><br><span class="line">      <span class="attr">parent</span>: fiber,</span><br><span class="line">      <span class="attr">dom</span>: <span class="literal">null</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬æŠŠå®ƒä½œä¸ºä¸€ä¸ª<code>child</code>æˆ–è€…<code>sibling</code>åŠ å…¥fiber treeï¼Œè¿™å–å†³äºå®ƒæ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ª<code>child</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">      fiber.child = newFiber</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      prevSibling.sibling = newFiber</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    prevSibling = newFiber</span><br><span class="line">    index++</span><br></pre></td></tr></table></figure>

<p>æœ€åæˆ‘ä»¬å¯»æ‰¾ä»»åŠ¡ä¸­çš„ä¸‹ä¸€ä¸ªå•å…ƒã€‚æˆ‘ä»¬é¦–å…ˆå¯»æ‰¾<code>child</code>ï¼Œæ¥ä¸‹æ¥æ˜¯<code>sibling</code>ï¼Œç„¶åæ˜¯<code>uncle</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (fiber.child) &#123;</span><br><span class="line">   <span class="keyword">return</span> fiber.child</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">let</span> nextFiber = fiber</span><br><span class="line"> <span class="keyword">while</span> (nextFiber) &#123;</span><br><span class="line">   <span class="keyword">if</span> (nextFiber.sibling) &#123;</span><br><span class="line">     <span class="keyword">return</span> nextFiber.sibling</span><br><span class="line">   &#125;</span><br><span class="line">   nextFiber = nextFiber.parent</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å°±æ˜¯æˆ‘ä»¬çš„<code>performUnitOfWork</code>è¾£ï¼</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/10/12/test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/12/test/" class="post-title-link" itemprop="url">test</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-12 20:47:34" itemprop="dateCreated datePublished" datetime="2021-10-12T20:47:34+08:00">2021-10-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æŠŠhexoé…ç½®æ”¾åœ¨githubä¸Š</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hemengting.xyz/2021/09/23/%E7%BF%BB%E8%AF%91-viewports%E7%9A%84%E6%95%85%E4%BA%8B-part-one/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmtçš„åšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/23/%E7%BF%BB%E8%AF%91-viewports%E7%9A%84%E6%95%85%E4%BA%8B-part-one/" class="post-title-link" itemprop="url">ç¿»è¯‘:viewportsçš„æ•…äº‹-ç¬¬ä¸€éƒ¨åˆ†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-23 15:11:28" itemprop="dateCreated datePublished" datetime="2021-09-23T15:11:28+08:00">2021-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>åŸæ–‡åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.quirksmode.org/mobile/viewports.html">https://www.quirksmode.org/mobile/viewports.html</a></p>
<p>æœ¬æ–‡ä»åƒç´ çš„æ¦‚å¿µå…¥æ‰‹ï¼Œä»‹ç»äº†æµè§ˆå™¨çª—å£ç¼©æ”¾å¸¦æ¥çš„å˜åŒ–ï¼Œ<code>viewport</code>å±æ€§å’Œè·å–<code>viewport</code>å¤§å°çš„å±æ€§ã€‚ä»¥ä¸‹ä¸ºç¿»è¯‘ï¼š</p>
<p><strong>åœ¨è¿™ä¸ªçŸ­ç³»åˆ—ä¸­æˆ‘å°†é˜è¿°<code>viewports</code>å’Œä¸€äº›é‡è¦çš„å…ƒç´ çš„widthså±æ€§æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ¯”å¦‚<html>æ ‡ç­¾ã€çª—å£å’Œå±å¹•ã€‚</strong></p>
<p>è¿™ä¸€ç¯‡æ˜¯å…³äºæ¡Œé¢æµè§ˆå™¨çš„ï¼Œå®ƒçš„å”¯ä¸€ç›®çš„æ˜¯ä¸ºç§»åŠ¨æµè§ˆå™¨çš„ç±»ä¼¼è®¨è®ºå¥ å®šåŸºç¡€ã€‚è®¸å¤šwebå¼€å‘è€…å·²ç»å¯¹è®¸å¤šæœ‰å…³æ¡Œé¢çš„æ¦‚å¿µæœ‰äº†ç›´è§‚çš„ç†è§£ã€‚åœ¨æ‰‹æœºç«¯æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ç›¸åŒçš„æ¦‚å¿µï¼Œåªä¸è¿‡æ›´åŠ å¤æ‚ï¼Œä¸€ä¸ªå…³äºå¤§å®¶éƒ½çŸ¥é“çš„æœ¯è¯­çš„å…ˆå¯¼è®¨è®ºå°†ä¼šæå¤§å¸®åŠ©åœ°ä½ ç†è§£æ‰‹æœºæµè§ˆå™¨ã€‚</p>
<h3 id="æ¦‚å¿µï¼šè®¾å¤‡åƒç´ å’Œcssåƒç´ "><a href="#æ¦‚å¿µï¼šè®¾å¤‡åƒç´ å’Œcssåƒç´ " class="headerlink" title="æ¦‚å¿µï¼šè®¾å¤‡åƒç´ å’Œcssåƒç´ "></a>æ¦‚å¿µï¼šè®¾å¤‡åƒç´ å’Œ<code>css</code>åƒç´ </h3><p>ç¬¬ä¸€ä¸ªéœ€è¦ç†è§£çš„æ¦‚å¿µæ˜¯<code>CSS</code>åƒç´ ä»¥åŠå®ƒå’Œè®¾å¤‡åƒç´ çš„åŒºåˆ«ã€‚</p>
<p>è®¾å¤‡åƒç´ å°±æ˜¯æˆ‘ä»¬ç›´è§‰ä¸Šè®¤ä¸ºâ€œæ­£ç¡®â€çš„åƒç´ ã€‚è¿™äº›åƒç´ å°±æ˜¯ä½ æ­£åœ¨ä½¿ç”¨çš„è®¾å¤‡çš„æ­£å¼åˆ†è¾¨ç‡ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡<code>screen.width/height</code>è¯»å–ã€‚</p>
<p>å¦‚æœä½ ç»™æŸä¸ªå…ƒç´ è®¾ç½®<code>width: 128px</code>ï¼Œè€Œä½ çš„æ˜¾ç¤ºå™¨çš„å®½åº¦æ˜¯<code>1024px</code>ï¼Œå¹¶ä¸”ä½ æŠŠæµè§ˆå™¨çª—å£æœ€å¤§åŒ–ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å¯ä»¥åœ¨ä½ çš„æ˜¾ç¤ºå™¨ä¸Šå¡«å……8æ¬¡ï¼ˆç²—ç•¥åœ°;è®©æˆ‘ä»¬å¿½ç•¥æ£˜æ‰‹çš„éƒ¨åˆ†ï¼‰ã€‚</p>
<p>ç„¶è€Œï¼Œå¦‚æœç”¨æˆ·ç¼©æ”¾ï¼Œè¿™ä¸ªè®¡ç®—å…³ç³»å°†ä¼šæ”¹å˜ã€‚å¦‚æœç”¨æˆ·æ”¾å¤§è‡³200%ï¼Œä½ çš„<code>width: 128px</code>çš„å…ƒç´ å°†åªèƒ½åœ¨<code>1024px</code>çš„æ˜¾ç¤ºå™¨å¡«å……4æ¬¡ã€‚</p>
<p>åœ¨ç°ä»£æµè§ˆå™¨ä¸­å®ç°çš„ç¼©æ”¾åªä¸è¿‡æ˜¯â€œæ‰©å±•â€åƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯å…ƒç´ çš„å®½åº¦ä»128å˜ä¸º256åƒç´ ï¼›è€Œæ˜¯<em>å®é™…åƒç´ </em>çš„å¤§å°ç¿»å€ã€‚å½¢å¼ä¸Šï¼Œå…ƒç´ çš„å®½åº¦ä»ç„¶æ˜¯128 <code>CSS</code>åƒç´ ï¼Œå³ä½¿å®ƒæ°å¥½å ç”¨256ä¸ªè®¾å¤‡åƒç´ çš„ç©ºé—´ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œæ”¾å¤§200%ä½¿<code>CSS</code>åƒç´ æ‰©å¤§ä¸ºè®¾å¤‡åƒç´ çš„å››å€ã€‚ï¼ˆå®½åº¦ä¸¤å€ï¼Œé«˜åº¦ä¸¤å€ï¼Œæ€»å…±å››å€ï¼‰ã€‚</p>
<p>ä¸€äº›å›¾ç‰‡å¯ä»¥æ˜ç¡®è¿™äº›æ¦‚å¿µã€‚è¿™æ˜¯åœ¨100%ç¼©æ”¾çº§åˆ«çš„å››ä¸ªåƒç´ ï¼Œ<code>CSS</code>åƒç´ ä¸è®¾å¤‡åƒç´ å®Œå…¨é‡å ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/csspixels_100.gif" alt="img"></p>
<p>ç°åœ¨è®©æˆ‘ä»¬ç¼©å°ã€‚<code>CSS</code>åƒç´ å¼€å§‹æ”¶ç¼©ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªè®¾å¤‡åƒç´ ç°åœ¨é‡å äº†å‡ ä¸ª<code>CSS</code>åƒç´ ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/csspixels_out.gif" alt="img"></p>
<p>å¦‚æœä½ æ”¾å¤§ï¼Œä¼šå‘ç”Ÿç›¸åçš„æƒ…å†µã€‚<code>CSS</code>åƒç´ å¼€å§‹å¢é•¿ï¼Œç°åœ¨ä¸€ä¸ª<code>CSS</code>åƒç´ é‡å äº†å‡ ä¸ªè®¾å¤‡åƒç´ ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/csspixels_in.gif" alt="img"></p>
<p>å…³é”®ç‚¹åœ¨äº<em>æˆ‘ä»¬åªå…³å¿ƒ<code>CSS</code>åƒç´ </em>ã€‚æ­£æ˜¯è¿™äº›åƒç´ å†³å®šäº†æ ·å¼è¡¨çš„å‘ˆç°æ–¹å¼ã€‚</p>
<p>è®¾å¤‡åƒç´ å‡ ä¹æ²¡ç”¨ã€‚ä¸æ˜¯å¯¹ç”¨æˆ·ï¼›ç”¨æˆ·ä¼šæ”¾å¤§æˆ–ç¼©å°é¡µé¢ï¼Œç›´åˆ°å¯ä»¥èˆ’æœåœ°é˜…è¯»å®ƒã€‚ç„¶è€Œï¼Œç¼©æ”¾çº§åˆ«å¯¹ä½ æ¥è¯´å¹¶ä¸é‡è¦ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨ç¡®ä¿ä½ çš„<code>CSS</code>å¸ƒå±€è¢«æ‹‰ä¼¸æˆ–å‹ç¼©ã€‚</p>
<p>ï¼ˆç»“è®ºï¼šç¼©å°å°±æ˜¯ç¼©å°<code>CSS</code>åƒç´ ï¼Œæ”¾å¤§å°±æ˜¯æ”¾å¤§<code>CSS</code>åƒç´ ï¼‰</p>
<h3 id="100-ç¼©æ”¾"><a href="#100-ç¼©æ”¾" class="headerlink" title="100%ç¼©æ”¾"></a>100%ç¼©æ”¾</h3><p>æˆ‘ä¸€å¼€å§‹ç”¨å‡è®¾ç¼©æ”¾çº§åˆ«ä¸º100%ä¸¾ä¾‹ã€‚ç°åœ¨æ˜¯æ—¶å€™æ›´ä¸¥æ ¼åœ°å®šä¹‰å®ƒäº†ï¼š</p>
<blockquote>
<p>åœ¨ç¼©æ”¾çº§åˆ«100%ï¼Œä¸€ä¸ª<code>CSS</code>åƒç´ å®Œå…¨ç­‰äºä¸€ä¸ªè®¾å¤‡åƒç´ ã€‚</p>
</blockquote>
<p>100%ç¼©æ”¾çš„æ¦‚å¿µåœ¨æ¥ä¸‹æ¥çš„è¯´æ˜ä¸­éå¸¸æœ‰ç”¨ï¼Œä½†åœ¨æ—¥å¸¸å·¥ä½œä¸­ä½ ä¸åº”è¯¥è¿‡åº¦å…³æ³¨å®ƒã€‚åœ¨æ¡Œé¢ï¼Œä½ é€šå¸¸ä¼šç”¨100%çš„ç¼©æ”¾æ¥æµ‹è¯•ä½ çš„ç½‘ç«™ï¼Œä½†å³ä½¿ç”¨æˆ·æ”¾å¤§æˆ–ç¼©å°ï¼Œç¥å¥‡çš„<code>CSS</code>åƒç´ ä¹Ÿä¼šç¡®ä¿ä½ çš„å¸ƒå±€ä¿æŒç›¸åŒçš„æ¯”ä¾‹ã€‚</p>
<h3 id="å±å¹•å°ºå¯¸-Screen-size"><a href="#å±å¹•å°ºå¯¸-Screen-size" class="headerlink" title="å±å¹•å°ºå¯¸ Screen size"></a>å±å¹•å°ºå¯¸ Screen size</h3><p>è®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›å®é™…çš„æµ‹é‡æ–¹æ³•ã€‚æˆ‘ä»¬ä»<code>screen.width</code>å’Œ<code>screen.height</code>å¼€å§‹ã€‚å®ƒä»¬åŒ…å«ç”¨æˆ·å±å¹•çš„æ€»å®½åº¦å’Œé«˜åº¦ã€‚è¿™äº›å°ºå¯¸ç”¨è®¾å¤‡åƒç´ æ¥è¡¡é‡ï¼Œå› ä¸ºå®ƒä»¬æ°¸è¿œä¸ä¼šæ”¹å˜ï¼šå®ƒä»¬æ˜¯æ˜¾ç¤ºå™¨çš„ç‰¹æ€§ï¼Œè€Œä¸æ˜¯æµè§ˆå™¨çš„ç‰¹æ€§ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_screen.jpg" alt="img"></p>
<p>æœ‰è¶£ï¼ä½†è¿™äº›ä¿¡æ¯åŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆç”¨ã€‚ç”¨æˆ·æ˜¾ç¤ºå™¨çš„å¤§å°å¯¹æˆ‘ä»¬æ¥è¯´å¹¶ä¸é‡è¦ï¼Œé™¤éä½ æƒ³åœ¨webç»Ÿè®¡æ•°æ®åº“ä¸­ä½¿ç”¨å®ƒã€‚</p>
<h3 id="çª—å£å°ºå¯¸-Window-size"><a href="#çª—å£å°ºå¯¸-Window-size" class="headerlink" title="çª—å£å°ºå¯¸ Window size"></a>çª—å£å°ºå¯¸ Window size</h3><p>ç›¸åï¼Œæˆ‘ä»¬æƒ³çŸ¥é“çš„æ˜¯æµè§ˆå™¨çª—å£çš„å†…éƒ¨å°ºå¯¸ã€‚å®ƒä¼šå‘Šè¯‰ä½ ç”¨æˆ·å½“å‰æœ‰å¤šå°‘ç©ºé—´ç”¨æ¥å±•ç¤ºä½ çš„<code>CSS</code>å¸ƒå±€ã€‚ä½ å¯ä»¥é€šè¿‡<code>Window.innerWidth</code>å’Œ<code>window.innerHeight</code>æ¥æŸ¥è¯¢è¿™äº›å°ºå¯¸ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_inner.jpg" alt="img"></p>
<p>æ˜¾ç„¶ï¼Œçª—å£çš„å†…éƒ¨å®½åº¦æ˜¯ä»¥<code>CSS</code>åƒç´ è¡¡é‡çš„ã€‚ä½ éœ€è¦çŸ¥é“ä½ çš„å¸ƒå±€æœ‰å¤šå°‘å¯ä»¥æŒ¤è¿›æµè§ˆå™¨çª—å£ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°é‡ä¼šéšç€ç”¨æˆ·çš„æ”¾å¤§è€Œå‡å°‘ã€‚å¦‚æœç”¨æˆ·æ”¾å¤§ä½ ä¼šå¾—åˆ°æ›´å°‘çš„å¯ç”¨ç©ºé—´ï¼Œ<code>innerWidth/Height</code>çš„é€’å‡å¯ä»¥åæ˜ è¿™ä¸€ç‚¹ã€‚</p>
<p>ï¼ˆzoomçš„æ—¶å€™è™½ç„¶çœ‹èµ·æ¥æµè§ˆå™¨çª—å£å¤§å°æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯innerWidthå˜åŒ–äº†ï¼Œå°±åƒæ”¾å¤§é•œæ•ˆæœä¸€æ ·ï¼Œèƒ½çœ‹è§å†…å®¹çš„åŒºåŸŸå˜åŒ–äº†ï¼‰</p>
<p>ï¼ˆOperaæ˜¯ä¸ªä¾‹å¤–ï¼Œå½“ç”¨æˆ·æ”¾å¤§æ—¶ï¼Œå®ƒçš„<code>innerWidth/Height</code>ä¸ä¼šå‡å°‘ï¼šå®ƒä»¬æ˜¯ä»¥è®¾å¤‡åƒç´ è¡¡é‡çš„ã€‚è¿™åœ¨å°å¼æœºä¸Šå¾ˆçƒ¦äººï¼Œä½†åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå´æ˜¯è‡´å‘½çš„ï¼Œæˆ‘ä»¬ç¨åä¼šçœ‹åˆ°ã€‚)</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_inner_zoomed.jpg" alt="img"></p>
<p>æ³¨æ„ï¼Œæµ‹é‡çš„å®½åº¦å’Œé«˜åº¦åŒ…æ‹¬æ»šåŠ¨æ¡ã€‚å®ƒä»¬ä¹Ÿè¢«è®¤ä¸ºæ˜¯å†…çª—çš„ä¸€éƒ¨åˆ†ã€‚(è¿™ä¸»è¦æ˜¯ç”±äºå†å²åŸå› ã€‚)</p>
<h3 id="æ»šåŠ¨æŠµæ¶ˆ-Scrolling-offset"><a href="#æ»šåŠ¨æŠµæ¶ˆ-Scrolling-offset" class="headerlink" title="æ»šåŠ¨æŠµæ¶ˆ Scrolling offset"></a>æ»šåŠ¨æŠµæ¶ˆ Scrolling offset</h3><p><code>window.pageXOffset</code>å’Œ<code>window.pageYOffset</code>åŒ…å«æ–‡æ¡£çš„æ°´å¹³å’Œå‚ç›´æ»šåŠ¨åç§»é‡ã€‚è¿™æ ·ä½ å°±å¯ä»¥çŸ¥é“ç”¨æˆ·æ»šåŠ¨äº†å¤šå°‘ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_page.jpg" alt="img"></p>
<p>è¿™äº›å±æ€§ä¹Ÿæ˜¯ç”¨<code>CSS</code>åƒç´ åº¦é‡çš„ã€‚ä½ æƒ³çŸ¥é“æ–‡æ¡£å·²ç»å‘ä¸Šæ»šåŠ¨äº†å¤šå°‘ï¼Œä¸ç®¡ç¼©æ”¾çŠ¶æ€æ˜¯ä»€ä¹ˆã€‚</p>
<p>ç†è®ºä¸Šï¼Œå¦‚æœç”¨æˆ·å‘ä¸Šæ»šåŠ¨ï¼Œç„¶åæ”¾å¤§ï¼Œ<code>windw.pageX / YOffset</code>ä¼šæ”¹å˜ã€‚ç„¶è€Œï¼Œæµè§ˆå™¨è¯•å›¾ä¿æŒç½‘é¡µçš„ä¸€è‡´æ€§ï¼Œé€šè¿‡å½“ç”¨æˆ·æ”¾å¤§æ—¶ï¼Œåœ¨å¯è§é¡µé¢çš„é¡¶éƒ¨ä¿æŒç›¸åŒçš„å…ƒç´ æ¥å®ç°ã€‚è¿™å¹¶ä¸æ€»æ˜¯å®Œç¾çš„ï¼Œä½†è¿™æ„å‘³ç€åœ¨å®è·µä¸­<code>window.pageX/YOffset</code>å¹¶æ²¡æœ‰çœŸæ­£æ”¹å˜ï¼šå·²ç»æ»šåŠ¨å‡ºçª—å£çš„<code>CSS</code>åƒç´ æ•°é‡ä¿æŒ(å¤§è‡´)ç›¸åŒã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_page_zoomed.jpg" alt="img"></p>
<h3 id="æ¦‚å¿µ-è§†å£the-viewport"><a href="#æ¦‚å¿µ-è§†å£the-viewport" class="headerlink" title="æ¦‚å¿µ: è§†å£the viewport"></a>æ¦‚å¿µ: è§†å£the <code>viewport</code></h3><p>åœ¨æˆ‘ä»¬ç»§ç»­è®¨è®ºæ›´å¤šçš„JavaScriptå±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥å¦ä¸€ä¸ªæ¦‚å¿µï¼šè§†å£ <code>the viewport</code>ã€‚</p>
<p><code>viewport</code>çš„åŠŸèƒ½æ˜¯çº¦æŸ<html>å…ƒç´ ï¼Œå®ƒæ˜¯ç½‘é¡µæœ€ä¸Šé¢çš„åŒ…å«å—ã€‚</p>
<p>è¿™å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹æ¨¡ç³Šï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªæµå¼å¸ƒå±€ï¼Œå…¶ä¸­ä¸€ä¸ªä¾§è¾¹æ å®½åº¦ä¸º10%ã€‚ç°åœ¨ï¼Œè¾¹æ ä¼šéšç€ä½ è°ƒæ•´æµè§ˆå™¨çª—å£çš„å¤§å°è€Œæ•´é½åœ°å¢é•¿å’Œæ”¶ç¼©ã€‚ä½†è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢?</p>
<p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œä¾§è¾¹æ çš„å®½åº¦æ˜¯å…¶çˆ¶æ çš„10%ã€‚æˆ‘ä»¬å‡è®¾è¿™æ˜¯<body>(å¹¶ä¸”ä½ æ²¡æœ‰ç»™å®ƒè®¾ç½®å®½åº¦)ã€‚é—®é¢˜æ˜¯<body>çš„å®½åº¦æ˜¯å¤šå°‘ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å—çº§å…ƒç´ çš„å®½åº¦éƒ½æ˜¯å…¶çˆ¶å…ƒç´ çš„100%(å½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–ï¼Œä½†æˆ‘ä»¬å…ˆå¿½ç•¥å®ƒä»¬)ã€‚æ‰€ä»¥<body>å’Œå®ƒçš„çˆ¶å…ƒç´ <html>ä¸€æ ·å®½ã€‚</p>
<html>å…ƒç´ æœ‰å¤šå®½ï¼Ÿå®ƒå’Œæµè§ˆå™¨çª—å£ä¸€æ ·å®½ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ çš„ä¾§è¾¹æ `width:10%`å°†è·¨è¶Šæ•´ä¸ªæµè§ˆå™¨çª—å£çš„10%ã€‚æ‰€æœ‰çš„webå¼€å‘äººå‘˜éƒ½ç›´è§‚åœ°çŸ¥é“å¹¶ä½¿ç”¨è¿™ä¸ªäº‹å®ã€‚

<p>ä½ å¯èƒ½ä¸çŸ¥é“è¿™åœ¨ç†è®ºä¸Šæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚ç†è®ºä¸Šï¼Œ<html>å…ƒç´ çš„å®½åº¦å—<code>viewport</code>å®½åº¦çš„é™åˆ¶ã€‚<html>å…ƒç´ å <code>viewport</code>å®½åº¦çš„100%ã€‚</p>
<p><code>viewport</code>ï¼Œåè¿‡æ¥ï¼Œå®Œå…¨ç­‰äºæµè§ˆå™¨çª—å£ï¼šå®ƒæ˜¯è¿™æ ·å®šä¹‰çš„ã€‚<code>viewport</code>ä¸æ˜¯HTMLæ„é€ ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡<code>CSS</code>æ¥å½±å“å®ƒã€‚å®ƒåªæ˜¯æ¡Œé¢æµè§ˆå™¨çª—å£çš„å®½åº¦å’Œé«˜åº¦ã€‚åœ¨ç§»åŠ¨å¹³å°ä¸Šåˆ™è¦å¤æ‚å¾—å¤šã€‚</p>
<h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p>è¿™ç§æƒ…å†µäº§ç”Ÿäº†ä¸€äº›å¥‡æ€ªçš„åæœã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™ä¸Šçœ‹åˆ°å…¶ä¸­ä¸€ä¸ªã€‚ä¸€ç›´æ»šåŠ¨åˆ°é¡¶éƒ¨ï¼Œæ”¾å¤§ä¸¤åˆ°ä¸‰å€ï¼Œè¿™æ ·ç½‘ç«™çš„å†…å®¹å°±ä¼šæº¢å‡ºæµè§ˆå™¨çª—å£ã€‚</p>
<p>ç°åœ¨å‘å³æ»šåŠ¨ï¼Œä½ ä¼šçœ‹åˆ°ç½‘ç«™é¡¶éƒ¨çš„è“è‰²æ¡ä¸å†æ­£ç¡®æ’åˆ—ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_htmlbehaviour.jpg" alt="img"></p>
<p>è¿™ç§è¡Œä¸ºæ˜¯<code>viewport</code>å®šä¹‰æ–¹å¼çš„ç»“æœã€‚æˆ‘ç»™é¡¶éƒ¨çš„è“è‰²æ¡å®šä¹‰<code>width:100%</code>ã€‚æ˜¯è°çš„100%ï¼Ÿ<html>å…ƒç´ ï¼Œå®ƒä¸<code>viewport</code>ä¸€æ ·å®½ï¼Œ<code>viewport</code>ä¸æµè§ˆå™¨çª—å£ä¸€æ ·å®½ã€‚</p>
<p>å…³é”®ç‚¹åœ¨äºï¼šè™½ç„¶åœ¨100%ç¼©æ”¾æ—¶å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†ç°åœ¨æˆ‘ä»¬å·²ç»ç¼©å°äº†<code>viewport</code>ï¼Œå®ƒæ¯”æˆ‘çš„ç½‘ç«™çš„æ€»å®½åº¦è¿˜å°ã€‚è¿™æœ¬èº«å¹¶ä¸é‡è¦ï¼Œå†…å®¹ç°åœ¨ä»<html>å…ƒç´ æº¢å‡ºï¼Œä½†è¯¥å…ƒç´ å…·æœ‰<code>overflow: visible</code>ï¼Œè¿™æ„å‘³ç€æº¢å‡ºçš„å†…å®¹å°†åœ¨ä»»ä½•æƒ…å†µä¸‹æ˜¾ç¤ºã€‚</p>
<p>ä½†æ˜¯è“è‰²çš„æ¡å¹¶æ²¡æœ‰æº¢å‡ºæ¥ã€‚å› ä¸ºæˆ‘ç»™å®ƒè®¾ç½®äº†<code>width:100%</code>ï¼Œæ¯•ç«Ÿï¼Œæµè§ˆå™¨é€šè¿‡æŠŠ<code>viewport</code>çš„å®½åº¦åº”ç”¨åœ¨è“è‰²æ¡ä¸Šæ¥éµå®ˆè¿™ä¸€è®¾ç½®ã€‚ä»–ä»¬å¹¶ä¸å…³å¿ƒå®½åº¦ç°åœ¨å¤ªçª„äº†ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_100percent.jpg" alt="img"></p>
<h3 id="æ–‡æ¡£å®½åº¦"><a href="#æ–‡æ¡£å®½åº¦" class="headerlink" title="æ–‡æ¡£å®½åº¦?"></a>æ–‡æ¡£å®½åº¦?</h3><p>æˆ‘çœŸæ­£éœ€è¦çŸ¥é“çš„æ˜¯æ•´ä¸ªé¡µé¢çš„å†…å®¹æœ‰å¤šå®½ï¼ŒåŒ…æ‹¬é‚£äº›çªå‡ºçš„éƒ¨åˆ†ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œä¸å¯èƒ½æ‰¾åˆ°è¿™ä¸ªå€¼(é™¤éä½ å»è®¡ç®—é¡µé¢ä¸Šæ‰€æœ‰å…ƒç´ çš„å®½åº¦å’Œé¡µè¾¹è·ï¼Œä½†è¯´å¾—å§”å©‰äº›ï¼Œè¿™å¾ˆå®¹æ˜“å‡ºé”™)ã€‚</p>
<p>æˆ‘ç›¸ä¿¡æˆ‘ä»¬éœ€è¦ä¸€ä¸ªJavaScriptå±æ€§å¯¹ï¼Œæ¥ç»™å‡ºæˆ‘æ‰€è¯´çš„â€œæ–‡æ¡£å®½åº¦â€(æ˜¾ç„¶æ˜¯<code>CSS</code>åƒç´ )ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_documentwidth.jpg" alt="img"></p>
<p>å¦‚æœæˆ‘ä»¬çœŸçš„è§‰å¾—å¾ˆéš¾ï¼Œä¸ºä»€ä¹ˆä¸æŠŠè¿™ä¸ªå€¼ä¹Ÿæš´éœ²ç»™<code>CSS</code>å‘¢ï¼Ÿæˆ‘å¸Œæœ›èƒ½å¤Ÿä½¿è“è‰²æ¡çš„<code>width:100%</code>å±æ€§ä¾èµ–äºæ–‡æ¡£çš„å®½åº¦ï¼Œè€Œä¸æ˜¯<html>å…ƒç´ çš„å®½åº¦ã€‚(ä¸è¿‡ï¼Œè¿™è‚¯å®šå¾ˆæ£˜æ‰‹ï¼Œå¦‚æœæ— æ³•å®ç°ï¼Œæˆ‘ä¹Ÿä¸ä¼šæ„Ÿåˆ°æƒŠè®¶ã€‚)</p>
<p>æµè§ˆå™¨å‚å•†ä»¬ï¼Œä½ ä»¬æ€ä¹ˆçœ‹?</p>
<h3 id="æµ‹é‡viewport"><a href="#æµ‹é‡viewport" class="headerlink" title="æµ‹é‡viewport"></a>æµ‹é‡<code>viewport</code></h3><p>ä½ å¯èƒ½æƒ³çŸ¥é“è§†å£çš„å°ºå¯¸ã€‚å®ƒä»¬å¯ä»¥åœ¨<code>document.documentElement.clientWidth</code>å’Œ<code>-Height</code>ä¸­æ‰¾åˆ°ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_client.jpg" alt="img"></p>
<p>å¦‚æœäº†è§£DOMï¼Œå°±ä¼šäº†è§£<code>document.documentElement</code>å®é™…ä¸Šæ˜¯<html>å…ƒç´ ï¼šä»»ä½•<code>html</code>æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚ç„¶è€Œï¼Œå¯ä»¥è¯´è§†å£æ›´é«˜ä¸€çº§ï¼›å®ƒæ˜¯åŒ…å«<html>å…ƒç´ çš„å…ƒç´ ã€‚å¦‚æœç»™<html>å…ƒç´ ä¸€ä¸ªå®½åº¦ï¼Œè¿™å¯èƒ½å¾ˆé‡è¦ã€‚(é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæˆ‘ä¸å»ºè®®è¿™ä¹ˆåšï¼Œä½†è¿™æ˜¯å¯èƒ½çš„ã€‚)</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>document.documentElement.clientWidth</code>å’Œ<code>-Height</code>ä»ç„¶ç»™å‡ºè§†å£çš„å°ºå¯¸ï¼Œè€Œä¸æ˜¯<html>å…ƒç´ çš„å°ºå¯¸ã€‚(è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è§„åˆ™ï¼Œåªé€‚ç”¨äºè¿™ä¸ªå…ƒç´ ï¼Œåªé€‚ç”¨äºè¿™ä¸ªå±æ€§å¯¹ã€‚åœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼Œä½¿ç”¨å…ƒç´ çš„å®é™…å®½åº¦ã€‚)</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_client_smallpage.jpg" alt="img"></p>
<p>å› æ­¤<code>document.documentElement.clientWidth</code>å’Œ<code>-Height</code>æ€»æ˜¯ç»™å‡ºè§†å£çš„å°ºå¯¸ï¼Œè€Œä¸ç®¡<html>å…ƒç´ çš„å°ºå¯¸ã€‚</p>
<h3 id="ä¸¤ä¸ªå±æ€§å¯¹"><a href="#ä¸¤ä¸ªå±æ€§å¯¹" class="headerlink" title="ä¸¤ä¸ªå±æ€§å¯¹"></a>ä¸¤ä¸ªå±æ€§å¯¹</h3><p>ä½†æ˜¯è§†çª—å®½åº¦çš„å°ºå¯¸ä¸ä¹Ÿæ˜¯ç”±<code>window.innerWidth/Height</code>ç»™å‡ºçš„å—?æ˜¯ä¹Ÿä¸æ˜¯ã€‚</p>
<p>è¿™ä¸¤ä¸ªå±æ€§å¯¹ä¹‹é—´æœ‰ä¸€ä¸ªå½¢å¼ä¸Šçš„åŒºåˆ«ï¼š<code>document.documentElement.clientWidth</code>å’Œ<code>-Height</code>ä¸åŒ…æ‹¬æ»šåŠ¨æ¡ï¼Œè€Œ<code>window.innerWidth/Height</code>åŒ…æ‹¬ã€‚ä¸è¿‡ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ç§å¹æ¯›æ±‚ç–µã€‚</p>
<p>æˆ‘ä»¬æœ‰ä¸¤ä¸ªå±æ€§å¯¹çš„ç°çŠ¶æ˜¯æµè§ˆå™¨ä¹‹æˆ˜é—ç•™ä¸‹æ¥çš„ã€‚é‚£æ—¶<code>Netscape</code>åªæ”¯æŒ<code>window.innerWidth/Height</code>è€ŒIEä»…æ”¯æŒ<code>document.documentElement.clientWidth</code>å’Œ<code>-Height</code>ã€‚ä»é‚£æ—¶èµ·ï¼Œæ‰€æœ‰å…¶ä»–æµè§ˆå™¨éƒ½å¼€å§‹æ”¯æŒ<code>clientWidth/Height</code>ï¼Œä½†IEæ²¡æœ‰é€‰æ‹©<code>window.innerWidth/Height</code>ã€‚</p>
<p>åœ¨å°å¼æœºä¸Šæœ‰ä¸¤ä¸ªå¯ç”¨çš„å±æ€§å¯¹æ˜¯ä¸€ä¸ªå°éº»çƒ¦â€”â€”ä½†åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå´æ˜¯ä¸€ä¸ªç¦éŸ³ï¼Œæ­£å¦‚æˆ‘ä»¬å°†çœ‹åˆ°çš„ã€‚</p>
<h3 id="æµ‹é‡å…ƒç´ "><a href="#æµ‹é‡å…ƒç´ " class="headerlink" title="æµ‹é‡å…ƒç´ "></a>æµ‹é‡<html>å…ƒç´ </h3><p>æ‰€ä»¥<code>clientWidth/Height</code>ç»™å‡ºäº†æ‰€æœ‰æƒ…å†µä¸‹çš„è§†å£å°ºå¯¸ã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°<html>å…ƒç´ æœ¬èº«çš„å°ºå¯¸å‘¢?å®ƒä»¬å­˜å‚¨åœ¨<code>document.documentElement.offsewidth</code>å’Œ<code>-Height</code>ä¸­ã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_offset.jpg" alt="img"></p>
<p>è¿™äº›å±æ€§çœŸæ­£åœ°è®©ä½ ä»¥å—çº§å…ƒç´ çš„æ–¹å¼è®¿é—®<html>å…ƒç´ ï¼›å¦‚æœä½ è®¾ç½®<code>width</code>ï¼Œ<code>offsetWidth</code>å°†åæ˜ å®ƒã€‚</p>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_offset_smallpage.jpg" alt="img"></p>
<h3 id="äº‹ä»¶çš„åæ ‡"><a href="#äº‹ä»¶çš„åæ ‡" class="headerlink" title="äº‹ä»¶çš„åæ ‡"></a>äº‹ä»¶çš„åæ ‡</h3><p>ç„¶åæ˜¯äº‹ä»¶åæ ‡ã€‚å½“é¼ æ ‡äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè‡³å°‘ä¼šæš´éœ²5ä¸ªå±æ€§å¯¹ä»¥æä¾›æœ‰å…³äº‹ä»¶ç¡®åˆ‡ä½ç½®çš„ä¿¡æ¯ã€‚å¯¹äºæˆ‘ä»¬çš„è®¨è®ºï¼Œå…¶ä¸­ä¸‰ä¸ªæ˜¯é‡è¦çš„ï¼š</p>
<blockquote>
<ol>
<li><code>pageX/Y</code>ä»¥<code>CSS</code>åƒç´ ç»™å‡ºå…ƒç´ ç›¸å¯¹äº<html>å…ƒç´ çš„åæ ‡ã€‚</li>
<li><code>clientX/Y</code>ä»¥<code>CSS</code>åƒç´ ç»™å‡ºå…ƒç´ ç›¸å¯¹äº<code>viewport</code>çš„å…ƒç´ åæ ‡ã€‚</li>
<li><code>screenX/Y</code> ä»¥<code>CSS</code>åƒç´ ç»™å‡ºç›¸å¯¹äºå±å¹•çš„åæ ‡ã€‚</li>
</ol>
</blockquote>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_pageXY.jpg" alt="img"></p>
<p>90%çš„æ—¶é—´ä½ éƒ½ä¼šéƒ½ä½¿ç”¨<code>pageX/Y</code>ï¼›é€šå¸¸ï¼Œä½ æƒ³çŸ¥é“äº‹ä»¶ç›¸å¯¹äºæ–‡æ¡£çš„ä½ç½®ã€‚å¦å¤–10%çš„æ—¶é—´ä½ ä¼šä½¿ç”¨<code>clientX/Y</code>ã€‚æ‚¨æ°¸è¿œä¸éœ€è¦çŸ¥é“ç›¸å¯¹äºå±å¹•çš„äº‹ä»¶åæ ‡ã€‚</p>
<h3 id="åª’ä½“æŸ¥è¯¢"><a href="#åª’ä½“æŸ¥è¯¢" class="headerlink" title="åª’ä½“æŸ¥è¯¢"></a>åª’ä½“æŸ¥è¯¢</h3><p>æœ€åï¼Œä¸€äº›å…³äºåª’ä½“æŸ¥è¯¢çš„è¯æ±‡ã€‚å…¶æ€æƒ³éå¸¸ç®€å•ï¼šæ‚¨å¯ä»¥å®šä¹‰ç‰¹æ®Šçš„<code>CSS</code>è§„åˆ™ï¼Œè¿™äº›è§„åˆ™åªåœ¨é¡µé¢å®½åº¦å¤§äºã€ç­‰äºæˆ–å°äºç‰¹å®šå¤§å°æ—¶æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> all <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">400px</span>) &#123;</span><br><span class="line">	// styles assigned when <span class="attribute">width</span> is smaller than <span class="number">400px</span>;</span><br><span class="line">	<span class="selector-tag">div</span><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä¾§è¾¹æ æ˜¯<code>300px</code>å®½ï¼Œé™¤éå®½åº¦å°äº<code>400px</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¾§è¾¹æ å˜æˆ<code>100px</code>å®½ã€‚</p>
<p>é—®é¢˜å½“ç„¶æ˜¯ï¼šæˆ‘ä»¬æµ‹é‡çš„å®½åº¦æ˜¯å¤šå°‘?</p>
<p>æœ‰ä¸¤ä¸ªç›¸å…³çš„åª’ä½“æŸ¥è¯¢:``width/height<code>å’Œ</code>device-width/device-height`ã€‚</p>
<ol>
<li><code>width/height</code> ä½¿ç”¨ä¸<code>documentElement.clientwidth /Height</code>ï¼ˆæ¢å¥è¯è¯´ï¼Œ<code>viewport</code>ï¼‰ã€‚å®ƒé€‚ç”¨äº<code>CSS</code>åƒç´ ã€‚</li>
<li><code>device-width/device-height</code> ä½¿ç”¨ä¸<code>screen.width/height</code>ç›¸åŒçš„å€¼ã€‚(æ¢å¥è¯è¯´ï¼Œå±å¹•)ã€‚å®ƒé€‚ç”¨äºè®¾å¤‡åƒç´ ã€‚</li>
</ol>
<p><img src="https://www.quirksmode.org/mobile/pix/viewport/desktop_mediaqueries.jpg" alt="img"></p>
<p>ä½ åº”è¯¥ä½¿ç”¨å“ªä¸€ç§ï¼Ÿæ˜¾è€Œæ˜“è§ï¼Œ<code>width</code>ã€‚Webå¼€å‘äººå‘˜å¯¹è®¾å¤‡å®½åº¦ä¸æ„Ÿå…´è¶£ï¼›é‡è¦çš„æ˜¯æµè§ˆå™¨çª—å£çš„å®½åº¦ã€‚</p>
<p>æ‰€ä»¥åœ¨æ¡Œé¢ä½¿ç”¨å®½åº¦ï¼Œè€Œå¿˜è®°è®¾å¤‡å®½åº¦ã€‚æˆ‘ä»¬å°†çœ‹åˆ°ï¼Œç§»åŠ¨å¹³å°çš„æƒ…å†µæ›´åŠ æ··ä¹±ã€‚</p>
<h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>è¿™å°±æ˜¯æˆ‘ä»¬å¯¹æ¡Œé¢æµè§ˆå™¨è¡Œä¸ºçš„æ¢ç´¢ã€‚æœ¬ç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†å°†è¿™äº›æ¦‚å¿µç§»æ¤åˆ°ç§»åŠ¨è®¾å¤‡ï¼Œå¹¶å¼ºè°ƒäº†ä¸æ¡Œé¢è®¾å¤‡çš„ä¸€äº›é‡è¦åŒºåˆ«ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">He Mengting</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">He Mengting</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
