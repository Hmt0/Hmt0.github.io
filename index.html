<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/project/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/project/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/project/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/project/images/logo.svg" color="#222">

<link rel="stylesheet" href="/project/css/main.css">


<link rel="stylesheet" href="/project/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hmt0.github.io","root":"/project/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="hmt的博客">
<meta property="og:url" content="https://hmt0.github.io/project/index.html">
<meta property="og:site_name" content="hmt的博客">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="He Mengting">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hmt0.github.io/project/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>hmt的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/project/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hmt的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/project/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/project/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/04/18/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%82%BA%E7%BB%93%E8%8A%82%E5%88%86%E5%89%B2%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%B8%80-%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/04/18/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%82%BA%E7%BB%93%E8%8A%82%E5%88%86%E5%89%B2%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E4%B8%80-%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">深度学习肺结节分割项目实战一-处理数据集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-18 18:04:35" itemprop="dateCreated datePublished" datetime="2022-04-18T18:04:35+08:00">2022-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-23 22:22:27" itemprop="dateModified" datetime="2022-04-23T22:22:27+08:00">2022-04-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、LIDC-IDRI数据集简介"><a href="#一、LIDC-IDRI数据集简介" class="headerlink" title="一、LIDC-IDRI数据集简介"></a>一、LIDC-IDRI数据集简介</h2><p><a target="_blank" rel="noopener" href="https://wiki.cancerimagingarchive.net/display/Public/LIDC-IDRI">官方网站</a></p>
<p>肺图像数据库协会的图像收集(LIDC-IDRI)包括<strong>诊断</strong>和<strong>带有病变注释标记的肺癌筛查胸部CT</strong>。这是一个网络公开的国际资源，用于肺癌检测和诊断的计算机辅助诊断(CAD)方法的开发、培训和评估。</p>
<p>数据集包含1018个病例，每个病例包括来自临床胸部<strong>CT扫描的图像</strong>和一个相关的<strong>XML文件</strong>，该文件记录了由四名经验丰富的胸部放射科医生进行的两阶段图像注释过程的结果。在最初的盲读阶段，每个放射科医生独立审查每个CT扫描，并标记出属于三种类型之一的病变（“结节&gt;= 3mm”，“结节&lt;3mm”，“非结节&gt;= 3mm”）。在随后的非盲读阶段，每个放射科医生独立地回顾自己的评分以及其他三位放射科医生的匿名评分，以给出最终意见。</p>
<h2 id="二、参数配置lung-conf"><a href="#二、参数配置lung-conf" class="headerlink" title="二、参数配置lung.conf"></a>二、参数配置lung.conf</h2><p>病例中有的有结节注释，有的没有结节注释，没有的保存在Clean文件夹：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[prepare_dataset]</span><br><span class="line">lidc_dicom_path = ./LIDC-IDRI</span><br><span class="line">mask_path = ./data/Mask</span><br><span class="line">image_path = ./data/Image</span><br><span class="line">clean_path_image = ./data/Clean/Image</span><br><span class="line">clean_path_mask = ./data/Clean/Mask</span><br><span class="line">meta_path = ./data/Meta/</span><br><span class="line">mask_threshold = 8</span><br><span class="line"></span><br><span class="line">[pylidc]</span><br><span class="line">confidence_level = 0.5</span><br><span class="line">padding_size = 512</span><br></pre></td></tr></table></figure>



<h2 id="三、创建数据集prepare-dataset-py："><a href="#三、创建数据集prepare-dataset-py：" class="headerlink" title="三、创建数据集prepare_dataset.py："></a>三、创建数据集prepare_dataset.py：</h2><p>通过MakeDataSet类的prepare_dataset方法创建数据集和标注信息文件，MakeDataSet实例的属性包括：</p>
<ul>
<li>LIRI_list：遍历保存LIDC_IDRI数据的文件夹，得到包含所有病例文件夹名字的列表：</li>
<li>img_path，mask_path：包含结节的肺部图像和掩码的保存路径</li>
<li>clean_path_img，clean_path_mask：不包含结节的肺部图像和掩码的保存路径</li>
<li>meta_path：结节信息保存路径</li>
<li>mask_threshold：最小的结节阈值</li>
<li>c_level和padding：生成结节掩码时的输入参数</li>
<li>meta：结节信息属性名</li>
</ul>
<table>
<thead>
<tr>
<th>patient_id</th>
<th>nodule_no</th>
<th>slice_no</th>
<th>original_image</th>
<th>mask_image</th>
<th>maliganancy</th>
<th>is_cancer</th>
<th>is_clean</th>
</tr>
</thead>
<tbody><tr>
<td>病例id</td>
<td>结节编号</td>
<td>切片编号</td>
<td>图像编号</td>
<td>掩码编号</td>
<td>恶性程度</td>
<td>是否为癌症</td>
<td>是否包含结节</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MakeDataSet</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, LIDC_Patients_list, IMAGE_DIR, MASK_DIR,CLEAN_DIR_IMAGE,CLEAN_DIR_MASK,META_DIR, mask_threshold, padding, confidence_level=<span class="number">0.5</span></span>):</span></span><br><span class="line">        self.IDRI_list = LIDC_Patients_list</span><br><span class="line">        self.img_path = IMAGE_DIR</span><br><span class="line">        self.mask_path = MASK_DIR</span><br><span class="line">        self.clean_path_img = CLEAN_DIR_IMAGE</span><br><span class="line">        self.clean_path_mask = CLEAN_DIR_MASK</span><br><span class="line">        self.meta_path = META_DIR</span><br><span class="line">        self.mask_threshold = mask_threshold</span><br><span class="line">        self.c_level = confidence_level</span><br><span class="line">        self.padding = [(padding,padding),(padding,padding),(<span class="number">0</span>,<span class="number">0</span>)]</span><br><span class="line">        self.meta = pd.DataFrame(index=[],columns=[<span class="string">&#x27;patient_id&#x27;</span>,<span class="string">&#x27;nodule_no&#x27;</span>,<span class="string">&#x27;slice_no&#x27;</span>,<span class="string">&#x27;original_image&#x27;</span>,<span class="string">&#x27;mask_image&#x27;</span>,<span class="string">&#x27;malignancy&#x27;</span>,<span class="string">&#x27;is_cancer&#x27;</span>,<span class="string">&#x27;is_clean&#x27;</span>])</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">calculate_malignancy</span>(<span class="params">self,nodule</span>):</span></span><br><span class="line">        <span class="comment"># 计算结节恶性程度</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save_meta</span>(<span class="params">self,meta_list</span>):</span></span><br><span class="line">        <span class="comment"># 保存结节信息到csv文件</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">prepare_dataset</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 创建数据集</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    LIDC_IDRI_list= [f <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(DICOM_DIR) <span class="keyword">if</span> <span class="keyword">not</span> f.startswith(<span class="string">&#x27;.&#x27;</span>)]</span><br><span class="line">    LIDC_IDRI_list.sort()</span><br><span class="line"></span><br><span class="line">    test= MakeDataSet(LIDC_IDRI_list,IMAGE_DIR,MASK_DIR,CLEAN_DIR_IMAGE,CLEAN_DIR_MASK,META_DIR,mask_threshold,padding,confidence_level)</span><br><span class="line">    test.prepare_dataset()</span><br></pre></td></tr></table></figure>

<h3 id="1、使用到的库"><a href="#1、使用到的库" class="headerlink" title="1、使用到的库"></a>1、使用到的库</h3><ul>
<li><a target="_blank" rel="noopener" href="https://pylidc.github.io/index.html">pylidc</a>：pylidc不仅可用于分析和查询注释数据（不需要访问DICOM图像数据），也能用于处理与LIDC数据集相关联的DICOM文件。</li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/pathlib.html?highlight=path#module-pathlib">pathlib</a>：这个模块提供了用适合不同操作系统的语义表示文件系统路径的类。路径类分为纯路径(提供没有I/O的纯计算操作)和具体路径(继承自纯路径，但也提供I/O操作)。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/tqdm/tqdm">Tqdm</a> 是一个快速，可扩展的Python进度条，可以在 Python 长循环中添加一个进度提示信息，用户只需要封装任意的迭代器 tqdm(iterator)。</li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/statistics.html#statistics.median_high">median_high</a>：高中位数始终是数据集的成员。当数据点的数量为奇数时，将返回中间值。当它是偶数时，将返回两个中间值中较大的一个。</li>
</ul>
<h3 id="2、生成数据集函数"><a href="#2、生成数据集函数" class="headerlink" title="2、生成数据集函数"></a>2、生成数据集函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prepare_dataset</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="comment"># 为image和mask命名</span></span><br><span class="line">    <span class="comment"># 0000,0001,0002,...,0999</span></span><br><span class="line">    prefix = [<span class="built_in">str</span>(x).zfill(<span class="number">3</span>) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建文件夹</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(self.img_path):</span><br><span class="line">        os.makedirs(self.img_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(self.mask_path):</span><br><span class="line">        os.makedirs(self.mask_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(self.clean_path_img):</span><br><span class="line">        os.makedirs(self.clean_path_img)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(self.clean_path_mask):</span><br><span class="line">        os.makedirs(self.clean_path_mask)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(self.meta_path):</span><br><span class="line">        os.makedirs(self.meta_path)</span><br><span class="line"></span><br><span class="line">    IMAGE_DIR = Path(self.img_path)</span><br><span class="line">    MASK_DIR = Path(self.mask_path)</span><br><span class="line">    CLEAN_DIR_IMAGE = Path(self.clean_path_img)</span><br><span class="line">    CLEAN_DIR_MASK = Path(self.clean_path_mask)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> patient <span class="keyword">in</span> tqdm(self.IDRI_list):</span><br><span class="line">        <span class="comment"># 处理每个病例</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Saved Meta data&quot;</span>)</span><br><span class="line">    self.meta.to_csv(self.meta_path+<span class="string">&#x27;meta_info.csv&#x27;</span>,index=<span class="literal">False</span>) <span class="comment"># 保存数据信息</span></span><br></pre></td></tr></table></figure>

<h3 id="3、处理每个病例"><a href="#3、处理每个病例" class="headerlink" title="3、处理每个病例"></a>3、处理每个病例</h3><p>首先获得当前病例名字：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pid = patient #LIDC-IDRI-0001~</span><br></pre></td></tr></table></figure>

<p>查找到一个名字相符的scan对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pylidc <span class="keyword">as</span> pl</span><br><span class="line">scan = pl.query(pl.Scan).<span class="built_in">filter</span>(pl.Scan.patient_id == pid).first()</span><br></pre></td></tr></table></figure>

<p>scan对象中一个结节可能包含多个注释，可以使用pylidc.Scan.cluster_annotations()方法来确定哪些注释是指同一个结节，它使用距离函数来创建一个邻接图，以确定哪些注释在一次扫描中引用了同一个结节:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodules_annotation = scan.cluster_annotations()</span><br></pre></td></tr></table></figure>

<p>将扫描图像值转换为NumPy数组，便于进行图像处理:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vol = scan.to_volume()</span><br><span class="line">print(&quot;Patient ID: &#123;&#125; Dicom Shape: &#123;&#125; Number of Annotated Nodules: &#123;&#125;&quot;.format(pid,vol.shape,len(nodules_annotation)))</span><br></pre></td></tr></table></figure>

<p>输出示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Patient ID: LIDC-IDRI-0003 Dicom Shape: (512, 512, 140) Number of Annotated Nodules: 4</span><br></pre></td></tr></table></figure>

<p>表示编号LIDC-IDRL-0003的病例的成像尺寸为512*512*140，有4个标注结节。</p>
<p>对注释进行可视化可以得到：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scan.visualize(annotation_groups=nodules_annotation)</span><br></pre></td></tr></table></figure>

<p><img src="E:\博客图\Figure_1.png"></p>
<p>从图中可以看出编号为LIDC-IDRI-0003的病例有四个标注的结节，分别包含不同数量的注释，最多为4个（因为一共有四位医师）。</p>
<p>有的病例中不包含结节注释，应区别处理：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(nodules_annotation) &gt; <span class="number">0</span>:</span><br><span class="line">	<span class="comment"># 处理包含结节注释的病例</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="comment"># 处理不包含结节注释的病例</span></span><br></pre></td></tr></table></figure>

<h3 id="4、处理包含结节注释的病例"><a href="#4、处理包含结节注释的病例" class="headerlink" title="4、处理包含结节注释的病例"></a>4、处理包含结节注释的病例</h3><p>使用pylidc.utils.consensus()方法获得结节掩码。</p>
<p>输入参数：</p>
<ul>
<li><p>nodule：聚类后<strong>一个结节</strong>的注释列表，长度最大为4，例如：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodule <span class="number">1</span> : [Annotation(id=<span class="number">90</span>,scan_id=<span class="number">14</span>), Annotation(id=<span class="number">93</span>,scan_id=<span class="number">14</span>), Annotation(id=<span class="number">98</span>,scan_id=<span class="number">14</span>), </span><br></pre></td></tr></table></figure></li>
<li><p>clevel：例如clevel=0.5，那么当各位医师注释的结节分割中有超过50%的结果包含该体素时，体素返回值为1，否则为0。</p>
</li>
<li><p>padding：如果提供了整数，则边界框将按此整数数量均匀填充。其他形式的参数可以参考文档。</p>
</li>
</ul>
<p>返回值：</p>
<ul>
<li>mask[ndarray]：是根据clevel生成的注释掩码的布尔值数组。</li>
<li>cbbox[tumple]：是一个3元组，可用于在相应位置对图像进行索引，根据不同的padding值，cddox的大小也不同。</li>
<li>masks[,list]：是对应于每个Annotation对象的布尔值掩码的列表。掩码列表中的每个掩码具有相同的形状，并在cbbox提供的边界框中进行采样。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> nodule_idx, nodule <span class="keyword">in</span> <span class="built_in">enumerate</span>(nodules_annotation): <span class="comment"># 遍历每个结节</span></span><br><span class="line">               </span><br><span class="line">    mask, cbbox, masks = consensus(nodule,self.c_level,self.padding)</span><br><span class="line"></span><br><span class="line">    lung_np_array = vol[cbbox]</span><br><span class="line"></span><br><span class="line">    malignancy, cancer_label = self.calculate_malignancy(nodule) <span class="comment"># 计算恶性程度</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> nodule_slice <span class="keyword">in</span> <span class="built_in">range</span>(mask.shape[<span class="number">2</span>]):</span><br><span class="line">        <span class="comment"># 处理每个CT切片</span></span><br></pre></td></tr></table></figure>

<h4 id="计算恶性程度"><a href="#计算恶性程度" class="headerlink" title="计算恶性程度"></a>计算恶性程度</h4><p>选取所有注释的中高位数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calculate_malignancy</span>(<span class="params">self,nodule</span>):</span></span><br><span class="line">list_of_malignancy =[]</span><br><span class="line"><span class="keyword">for</span> annotation <span class="keyword">in</span> nodule:</span><br><span class="line">	list_of_malignancy.append(annotation.malignancy)</span><br><span class="line"></span><br><span class="line">malignancy = median_high(list_of_malignancy)</span><br><span class="line"><span class="keyword">if</span>  malignancy &gt; <span class="number">3</span>:</span><br><span class="line">	<span class="keyword">return</span> malignancy,<span class="literal">True</span></span><br><span class="line"><span class="keyword">elif</span> malignancy &lt; <span class="number">3</span>:</span><br><span class="line">	<span class="keyword">return</span> malignancy, <span class="literal">False</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="keyword">return</span> malignancy, <span class="string">&#x27;Ambiguous&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="处理每个CT切片"><a href="#处理每个CT切片" class="headerlink" title="处理每个CT切片"></a>处理每个CT切片</h4><p>结节像素太小的跳过，有些遮罩尺寸太小。这些可能会阻碍训练：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> np.<span class="built_in">sum</span>(mask[:,:,nodule_slice]) &lt;= self.mask_threshold:</span><br><span class="line">	<span class="keyword">continue</span></span><br></pre></td></tr></table></figure>

<p>对肺实质进行分割（segment_lung函数会在下一篇中单独介绍）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lung_segmented_np_array = segment_lung(lung_np_array[:,:,nodule_slice])</span><br></pre></td></tr></table></figure>

<p>一些值被存储为-0，这可能导致pytorch训练中的数据类型错误：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lung_segmented_np_array[lung_segmented_np_array==-<span class="number">0</span>] =<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>每个文件的命名:NI=结节图像，MA=掩码原始：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nodule_name = <span class="string">&quot;&#123;&#125;_NI&#123;&#125;_slice&#123;&#125;&quot;</span>.<span class="built_in">format</span>(pid[-<span class="number">4</span>:],prefix[nodule_idx],prefix[nodule_slice])</span><br><span class="line">mask_name = <span class="string">&quot;&#123;&#125;_MA&#123;&#125;_slice&#123;&#125;&quot;</span>.<span class="built_in">format</span>(pid[-<span class="number">4</span>:],prefix[nodule_idx],prefix[nodule_slice])</span><br><span class="line">meta_list = [pid[-<span class="number">4</span>:],nodule_idx,prefix[nodule_slice],nodule_name,mask_name,malignancy,cancer_label,<span class="literal">False</span>]</span><br></pre></td></tr></table></figure>

<p>保存结节信息文件和图像：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">self.save_meta(meta_list)</span><br><span class="line">np.save(patient_image_dir / nodule_name,lung_segmented_np_array)</span><br><span class="line">np.save(patient_mask_dir / mask_name,mask[:,:,nodule_slice])</span><br></pre></td></tr></table></figure>

<p><code>save_meta()</code>函数将结节信息添加到meta列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_meta</span>(<span class="params">self,meta_list</span>):</span></span><br><span class="line">    <span class="comment"># 将结节信息保存在csv文件中</span></span><br><span class="line">    tmp = pd.Series(meta_list,index=[<span class="string">&#x27;patient_id&#x27;</span>,<span class="string">&#x27;nodule_no&#x27;</span>,<span class="string">&#x27;slice_no&#x27;</span>,<span class="string">&#x27;original_image&#x27;</span>,<span class="string">&#x27;mask_image&#x27;</span>,<span class="string">&#x27;malignancy&#x27;</span>,<span class="string">&#x27;is_cancer&#x27;</span>,<span class="string">&#x27;is_clean&#x27;</span>])</span><br><span class="line">    self.meta = self.meta.append(tmp,ignore_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h3 id="5、处理不包含注释的病例"><a href="#5、处理不包含注释的病例" class="headerlink" title="5、处理不包含注释的病例"></a>5、处理不包含注释的病例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">patient_clean_dir_image = CLEAN_DIR_IMAGE / pid</span><br><span class="line">patient_clean_dir_mask = CLEAN_DIR_MASK / pid</span><br><span class="line">Path(patient_clean_dir_image).mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">Path(patient_clean_dir_mask).mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> <span class="built_in">slice</span> <span class="keyword">in</span> <span class="built_in">range</span>(vol.shape[<span class="number">2</span>]):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">slice</span> &gt;<span class="number">50</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># 处理每一个切片</span></span><br></pre></td></tr></table></figure>

<p>没有结节的切片对应的mask为全是黑色：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lung_segmented_np_array = segment_lung(vol[:,:,<span class="built_in">slice</span>])</span><br><span class="line">lung_segmented_np_array[lung_segmented_np_array==-<span class="number">0</span>] =<span class="number">0</span></span><br><span class="line">lung_mask = np.zeros_like(lung_segmented_np_array)</span><br></pre></td></tr></table></figure>

<p>保存图像和对应掩码，将信息添加到meta数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nodule_name = <span class="string">&quot;&#123;&#125;_CN001_slice&#123;&#125;&quot;</span>.<span class="built_in">format</span>(pid[-<span class="number">4</span>:],prefix[<span class="built_in">slice</span>])</span><br><span class="line">mask_name = <span class="string">&quot;&#123;&#125;_CM001_slice&#123;&#125;&quot;</span>.<span class="built_in">format</span>(pid[-<span class="number">4</span>:],prefix[<span class="built_in">slice</span>])</span><br><span class="line"></span><br><span class="line">meta_list = [pid[-<span class="number">4</span>:],<span class="built_in">slice</span>,prefix[<span class="built_in">slice</span>],nodule_name,mask_name,<span class="number">0</span>,<span class="literal">False</span>,<span class="literal">True</span>]</span><br><span class="line">self.save_meta(meta_list)</span><br><span class="line">np.save(patient_clean_dir_image / nodule_name, lung_segmented_np_array)</span><br><span class="line">np.save(patient_clean_dir_mask / mask_name, lung_mask)</span><br></pre></td></tr></table></figure>

<p>将信息保存到meta.csv文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Saved Meta data&quot;</span>)</span><br><span class="line">self.meta.to_csv(self.meta_path+<span class="string">&#x27;meta_info.csv&#x27;</span>,index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/04/11/blender%E5%85%A5%E9%97%A8%E4%B8%80%EF%BC%9A%E7%95%8C%E9%9D%A2UI%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/04/11/blender%E5%85%A5%E9%97%A8%E4%B8%80%EF%BC%9A%E7%95%8C%E9%9D%A2UI%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">blender入门一：界面UI和基本操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-04-11 18:51:12 / Modified: 21:13:47" itemprop="dateCreated datePublished" datetime="2022-04-11T18:51:12+08:00">2022-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>第一节课的成果：</p>
<p><img src="E:\画画\Snipaste_2022-04-10_23-00-06.jpg" alt="Snipaste_2022-04-10_23-00-06"></p>
<h3 id="一、视角调整"><a href="#一、视角调整" class="headerlink" title="一、视角调整"></a>一、视角调整</h3><ul>
<li><p>鼠标中键（滚轮）：旋转画面</p>
</li>
<li><p>shift+中键：移动画面</p>
</li>
<li><p>ctrl+中键：缩放</p>
<ul>
<li>默认上下滑动控制</li>
<li>修改：Edit-&gt;Preference-&gt;Navigation-&gt;Zoom Axis:Vertival改为Horization</li>
</ul>
</li>
<li><p>Alt+中键：吸附到固定角度</p>
</li>
</ul>
<p>建议关掉Auto Perspective</p>
<ul>
<li>右上角gizmo（小装置）点击X/-X/Y/-Y/Z/-Z轴切换视角</li>
<li>数字键5/gizmo最后一个按钮：切换为透视/正投影视角</li>
</ul>
<h3 id="二、选择元素"><a href="#二、选择元素" class="headerlink" title="二、选择元素"></a>二、选择元素</h3><ul>
<li><p>鼠标点击选择元素，按住shift多选</p>
</li>
<li><p>左侧工具栏长按Tweak按钮弹出选择菜单</p>
<ul>
<li><p>box select/B键：用一个box选中多个</p>
</li>
<li><p>circle select:圈选</p>
</li>
<li><p>lasso select:套索</p>
</li>
</ul>
</li>
</ul>
<h3 id="三、修改元素基本属性"><a href="#三、修改元素基本属性" class="headerlink" title="三、修改元素基本属性"></a>三、修改元素基本属性</h3><ul>
<li><p>G键：移动</p>
<ul>
<li>移动过程中按住X键，吸附在X轴移动（YZ同理）</li>
<li>按住中键可以选择吸附方向</li>
<li>alt+G移动清零</li>
</ul>
</li>
<li><p>R键：rotate旋转</p>
<ul>
<li><p>按住ctrl每5度移动一格</p>
</li>
<li><p>按住shift精确移动</p>
</li>
<li><p>alt+R旋转清零</p>
</li>
</ul>
</li>
<li><p>S键：Scale缩放</p>
<ul>
<li>alt+S大小清零</li>
</ul>
</li>
<li><p>右侧工具栏</p>
<ul>
<li><p>Item-&gt;transform：查看、修改移动、旋转和缩放数据</p>
</li>
<li><p>View -&gt;lock to 3D cursor围绕固定点缩放旋转</p>
</li>
</ul>
</li>
</ul>
<h3 id="五、新建模型"><a href="#五、新建模型" class="headerlink" title="五、新建模型"></a>五、新建模型</h3><ul>
<li><p>shift+A键/上方菜单add-&gt;mesh：新建物体</p>
<ul>
<li>改变基础模型属性：展开add菜单</li>
</ul>
</li>
</ul>
<ul>
<li>自动平滑：右侧Object Data Properties-&gt;Normals开启Auto Smooth，右键将Shading Flat修改为Shading Smooth</li>
<li>新建object时保存参数设置，下次使用：Operator Presets -&gt; + </li>
<li>X键：删除物体</li>
</ul>
<h3 id="六、切换透明-不透明模式"><a href="#六、切换透明-不透明模式" class="headerlink" title="六、切换透明/不透明模式"></a>六、切换透明/不透明模式</h3><ul>
<li>Shift+Z键/上方工具栏Viewport Shading：切换透明模式</li>
</ul>
<ul>
<li>toggle x-RAY是否显示重叠</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/02/03/CSS%E6%B5%81%E5%BC%8F%E5%B8%83%E5%B1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/02/03/CSS%E6%B5%81%E5%BC%8F%E5%B8%83%E5%B1%80/" class="post-title-link" itemprop="url">CSS流式布局</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-03 13:04:07" itemprop="dateCreated datePublished" datetime="2022-02-03T13:04:07+08:00">2022-02-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/01/24/%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0%E4%BA%8C-%E4%BA%86%E8%A7%A3CSS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/01/24/%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0%E4%BA%8C-%E4%BA%86%E8%A7%A3CSS/" class="post-title-link" itemprop="url">青训营笔记二-了解CSS0</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-24 14:24:13" itemprop="dateCreated datePublished" datetime="2022-01-24T14:24:13+08:00">2022-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-30 22:34:09" itemprop="dateModified" datetime="2022-01-30T22:34:09+08:00">2022-01-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、CSS概述"><a href="#一、CSS概述" class="headerlink" title="一、CSS概述"></a>一、CSS概述</h2><h3 id="1-CSS是什么"><a href="#1-CSS是什么" class="headerlink" title="1. CSS是什么"></a>1. CSS是什么</h3><p>Cascading Style Sheets</p>
<ul>
<li><p>用来定义页面元素的样式</p>
<ul>
<li><p>设置字体和颜色</p>
</li>
<li><p>设置位置和大小</p>
</li>
<li><p>添加动画效果</p>
</li>
</ul>
</li>
</ul>
<h3 id="2-组成"><a href="#2-组成" class="headerlink" title="2. 组成"></a>2. 组成</h3><ol>
<li>选择器Selector：选中页面中的元素</li>
<li>声明Declaration</li>
</ol>
<ul>
<li>属性Property</li>
<li>属性值Value</li>
</ul>
<h3 id="3-在页面中使用CSS"><a href="#3-在页面中使用CSS" class="headerlink" title="3. 在页面中使用CSS"></a>3. 在页面中使用CSS</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 外链 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/style.css&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 嵌入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">li</span> &#123;<span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">list-style</span>: none;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">p</span> &#123;<span class="attribute">margin</span>: lem <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 内联 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin: 1em 0&quot;</span>&gt;</span>Example Content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-CSS是如何工作的"><a href="#4-CSS是如何工作的" class="headerlink" title="4. CSS是如何工作的"></a>4. CSS是如何工作的</h3><p>一个基础过程：</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20220117110925287.png" alt="image-20220117110925287"></p>
<h2 id="二、选择器Selector"><a href="#二、选择器Selector" class="headerlink" title="二、选择器Selector"></a>二、选择器Selector</h2><ul>
<li>找出页面中的元素，以便给他们设置样式</li>
<li>使用多种方式选择元素<ul>
<li>按照标签名、类名或id</li>
<li>按照属性</li>
<li>按照DOM树中的位置</li>
</ul>
</li>
</ul>
<h3 id="1-通配选择器"><a href="#1-通配选择器" class="headerlink" title="1. 通配选择器"></a>1. 通配选择器</h3><p>匹配所有标签元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-id选择器"><a href="#2-id选择器" class="headerlink" title="2. id选择器"></a>2. id选择器</h3><p>元素的id属性的值是唯一的</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#logo</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">200</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-类选择器"><a href="#3-类选择器" class="headerlink" title="3. 类选择器"></a>3. 类选择器</h3><p>选择同一类型的元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.done</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: gray;</span><br><span class="line">	<span class="attribute">text-align</span>: line-through;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-属性选择器"><a href="#4-属性选择器" class="headerlink" title="4. 属性选择器"></a>4. 属性选择器</h3><p>选择具有这个属性的元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;zhao&quot;</span> <span class="attr">disabled</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-attr">[disabled]</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background</span>: <span class="number">#eee</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#999</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>选择属性是某个具体值的元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;password&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: red;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-匹配"><a href="#5-匹配" class="headerlink" title="5. 匹配"></a>5. 匹配</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*以“#”开头*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">&quot;#&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 以“.jpg”结尾 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href$=<span class="string">&quot;.jpg&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: deepskyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、伪类（pseudo-classes）"><a href="#三、伪类（pseudo-classes）" class="headerlink" title="三、伪类（pseudo-classes）"></a>三、伪类（pseudo-classes）</h2><ul>
<li>不基于标签和属性定位元素</li>
<li>几种伪类<ul>
<li>状态伪类</li>
<li>结构性伪类</li>
</ul>
</li>
</ul>
<h3 id="1-状态性"><a href="#1-状态性" class="headerlink" title="1. 状态性"></a>1. 状态性</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com&quot;</span>&gt;</span></span><br><span class="line">    example.com</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">    用户名：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="comment">/* 默认 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 已访问 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: gray;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 鼠标停留 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>:orange;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 链接鼠标按下时 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 鼠标按下时 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">outline</span>: <span class="number">2px</span> solid orange;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-结构伪类"><a href="#2-结构伪类" class="headerlink" title="2. 结构伪类"></a>2. 结构伪类</h3><p>根据元素出现在父级节点的相对位置选择</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">list-style-position</span>: inside;</span></span><br><span class="line"><span class="css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span></span><br><span class="line"><span class="css">    	<span class="attribute">color</span>: coral;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span></span><br><span class="line"><span class="css">    	<span class="attribute">border-bottom</span>: none;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20220117143601170.png" alt="image-20220117143601170"></p>
<h2 id="四、组合"><a href="#四、组合" class="headerlink" title="四、组合"></a>四、组合</h2><h3 id="1-直接组合"><a href="#1-直接组合" class="headerlink" title="1. 直接组合"></a>1. 直接组合</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">    用户名：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span> <span class="attr">value</span>=<span class="string">&quot;aa&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span><br><span class="line">    最少三个字符</span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.error</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">input</span><span class="selector-class">.error</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">border-color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>名称</th>
<th>语法</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>直接组合</td>
<td>AB</td>
<td>同时满足A和B</td>
<td>input:focus</td>
</tr>
<tr>
<td>后代组合</td>
<td>A B</td>
<td>选中B，如果它是A的子孙</td>
<td>nav a</td>
</tr>
<tr>
<td>亲子组合</td>
<td>A&gt;B</td>
<td>选中B，如果它是A的子元素</td>
<td>section&gt;p</td>
</tr>
<tr>
<td>兄弟选择器</td>
<td>A~B</td>
<td>选中B，如果它在A后且和A同级</td>
<td>h2~p</td>
</tr>
<tr>
<td>相邻选择器</td>
<td>A+B</td>
<td>选中B，如果它紧跟在A后面</td>
<td>h2+p</td>
</tr>
</tbody></table>
<h3 id="2-选择器组"><a href="#2-选择器组" class="headerlink" title="2. 选择器组"></a>2. 选择器组</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>, <span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span>, <span class="selector-tag">ul</span>, <span class="selector-tag">ol</span>, <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[type=<span class="string">&quot;checkbox&quot;</span>]</span>, <span class="selector-attr">[type=<span class="string">&quot;radio&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="五、颜色-RGB"><a href="#五、颜色-RGB" class="headerlink" title="五、颜色-RGB"></a>五、颜色-RGB</h2><ul>
<li><p>rgb(0, 0, 0)</p>
</li>
<li><p>#000000</p>
</li>
<li><p>HSL</p>
<ul>
<li><p>Hue 色相是颜色的基本属性，如红色、黄色等；取值是0~360</p>
</li>
<li><p>Saturation 饱和度是色彩的鲜艳程度；取值范围0-100%</p>
</li>
<li><p>Lightness 亮度是颜色的明亮程度；取值范围是0-100%</p>
</li>
</ul>
</li>
</ul>
<h3 id="1-颜色关键字"><a href="#1-颜色关键字" class="headerlink" title="1. 颜色关键字"></a>1. 颜色关键字</h3><p>navy olive…</p>
<h3 id="2-alpha-透明度"><a href="#2-alpha-透明度" class="headerlink" title="2. alpha 透明度"></a>2. alpha 透明度</h3><ul>
<li><p>#ff0000<strong>bd</strong></p>
</li>
<li><p>rgba(255, 0, 0, <strong>0.74</strong>)</p>
</li>
<li><p>hsla(0, 100%, 50%, <strong>0.74</strong>)</p>
</li>
</ul>
<h2 id="六、文字属性"><a href="#六、文字属性" class="headerlink" title="六、文字属性"></a>六、文字属性</h2><p>属性值为一系列字体，因为不同设备能显示的字体不同。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Lorem ipsum dolor sit<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ratione sit optio fugit distinctio reprehenderit nisi debitis, at similique ex architecto inventore earum deleniti. Ea velit voluptatem saepe, similique quam nisi?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-family</span>: Optima, Georgia, <span class="string">&#x27;Times New Roman&#x27;</span>, Times, serif;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-通用字体族font-family"><a href="#1-通用字体族font-family" class="headerlink" title="1. 通用字体族font-family"></a>1. 通用字体族font-family</h3><ul>
<li><p>Serif：衬线体 在笔画末端有装饰</p>
</li>
<li><p>Sans-Serif：无衬线体</p>
</li>
<li><p>Cursive：手写体</p>
</li>
<li><p>Fantasy</p>
</li>
<li><p>Monospace：主要针对英文，每个字符的宽度一致，如编程常用的字体</p>
</li>
</ul>
<h3 id="2-font-family使用建议"><a href="#2-font-family使用建议" class="headerlink" title="2. font-family使用建议"></a>2. font-family使用建议</h3><ul>
<li>字体列表最后写上<strong>通用</strong>字体族</li>
<li>英文字体放在中文字体前面（中文字体一般包含英文字符，反之不然）</li>
</ul>
<p><em>在开发者工具中的计算样式里可以查看实际渲染的字体</em></p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20220119001300375.png" alt="image-20220119001300375"></p>
<h3 id="3-使用Web-Fonts"><a href="#3-使用Web-Fonts" class="headerlink" title="3. 使用Web Fonts"></a>3. 使用Web Fonts</h3><p><code>@font-face</code>引入自定义字体</p>
<p>由于中文字体文件一般较大，实际开发中一般对字体文件进行裁剪，使用只包含页面中出现的文字的子包。</p>
<h3 id="4-font-size"><a href="#4-font-size" class="headerlink" title="4. font-size"></a>4. font-size</h3><ul>
<li>关键字<ul>
<li>small、medium、large</li>
</ul>
</li>
<li>长度<ul>
<li>px、em</li>
</ul>
</li>
<li>百分数<ul>
<li>相对父元素字体的大小</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>A web font example<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;note&quot;</span>&gt;</span>Notes: Web fonts...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>With this in mind, let&#x27;s build...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">section</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">section</span> <span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">section</span> <span class="selector-class">.note</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: orange;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的代码中，h1的实际大小是40px，note的实际大小是16px</p>
<h3 id="5-font-style"><a href="#5-font-style" class="headerlink" title="5. font-style"></a>5. <code>font-style</code></h3><p>可以设置粗体、斜体（italic）等</p>
<h3 id="6-font-weight字重-字体粗细"><a href="#6-font-weight字重-字体粗细" class="headerlink" title="6. font-weight字重 字体粗细"></a>6. <code>font-weight</code>字重 字体粗细</h3><p>常用的两个设置：400-normal，700-bold</p>
<p>依赖本地安装字体实现</p>
<h3 id="7-line-height"><a href="#7-line-height" class="headerlink" title="7.line-height"></a>7.<code>line-height</code></h3><p>每行文字间距</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Font families recap<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore sed perspiciatis sequi quaerat officia, esse explicabo ipsum? Natus labore quis incidunt est blanditiis quidem corrupti, assumenda hic mollitia saepe at!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">line-height</span>: <span class="number">45px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>p元素的行高是1.6*20px</p>
<h3 id="8-同时设置多个属性"><a href="#8-同时设置多个属性" class="headerlink" title="8. 同时设置多个属性"></a>8. 同时设置多个属性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">font: style weight size/height family</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font</span>: bold <span class="number">14px</span>/<span class="number">1.7</span> Helvetica, sans-serif;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font</span>: <span class="number">14px</span> serif;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-text-align文字对齐方式"><a href="#9-text-align文字对齐方式" class="headerlink" title="9. text-align文字对齐方式"></a>9. <code>text-align</code>文字对齐方式</h3><ul>
<li>left</li>
<li>center</li>
<li>right</li>
<li>justify两端对齐 对一段文字的最后一行不生效</li>
</ul>
<h3 id="10-spacing"><a href="#10-spacing" class="headerlink" title="10. spacing"></a>10. spacing</h3><p><code>letter-spacing</code>：字母间距</p>
<p><code>word-spacing</code>：单词间距</p>
<p><code>text-indent</code>：首行缩进</p>
<h3 id="11-text-decoration文本修饰"><a href="#11-text-decoration文本修饰" class="headerlink" title="11. text-decoration文本修饰"></a>11. <code>text-decoration</code>文本修饰</h3><ul>
<li>none</li>
<li>underline</li>
<li>line-through</li>
<li>overline</li>
</ul>
<h3 id="12-white-space空白符"><a href="#12-white-space空白符" class="headerlink" title="12. white-space空白符"></a>12. white-space空白符</h3><p><em>代码中的回车都会保留</em></p>
<ul>
<li>normal 默认多个连续空白符会合并，自动换行</li>
<li>nowrap合并空格，不自动换行</li>
<li>pre保留空格，不自动换行</li>
<li>pre-wrap保留空格，自动换行</li>
<li>pre-line合并空格，自动换行</li>
</ul>
<h1 id="七、调试CSS"><a href="#七、调试CSS" class="headerlink" title="七、调试CSS"></a>七、调试CSS</h1><p>快捷键：</p>
<p>Ctrl+Shift+I（Windows）</p>
<p>Cmd+Opt+I（Mac）</p>
<h1 id="课后提问"><a href="#课后提问" class="headerlink" title="课后提问"></a>课后提问</h1><p>优雅降级和渐进增强</p>
<p>css in js：css的问题：变量全局生效</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/01/21/d3-js%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/01/21/d3-js%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">d3.js入门学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-21 14:30:55" itemprop="dateCreated datePublished" datetime="2022-01-21T14:30:55+08:00">2022-01-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-23 17:01:22" itemprop="dateModified" datetime="2022-01-23T17:01:22+08:00">2022-01-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p><code>D3js</code> 是一个可以基于数据来操作文档的 <code>JavaScript</code> 库。可以帮助你使用 <code>HTML</code>, <code>CSS</code>, <code>SVG</code> 以及 <code>Canvas</code> 来展示数据。<code>D3</code> 遵循现有的 <code>Web</code> 标准，可以不需要其他任何框架独立运行在现代浏览器中，它结合强大的可视化组件来驱动 <code>DOM</code> 操作。</p>
</blockquote>
<h3 id="selections选择集"><a href="#selections选择集" class="headerlink" title="selections选择集"></a>selections选择集</h3><ul>
<li><code>select</code>：选择<code>html</code>节点</li>
</ul>
<h3 id="动态属性"><a href="#动态属性" class="headerlink" title="动态属性"></a>动态属性</h3><ul>
<li>```javascript<br>d3.selectAll(“div”).data(dataset).enter().append(“div”)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">填充数组元素，补充缺少的对应节点</span><br><span class="line"></span><br><span class="line">- `attr`：添加类名或者属性</span><br><span class="line"></span><br><span class="line">### 直方图</span><br><span class="line"></span><br><span class="line">#### 练习1：**为集合中的每个数据点创建一个数据条**</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];</span><br><span class="line"></span><br><span class="line">    const w = 500;</span><br><span class="line">    const h = 100;</span><br><span class="line"></span><br><span class="line">    const svg = d3.select(&quot;body&quot;)</span><br><span class="line">                  .append(&quot;svg&quot;)</span><br><span class="line">                  .attr(&quot;width&quot;, w)</span><br><span class="line">                  .attr(&quot;height&quot;, h);</span><br><span class="line"></span><br><span class="line">    svg.selectAll(&quot;rect&quot;)</span><br><span class="line">       // 在这行下面添加代码</span><br><span class="line">      .data(dataset)</span><br><span class="line">      .enter()</span><br><span class="line">      .append(&quot;rect&quot;)</span><br><span class="line">       // 在这行上面添加代码</span><br><span class="line">       .attr(&quot;x&quot;, 0)</span><br><span class="line">       .attr(&quot;y&quot;, 0)</span><br><span class="line">       .attr(&quot;width&quot;, 25)</span><br><span class="line">       .attr(&quot;height&quot;, 100);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>在 <code>SVG</code> 中，坐标轴的原点在左上角。 <code>x</code> 坐标为 0 将图形放在<code> SVG</code> 区域的左边缘， <code>y</code> 坐标为 0 将图形放在 <code>SVG</code> 区域的上边缘。 <code>x</code> 值增大矩形将向右移动， <code>y</code> 值增大矩形将向下移动。</p>
<h4 id="练习2：反转-SVG-元素"><a href="#练习2：反转-SVG-元素" class="headerlink" title="练习2：反转 SVG 元素"></a>练习2：<strong>反转 SVG 元素</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];</span><br><span class="line"></span><br><span class="line">    const w = 500;</span><br><span class="line">    const h = 100;</span><br><span class="line"></span><br><span class="line">    const svg = d3.select(&quot;body&quot;)</span><br><span class="line">                  .append(&quot;svg&quot;)</span><br><span class="line">                  .attr(&quot;width&quot;, w)</span><br><span class="line">                  .attr(&quot;height&quot;, h);</span><br><span class="line"></span><br><span class="line">    svg.selectAll(&quot;rect&quot;)</span><br><span class="line">       .data(dataset)</span><br><span class="line">       .enter()</span><br><span class="line">       .append(&quot;rect&quot;)</span><br><span class="line">       .attr(&quot;x&quot;, (d, i) =&gt; i * 30)</span><br><span class="line">       .attr(&quot;y&quot;, (d, i) =&gt; h - d * 3)</span><br><span class="line">       .attr(&quot;width&quot;, 25)</span><br><span class="line">       .attr(&quot;height&quot;, (d, i) =&gt; 3 * d);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h4 id="练习3-给-D3-元素添加悬停效果"><a href="#练习3-给-D3-元素添加悬停效果" class="headerlink" title="练习3. 给 D3 元素添加悬停效果"></a>练习3. <strong>给 <code>D3</code> 元素添加悬停效果</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.bar</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">    fill: brown;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> dataset = [<span class="number">12</span>, <span class="number">31</span>, <span class="number">22</span>, <span class="number">17</span>, <span class="number">25</span>, <span class="number">18</span>, <span class="number">29</span>, <span class="number">14</span>, <span class="number">9</span>];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> h = <span class="number">100</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - <span class="number">3</span> * d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;width&quot;</span>, <span class="number">25</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;height&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> <span class="number">3</span> * d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;fill&quot;</span>, <span class="string">&quot;navy&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// 在这行下面添加代码</span></span></span><br><span class="line"><span class="javascript">        .attr(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;bar&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// 在这行上面添加代码</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .text(<span class="function">(<span class="params">d</span>) =&gt;</span> d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - (<span class="number">3</span> * d) - <span class="number">3</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="练习4-给-D3-元素添加工具提示"><a href="#练习4-给-D3-元素添加工具提示" class="headerlink" title="练习4.给 D3 元素添加工具提示"></a>练习4.<strong>给 <code>D3 </code>元素添加工具提示</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.bar</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">    fill: brown;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> dataset = [<span class="number">12</span>, <span class="number">31</span>, <span class="number">22</span>, <span class="number">17</span>, <span class="number">25</span>, <span class="number">18</span>, <span class="number">29</span>, <span class="number">14</span>, <span class="number">9</span>];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> h = <span class="number">100</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;rect&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - <span class="number">3</span> * d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;width&quot;</span>, <span class="number">25</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;height&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> d * <span class="number">3</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;fill&quot;</span>, <span class="string">&quot;navy&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;bar&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// 在这行下面添加代码</span></span></span><br><span class="line"><span class="javascript">        .append(<span class="string">&quot;title&quot;</span>)</span></span><br><span class="line"><span class="javascript">        .text(<span class="function"><span class="params">d</span> =&gt;</span> d)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">       <span class="comment">// 在这行上面添加代码</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;text&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .text(<span class="function">(<span class="params">d</span>) =&gt;</span> d)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> i * <span class="number">30</span>)</span></span><br><span class="line"><span class="javascript">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d, i</span>) =&gt;</span> h - (d * <span class="number">3</span> + <span class="number">3</span>))</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h3><h4 id="练习1-给-Circle-元素添加属性"><a href="#练习1-给-Circle-元素添加属性" class="headerlink" title="练习1.给 Circle 元素添加属性"></a>练习1.<strong>给 Circle 元素添加属性</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> dataset = [</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">34</span>,    <span class="number">78</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">109</span>,   <span class="number">280</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">310</span>,   <span class="number">120</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">79</span>,    <span class="number">411</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">420</span>,   <span class="number">220</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">233</span>,   <span class="number">145</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">333</span>,   <span class="number">96</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">222</span>,   <span class="number">333</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">78</span>,    <span class="number">320</span> ],</span></span><br><span class="line"><span class="javascript">                  [ <span class="number">21</span>,    <span class="number">123</span> ]</span></span><br><span class="line"><span class="javascript">                ];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> h = <span class="number">500</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span><br><span class="line"><span class="javascript">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    svg.selectAll(<span class="string">&quot;circle&quot;</span>)</span></span><br><span class="line"><span class="javascript">       .data(dataset)</span></span><br><span class="line"><span class="javascript">       .enter()</span></span><br><span class="line"><span class="javascript">       .append(<span class="string">&quot;circle&quot;</span>)</span></span><br><span class="line"><span class="javascript">       <span class="comment">// 在这行下面添加代码</span></span></span><br><span class="line"><span class="javascript">      .attr(<span class="string">&quot;cx&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> d[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript">      .attr(<span class="string">&quot;cy&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> w - d[<span class="number">1</span>])</span></span><br><span class="line"><span class="javascript">      .attr(<span class="string">&quot;r&quot;</span>, <span class="number">5</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">       <span class="comment">// 在这行上面添加代码</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="按比例设置域和范围"><a href="#按比例设置域和范围" class="headerlink" title="按比例设置域和范围"></a><strong>按比例设置域和范围</strong></h4><p>缩放的输入信息：<em>域</em><code>domain</code></p>
<p>输出信息：<em>范围</em><code>range</code></p>
<p>查找数据中最大值：<code>max</code></p>
<h4 id="练习2：使用动态比例"><a href="#练习2：使用动态比例" class="headerlink" title="练习2：使用动态比例"></a>练习2：<strong>使用动态比例</strong></h4><p><strong>注意：</strong>记得保持绘图在右上角。 当你为 y 坐标设置 range 时，大的值（height 减去 padding）是第一个参数，小的值是第二个参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> dataset = [</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">34</span>,    <span class="number">78</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">109</span>,   <span class="number">280</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">310</span>,   <span class="number">120</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">79</span>,    <span class="number">411</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">420</span>,   <span class="number">220</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">233</span>,   <span class="number">145</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">333</span>,   <span class="number">96</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">222</span>,   <span class="number">333</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">78</span>,    <span class="number">320</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">21</span>,    <span class="number">123</span> ]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                ];</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> h = <span class="number">500</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 画布边线和图表之间的 padding</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> padding = <span class="number">30</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 创建 x 和 y 轴</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> xScale = d3.scaleLinear()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    .domain([<span class="number">0</span>, d3.max(dataset, <span class="function">(<span class="params">d</span>) =&gt;</span> d[<span class="number">0</span>])])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    .range([padding, w - padding]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 在这行下面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> yScale = d3.scaleLinear().domain([<span class="number">0</span>, d3.max(dataset, <span class="function"><span class="params">d</span> =&gt;</span> d[<span class="number">1</span>])])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    .range([h - padding, padding]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 在这行上面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> output = yScale(<span class="number">411</span>); <span class="comment">// 返回 30</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    d3.select(<span class="string">&quot;body&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      .append(<span class="string">&quot;h2&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      .text(output)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h4 id="练习3：使用预定义的比例放置元素"><a href="#练习3：使用预定义的比例放置元素" class="headerlink" title="练习3：使用预定义的比例放置元素"></a>练习3：<strong>使用预定义的比例放置元素</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> dataset = [</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">34</span>,     <span class="number">78</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">109</span>,   <span class="number">280</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">310</span>,   <span class="number">120</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">79</span>,   <span class="number">411</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">420</span>,   <span class="number">220</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">233</span>,   <span class="number">145</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">333</span>,   <span class="number">96</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">222</span>,    <span class="number">333</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">78</span>,    <span class="number">320</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">21</span>,   <span class="number">123</span> ]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                ];</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> h = <span class="number">500</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> padding = <span class="number">60</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> xScale = d3.scaleLinear()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .domain([<span class="number">0</span>, d3.max(dataset, <span class="function">(<span class="params">d</span>) =&gt;</span> d[<span class="number">0</span>])])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .range([padding, w - padding]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> yScale = d3.scaleLinear()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .domain([<span class="number">0</span>, d3.max(dataset, <span class="function">(<span class="params">d</span>) =&gt;</span> d[<span class="number">1</span>])])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .range([h - padding, padding]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    svg.selectAll(<span class="string">&quot;circle&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .data(dataset)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .enter()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .append(<span class="string">&quot;circle&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       <span class="comment">// 在这行下面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        .attr(<span class="string">&quot;cx&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> xScale(d[<span class="number">0</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        .attr(<span class="string">&quot;cy&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> yScale(d[<span class="number">1</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        .attr(<span class="string">&quot;r&quot;</span>, <span class="number">5</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">       <span class="comment">// 在这行上面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    svg.selectAll(<span class="string">&quot;text&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .data(dataset)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .enter()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .append(<span class="string">&quot;text&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .text(<span class="function">(<span class="params">d</span>) =&gt;</span>  (d[<span class="number">0</span>] + <span class="string">&quot;, &quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> + d[<span class="number">1</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       <span class="comment">// 在这行下面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  .attr(<span class="string">&quot;x&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> xScale(d[<span class="number">0</span>] + <span class="number">10</span>))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  .attr(<span class="string">&quot;y&quot;</span>, <span class="function"><span class="params">d</span> =&gt;</span> yScale(d[<span class="number">1</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">       <span class="comment">// 在这行上面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h4 id="练习4：添加坐标轴到视图中"><a href="#练习4：添加坐标轴到视图中" class="headerlink" title="练习4：添加坐标轴到视图中"></a>练习4：<strong>添加坐标轴到视图中</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> dataset = [</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">34</span>,     <span class="number">78</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">109</span>,   <span class="number">280</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">310</span>,   <span class="number">120</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">79</span>,   <span class="number">411</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">420</span>,   <span class="number">220</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">233</span>,   <span class="number">145</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">333</span>,   <span class="number">96</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">222</span>,    <span class="number">333</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">78</span>,    <span class="number">320</span> ],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  [ <span class="number">21</span>,   <span class="number">123</span> ]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                ];</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> w = <span class="number">500</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> h = <span class="number">500</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> padding = <span class="number">60</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> xScale = d3.scaleLinear()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .domain([<span class="number">0</span>, d3.max(dataset, <span class="function">(<span class="params">d</span>) =&gt;</span> d[<span class="number">0</span>])])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .range([padding, w - padding]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> yScale = d3.scaleLinear()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .domain([<span class="number">0</span>, d3.max(dataset, <span class="function">(<span class="params">d</span>) =&gt;</span> d[<span class="number">1</span>])])</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     .range([h - padding, padding]);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> svg = d3.select(<span class="string">&quot;body&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  .append(<span class="string">&quot;svg&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  .attr(<span class="string">&quot;width&quot;</span>, w)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                  .attr(<span class="string">&quot;height&quot;</span>, h);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    svg.selectAll(<span class="string">&quot;circle&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .data(dataset)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .enter()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .append(<span class="string">&quot;circle&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .attr(<span class="string">&quot;cx&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> xScale(d[<span class="number">0</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .attr(<span class="string">&quot;cy&quot;</span>,<span class="function">(<span class="params">d</span>) =&gt;</span> yScale(d[<span class="number">1</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .attr(<span class="string">&quot;r&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> <span class="number">5</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    svg.selectAll(<span class="string">&quot;text&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .data(dataset)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .enter()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .append(<span class="string">&quot;text&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .text(<span class="function">(<span class="params">d</span>) =&gt;</span>  (d[<span class="number">0</span>] + <span class="string">&quot;,&quot;</span> + d[<span class="number">1</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .attr(<span class="string">&quot;x&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> xScale(d[<span class="number">0</span>] + <span class="number">10</span>))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .attr(<span class="string">&quot;y&quot;</span>, <span class="function">(<span class="params">d</span>) =&gt;</span> yScale(d[<span class="number">1</span>]))</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> xAxis = d3.axisBottom(xScale);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 在这行下面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> yAxis = d3.axisLeft(yScale);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 在这行上面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    svg.append(<span class="string">&quot;g&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .attr(<span class="string">&quot;transform&quot;</span>, <span class="string">&quot;translate(0,&quot;</span> + (h - padding) + <span class="string">&quot;)&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       .call(xAxis);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 在这行下面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   svg.append(<span class="string">&quot;g&quot;</span>).attr(<span class="string">&quot;transform&quot;</span>, <span class="string">&quot;translate(&quot;</span> + padding + <span class="string">&quot;, 0)&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   .call(yAxis)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 在这行上面添加代码</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/01/21/%E4%B8%A4%E9%81%93%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BB%83%E4%B9%A0%E9%A2%98%EF%BC%9A%E8%BD%AC%E7%A7%BB%E5%9C%B0%E5%9D%80%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84jmp%E6%8C%87%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/01/21/%E4%B8%A4%E9%81%93%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BB%83%E4%B9%A0%E9%A2%98%EF%BC%9A%E8%BD%AC%E7%A7%BB%E5%9C%B0%E5%9D%80%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84jmp%E6%8C%87%E4%BB%A4/" class="post-title-link" itemprop="url">两道汇编语言练习题:转移地址在内存中的jmp指令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-01-21 12:18:53 / Modified: 21:09:24" itemprop="dateCreated datePublished" datetime="2022-01-21T12:18:53+08:00">2022-01-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>断断续续地汇编语言学到一半了，这次做课后作业可把我难坏了，赶紧记录一下。</p>
<h4 id="检测点9-1"><a href="#检测点9-1" class="headerlink" title="检测点9.1"></a>检测点9.1</h4><h5 id="（1）程序如下。"><a href="#（1）程序如下。" class="headerlink" title="（1）程序如下。"></a>（1）程序如下。</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line">data segment</span><br><span class="line">    ?</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    start: mov ax, data</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov bx,0</span><br><span class="line">    jmp word ptr [bx+1]</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

<p><em>若要使程序中的<code>jmp</code>指令执行后，<code>CS:IP</code>指向程序的第一条指令，在data段中应该定义哪些数据？</em></p>
<h5 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h5><p>首先把<code>jmp word ptr</code>的功能定义读了好几遍：从内存单元地址出开始存放着一个字，是转移的目的偏移地址。</p>
<p>也就是说<code>[bx+1]</code>指明的<strong>内存地址</strong>存放着目的偏移地址的<strong>字</strong>。</p>
<p>而<code>[bx]</code>表示段地址存放在<code>ds</code>，偏移地址存放在<code>bx</code>中的内存单元，在本题中就是<code>ax:0001H</code>，也就是data段中偏移地址为1的内存单元。</p>
<p>CS不变，所以我们要填入的数据应使<strong>data段中偏移地址为1的内存单元</strong>（字）存放的内容为0，这样才能跳转到code的第一条语句，所以答案应该是<code>db 2 dup(0)</code></p>
<h5 id="（2）程序如下"><a href="#（2）程序如下" class="headerlink" title="（2）程序如下"></a>（2）程序如下</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    dd 12345678h</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    start: mov ax,data</span><br><span class="line">           mov ds,ax</span><br><span class="line">           mov bx,0</span><br><span class="line">           mov [bx],__</span><br><span class="line">           mov [bx+2],__</span><br><span class="line">           jmp sword ptr ds:[0]</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>

<p><em>补全程序，使<code>jmp</code>指令执行后，<code>CS:IP</code>指向程序的第一条指令</em></p>
<h5 id="思路：-1"><a href="#思路：-1" class="headerlink" title="思路："></a>思路：</h5><p>这两道题思路差不多，就是实现细节上有点区别。</p>
<p>data段中定义了双字型数据，占内存中的2个字，4个字节。<code>jmp sword ptr</code>的功能是从内存单元地址处开始存放着两个字，高地址处的字是转移的目的段地址，低地址处事转移的目的偏移地址。</p>
<p>这段代码中，<code>[bx]</code>指明的内存内存地址应该是偏移地址（0），<code>[bx+2]</code>是段地址（cs）。我们的目的是使data段中定义的内容是<code>cs:0</code>。</p>
<p>明确了这个思路之后还是踩了两个小坑，一开始直接填了0，报错了，这是因为数据不能直接放入内存单元，应该通过寄存器传送；这也就是上一行<code>mov bx,0</code>的作用，填入<code>mov[bx],bx</code>正好实现把0传送到<code>ds:0</code>。这是偏移地址。</p>
<p>第二处补上<code>mov[bx+2],cs</code>就可以了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2022/01/18/%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0%E4%B8%80-%E5%89%8D%E7%AB%AF%E4%B8%8EHTML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2022/01/18/%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0%E4%B8%80-%E5%89%8D%E7%AB%AF%E4%B8%8EHTML/" class="post-title-link" itemprop="url">青训营笔记一 前端与HTML</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-01-18 17:37:28 / Modified: 17:38:08" itemprop="dateCreated datePublished" datetime="2022-01-18T17:37:28+08:00">2022-01-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本节课老师梳理了HTML的相关概念，同时学了一些不常用的标签和属性。</p>
<h2 id="一、前端概述"><a href="#一、前端概述" class="headerlink" title="一、前端概述"></a>一、前端概述</h2><h3 id="1-技术栈"><a href="#1-技术栈" class="headerlink" title="1. 技术栈"></a>1. 技术栈</h3><ul>
<li><p>js</p>
</li>
<li><p>css</p>
</li>
<li><p>html</p>
</li>
</ul>
<h3 id="2-前端应该关注哪些方面？"><a href="#2-前端应该关注哪些方面？" class="headerlink" title="2. 前端应该关注哪些方面？"></a>2. 前端应该关注哪些方面？</h3><p>图形界面下的人机交互</p>
<p>功能 美观 无障碍 安全 性能 兼容性 体验</p>
<h3 id="3-前端的边界"><a href="#3-前端的边界" class="headerlink" title="3. 前端的边界"></a>3. 前端的边界</h3><ul>
<li><p><code>node</code> - 服务器端应用</p>
</li>
<li><p><code>Electron</code>/<code>React Native</code> - 跨平台桌面应用</p>
</li>
<li><p><code>WebRTC</code>（Web Real-Time Communication） - P2P在线传输，多人会议</p>
</li>
<li><p>WebGL（Web Graphics Library） - 3D游戏</p>
</li>
<li><p>WebAssembly - 可以使用非 JavaScript 编程语言编写代码并且能在浏览器上运行</p>
</li>
</ul>
<h3 id="4-开发环境"><a href="#4-开发环境" class="headerlink" title="4.开发环境"></a>4.开发环境</h3><p>浏览器+编辑器</p>
<h2 id="二、HTML概述"><a href="#二、HTML概述" class="headerlink" title="二、HTML概述"></a>二、HTML概述</h2><h3 id="1-HTML是什么？"><a href="#1-HTML是什么？" class="headerlink" title="1. HTML是什么？"></a>1. HTML是什么？</h3><ul>
<li><p>HyperText（图片、链接、表格等） </p>
</li>
<li><p>Markup（ 标记语言，<code>&lt;img src=&quot;photo.jpg&quot; /&gt;</code>，<code>src</code>是属性名，等号右边是属性值）</p>
</li>
<li><p>Language</p>
</li>
</ul>
<p>一个完整的例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;!DOCTYPE html&gt;</code>：对 HTML文件来说，浏览器使用文件开头的 DOCTYPE 来决定用<strong>怪异模式</strong>处理或<strong>标准模式</strong>处理。</p>
<p><code>html</code>：文档根标签，所有其他元素必须是此元素的后代。</p>
<p><code>head</code>：页面元数据，不需要直接呈现给用户</p>
<p><code>body</code>：需要呈现给用户的内容</p>
<h3 id="2-DOM树"><a href="#2-DOM树" class="headerlink" title="2. DOM树"></a>2. DOM树</h3><p>浏览器对html文件进行解析，得到DOM树，DOM节点</p>
<h2 id="三、HTML语法"><a href="#三、HTML语法" class="headerlink" title="三、HTML语法"></a>三、HTML语法</h2><ul>
<li>标签和属性不区分大小写，推荐<strong>小写</strong></li>
<li>空标签可以不闭合，比如input、meta</li>
<li>属性值推荐用双引号包裹</li>
<li>某些属性值可以省略，比如 required、readonly</li>
</ul>
<h3 id="1-标题h1-h6"><a href="#1-标题h1-h6" class="headerlink" title="1.标题h1~h6"></a>1.标题h1~h6</h3><h3 id="2-列表"><a href="#2-列表" class="headerlink" title="2.列表"></a>2.列表</h3><ul>
<li>有序列表<code>&lt;ol&gt;</code>：ordered list</li>
<li>无序列表<code>&lt;ul&gt;</code>：unordered list</li>
<li>key-value列表<code>&lt;dl&gt;</code>：defination list<ul>
<li><code>&lt;dt&gt;</code>title</li>
<li><code>&lt;dd&gt;</code>description</li>
<li>多对多的关系</li>
</ul>
</li>
</ul>
<h3 id="3-链接anchor"><a href="#3-链接anchor" class="headerlink" title="3.链接anchor"></a>3.链接anchor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;www.aboutmt.top&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>target</code>：该属性指定在何处显示链接的资源。 取值为标签（tab），窗口（window），或框架（iframe）等浏览上下文的名称或其他关键词。</li>
</ul>
<h3 id="4-多媒体：图片和音视频"><a href="#4-多媒体：图片和音视频" class="headerlink" title="4. 多媒体：图片和音视频"></a>4. 多媒体：图片和音视频</h3><p><code>&lt;img/&gt;</code></p>
<ul>
<li><code>alt</code>：定义了图像的备用文本描述。</li>
</ul>
<p><code>&lt;audio /&gt;</code></p>
<p><code>&lt;video /&gt;</code></p>
<ul>
<li><code>controls</code>：默认播放控件</li>
</ul>
<h3 id="5-输入"><a href="#5-输入" class="headerlink" title="5.输入"></a>5.输入</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;range&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">min</span>=<span class="string">&quot;2018-02-10&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span>Hey<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-选择"><a href="#6-选择" class="headerlink" title="6.选择"></a>6.选择</h3><p>多选：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span>🍎<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span>🍌<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>单选：通过name达到互斥关系</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span> /&gt;</span>🍎</span><br><span class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span> /&gt;</span>🍌		<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>下拉菜单：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>🍌<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>🍈<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>自由输入的同时有提示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">list</span>=<span class="string">&quot;fruits&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">&quot;fruits&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>🍎<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>🍌<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>🍈<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-文本类标签"><a href="#7-文本类标签" class="headerlink" title="7.文本类标签"></a>7.文本类标签</h3><h4 id="文字引用"><a href="#文字引用" class="headerlink" title="文字引用"></a>文字引用</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">cite</span>=<span class="string">&quot;http://aboutmt.top&quot;</span>&gt;</span></span><br><span class="line">    长引用，直接引用别人的一段文字，可以换行</span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    短引用，我最喜欢的一本书是<span class="tag">&lt;<span class="name">cite</span>&gt;</span>小王子<span class="tag">&lt;/<span class="name">cite</span>&gt;</span></span><br><span class="line">    引用内容不要包含换行</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    在<span class="tag">&lt;<span class="name">cite</span>&gt;</span>第一章<span class="tag">&lt;/<span class="name">cite</span>&gt;</span>，我们讲过<span class="tag">&lt;<span class="name">q</span>&gt;</span>字符串是</span><br><span class="line">    不可变量。<span class="tag">&lt;/<span class="name">q</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>q</code>和<code>cite</code>区别：</p>
<ul>
<li><p><code>cite</code>表示一个作品的引用，且必须包含作品的标题；</p>
</li>
<li><p><code>q</code>表示一个封闭的并且是短的行内引用的文本。</p>
</li>
</ul>
<h4 id="代码引用："><a href="#代码引用：" class="headerlink" title="代码引用："></a>代码引用：</h4><p>使用等宽字体（编程字体）展示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">code</span>&gt;</span>const<span class="tag">&lt;/<span class="name">code</span>&gt;</span>声明创建一个只读的常量。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line">    	const add = (a, b) =&gt; a + b;</span><br><span class="line">        const multiply = (a, b) =&gt; a * b;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="强调标签"><a href="#强调标签" class="headerlink" title="强调标签"></a>强调标签</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    在投资之前，<span class="tag">&lt;<span class="name">strong</span>&gt;</span>一定要做风险评估<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Cats <span class="tag">&lt;<span class="name">em</span>&gt;</span>are<span class="tag">&lt;/<span class="name">em</span>&gt;</span> cute animals.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>strong</code>强调内容重要</li>
<li><code>em</code>强调语气</li>
</ul>
<h3 id="8-内容划分"><a href="#8-内容划分" class="headerlink" title="8. 内容划分"></a>8. 内容划分</h3><p><code>header</code></p>
<p><code>nav</code></p>
<p><code>main</code></p>
<p><code>article</code></p>
<p><code>aside</code> 广告 热点推荐</p>
<p><code>footer</code> 版权信息 备案</p>
<h2 id="四、语义化是什么"><a href="#四、语义化是什么" class="headerlink" title="四、语义化是什么"></a>四、语义化是什么</h2><ul>
<li><p>HTML中的元素、属性及属性值都拥有某些含义</p>
</li>
<li><p>开发者应该遵循语义来编写HTML</p>
<ul>
<li><p>有序列表用ol；无序列表用ul</p>
</li>
<li><p>lang属性表示内容所使用的语言</p>
</li>
</ul>
</li>
</ul>
<p>有助于chrome自动翻译</p>
<h3 id="1-谁在使用我们写的HTML"><a href="#1-谁在使用我们写的HTML" class="headerlink" title="1. 谁在使用我们写的HTML"></a>1. 谁在使用我们写的HTML</h3><ul>
<li>开发者-修改、维护页面</li>
<li>浏览器-展示页面，比如语言</li>
<li>搜索引擎-提取关键词、排序</li>
<li>屏幕阅读器-给盲人或者不方便的人页面内容 无障碍性</li>
</ul>
<h3 id="2-语义化的好处"><a href="#2-语义化的好处" class="headerlink" title="2. 语义化的好处"></a>2. 语义化的好处</h3><ul>
<li>代码可读性</li>
<li>可维护性</li>
<li>搜索引擎优化</li>
<li>提升无障碍性</li>
</ul>
<h3 id="3-传达内容，而不是样式"><a href="#3-传达内容，而不是样式" class="headerlink" title="3. 传达内容，而不是样式"></a>3. 传达内容，而不是样式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 32px;&quot;</span>&gt;</span></span><br><span class="line">	前端工程师的自我修养（这是一个不好的例子）</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>前端工程师的自我修养（推荐这样写）<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-如何做到语义化？"><a href="#4-如何做到语义化？" class="headerlink" title="4. 如何做到语义化？"></a>4. 如何做到语义化？</h3><ul>
<li>了解每个标签和属性的含义</li>
<li>思考什么标签最适合描述这个内容</li>
<li>不使用可视化工具生成代码</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2021/12/10/%E4%BD%BF%E7%94%A8navicat%E8%BF%9E%E6%8E%A5%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84docker%E4%B8%AD%E7%9A%84mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2021/12/10/%E4%BD%BF%E7%94%A8navicat%E8%BF%9E%E6%8E%A5%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84docker%E4%B8%AD%E7%9A%84mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">使用navicat连接云服务器的docker中的mysql数据库过程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-10 21:34:12" itemprop="dateCreated datePublished" datetime="2021-12-10T21:34:12+08:00">2021-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="第一步：在CentOS中安装docker引擎"><a href="#第一步：在CentOS中安装docker引擎" class="headerlink" title="第一步：在CentOS中安装docker引擎"></a>第一步：在CentOS中安装docker引擎</h2><p>要安装Docker引擎，需要CentOS 7或CentOS 8的维护版本。</p>
<p>查看CentOs版本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat  /etc/redhat-release</span><br></pre></td></tr></table></figure>

<h4 id=""><a href="#" class="headerlink" title=""></a></h4><p><em>使用仓库安装的方法</em>：</p>
<h4 id="设置仓库"><a href="#设置仓库" class="headerlink" title="设置仓库"></a>设置仓库</h4><p>安装<code>yum-utils</code>包（提供了<code>yum-config-manager</code>工具）并启动一个稳定的仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">   --add-repo \</span><br><span class="line">   https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>错误：<code>Invalid configuration value: failovermethod=priority</code></p>
<p>解决方法：将 <code>/etc/yum.repos.d/CentOS-Epel.repo</code> 文件中 <code>failovermethod=priority</code> 注释掉。</p>
<h4 id="安装Docker引擎"><a href="#安装Docker引擎" class="headerlink" title="安装Docker引擎"></a>安装Docker引擎</h4><ol>
<li><p>安装最新版Docker引擎</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li>
<li><p>启动Docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li><p>运行<code>hello-world</code>镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<p>如果可以运行，说明Docker引擎安装成功。</p>
</li>
</ol>
<h2 id="第二步：在Docker中运行mysql容器"><a href="#第二步：在Docker中运行mysql容器" class="headerlink" title="第二步：在Docker中运行mysql容器"></a>第二步：在Docker中运行mysql容器</h2><h4 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h4><ol>
<li><p>启动Docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li><p>拉取镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure></li>
<li><p>运行容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql01 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span><br></pre></td></tr></table></figure></li>
<li><p>查看容器启动情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure></li>
</ol>
<p><em>这个时候用navicat连接mysql，报错错误码为2003，多半是因为没有启动mysql，或者需要设置云服务器开放3306端口</em></p>
<h4 id="容器内登录mysql"><a href="#容器内登录mysql" class="headerlink" title="容器内登录mysql"></a>容器内登录mysql</h4><ol>
<li><p>进入mysql</p>
<p>docker exec -it 容器ID mysql -p</p>
</li>
<li><p>输入mysql密码（123456）</p>
</li>
</ol>
<h2 id="第三步：客户端登录mysql"><a href="#第三步：客户端登录mysql" class="headerlink" title="第三步：客户端登录mysql"></a>第三步：客户端登录mysql</h2><p>打开navicat，输入主机（云服务器IP）、端口（默认3306），用户名（root）连接。如果遇到1251错误，需要修改MySQL用户登录的加密规则：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY MySQL密码;</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY MySQL密码 PASSWORD EXPIRE NEVER;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>

<p><code>ALTER USER &#39;root&#39;@&#39;%&#39;</code>@后面是指定开放的IP，%就是所有IP均可访问</p>
<p>navicat中新建数据库和表，在服务器中可以看到同步更新：</p>
<ol>
<li><p>查看所有数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure></li>
<li><p>查看表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use &lt;新建数据库&gt;;</span><br><span class="line">show tables;</span><br><span class="line">select * from &lt;新建表&gt;;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2021/12/05/docker%E6%8C%87%E4%BB%A4%E6%B1%87%E6%80%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2021/12/05/docker%E6%8C%87%E4%BB%A4%E6%B1%87%E6%80%BB/" class="post-title-link" itemprop="url">docker指令汇总</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-05 00:35:46" itemprop="dateCreated datePublished" datetime="2021-12-05T00:35:46+08:00">2021-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Part1：定位和安装"><a href="#Part1：定位和安装" class="headerlink" title="Part1：定位和安装"></a>Part1：定位和安装</h2><h4 id="运行教程容器"><a href="#运行教程容器" class="headerlink" title="运行教程容器"></a>运行教程容器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 docker/getting-started</span><br></pre></td></tr></table></figure>



<h2 id="Part2：简单的应用"><a href="#Part2：简单的应用" class="headerlink" title="Part2：简单的应用"></a>Part2：简单的应用</h2><h4 id="构建应用容器的镜像"><a href="#构建应用容器的镜像" class="headerlink" title="构建应用容器的镜像"></a>构建应用容器的镜像</h4><ol>
<li><p>创建DockerFile文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line"></span><br><span class="line">FROM node:12-alpine</span><br><span class="line">RUN apk add --no-cache python3 g++ make</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY . .</span><br><span class="line">RUN yarn install --production</span><br><span class="line">CMD [&quot;node&quot;, &quot;src/index.js&quot;]</span><br></pre></td></tr></table></figure></li>
<li><p>构建容器镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="启动应用容器"><a href="#启动应用容器" class="headerlink" title="启动应用容器"></a>启动应用容器</h4><ol>
<li><p>启动容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>在<a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000</a>中查看应用</p>
</li>
</ol>
<h2 id="Part3：更新应用程序"><a href="#Part3：更新应用程序" class="headerlink" title="Part3：更新应用程序"></a>Part3：更新应用程序</h2><h4 id="更新源码"><a href="#更新源码" class="headerlink" title="更新源码"></a>更新源码</h4><ol>
<li><p>修改<code>src/static/js/app.js</code></p>
</li>
<li><p>构建新的镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="删除旧的容器"><a href="#删除旧的容器" class="headerlink" title="删除旧的容器"></a>删除旧的容器</h4><ol>
<li><p>获取容器ID</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure></li>
<li><p>停止旧容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Swap out &lt;the-container-id&gt; with the ID from docker ps</span><br><span class="line">$ docker stop &lt;the-container-id&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>移除旧容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm &lt;the-container-id&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><em>合并停止和移除指令</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f &lt;container-id&gt;</span><br></pre></td></tr></table></figure>



<h3 id="启动新的应用容器"><a href="#启动新的应用容器" class="headerlink" title="启动新的应用容器"></a>启动新的应用容器</h3><ol>
<li><p>启动新容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>刷新浏览器</p>
</li>
</ol>
<h2 id="Part4：应用程序共享"><a href="#Part4：应用程序共享" class="headerlink" title="Part4：应用程序共享"></a>Part4：应用程序共享</h2><h4 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h4><ol>
<li>登录<a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a></li>
<li>点击Create Respository按钮</li>
<li>命名，确保可见性为Public</li>
<li>点击Create按钮</li>
</ol>
<h4 id="推送镜像"><a href="#推送镜像" class="headerlink" title="推送镜像"></a>推送镜像</h4><ol>
<li><p>登录Docker Hub</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u YOUR-USER-NAME</span><br></pre></td></tr></table></figure></li>
<li><p>重命名镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag getting-started YOUR-USER-NAME/getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>推送镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push YOUR-USER-NAME/getting-started</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="在一个新实例上运行镜像"><a href="#在一个新实例上运行镜像" class="headerlink" title="在一个新实例上运行镜像"></a>在一个新实例上运行镜像</h4><ol>
<li><p>打开<a target="_blank" rel="noopener" href="https://labs.play-with-docker.com/">Play with Docker</a></p>
</li>
<li><p>点击登录，选择docker</p>
</li>
<li><p>连接至Docker Hub账号</p>
</li>
<li><p>点击ADD NEW INSTANCE</p>
</li>
<li><p>启动刚刚推送的应用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 YOUR-USER-NAME/getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>查看3000端口</p>
</li>
</ol>
<h2 id="Part5：数据持久化"><a href="#Part5：数据持久化" class="headerlink" title="Part5：数据持久化"></a>Part5：数据持久化</h2><h4 id="新建两个容器"><a href="#新建两个容器" class="headerlink" title="新建两个容器"></a>新建两个容器</h4><ol>
<li><p>新建一个<code>ubuntu</code>容器，同时创建内容为一个随机数字的<code>/data.txt</code>文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d ubuntu bash -c &quot;shuf -i 1-10000 -n 1 -o /data.txt &amp;&amp; tail -f /dev/null&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>查看文件内容</p>
<p><em>ubuntu容器shell终端命令：</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /data.txt</span><br></pre></td></tr></table></figure>

<p><em>使用dockers exec命令行：</em></p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec &lt;container-id&gt; cat /data.txt</span><br></pre></td></tr></table></figure></li>
<li><p>启动相同镜像的另一个ubuntu容器，并查看目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it ubuntu ls /</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="持久化todo数据"><a href="#持久化todo数据" class="headerlink" title="持久化todo数据"></a>持久化todo数据</h4><ol>
<li><p>创建卷</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create todo-db</span><br></pre></td></tr></table></figure></li>
<li><p>创建应用程序容器，指定卷挂载：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 -v todo-db:/etc/todos getting-started</span><br></pre></td></tr></table></figure></li>
<li><p>在浏览器中查看todo数据，删除容器后重新创建，可以看到todo数据仍然在列表中</p>
</li>
</ol>
<h4 id="查看数据存储信息："><a href="#查看数据存储信息：" class="headerlink" title="查看数据存储信息："></a>查看数据存储信息：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect todo-db</span><br></pre></td></tr></table></figure>



<h2 id="Part6：使用绑定挂载"><a href="#Part6：使用绑定挂载" class="headerlink" title="Part6：使用绑定挂载"></a>Part6：使用绑定挂载</h2><h4 id="启动一个开发模式容器"><a href="#启动一个开发模式容器" class="headerlink" title="启动一个开发模式容器"></a>启动一个开发模式容器</h4><ol>
<li><p>在PowerShell下输入命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 `</span><br><span class="line">     -w /app -v &quot;$(pwd):/app&quot; `</span><br><span class="line">     node:12-alpine `</span><br><span class="line">     sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>查看日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f 8f660e5ddb02</span><br></pre></td></tr></table></figure></li>
<li><p>修改<code>src/static/js/app.js</code>中的代码，刷新浏览器，可以看到更新</p>
</li>
</ol>
<h2 id="part7：混合容器应用程序"><a href="#part7：混合容器应用程序" class="headerlink" title="part7：混合容器应用程序"></a>part7：混合容器应用程序</h2><h4 id="启动MySQL"><a href="#启动MySQL" class="headerlink" title="启动MySQL"></a>启动MySQL</h4><ol>
<li><p>创建网络</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create todo-app</span><br></pre></td></tr></table></figure></li>
<li><p>创建mySQL容器并将它连接到网络，并定义环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d `</span><br><span class="line">     --network todo-app --network-alias mysql `</span><br><span class="line">     -v todo-mysql-data:/var/lib/mysql `</span><br><span class="line">     -e MYSQL_ROOT_PASSWORD=secret `</span><br><span class="line">     -e MYSQL_DATABASE=todos `</span><br><span class="line">     mysql:5.7</span><br></pre></td></tr></table></figure></li>
<li><p>连接数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;mysql-container-id&gt; mysql -u root -p</span><br></pre></td></tr></table></figure></li>
<li><p>输入密码后，显示数据库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="连接mySQL"><a href="#连接mySQL" class="headerlink" title="连接mySQL"></a>连接mySQL</h4><ol>
<li><p>使用nicklaka/netshoot镜像创建一个新的容器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --network todo-app nicolaka/netshoot</span><br></pre></td></tr></table></figure></li>
<li><p>查找mySQL主机的IP地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig mysql</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>用MySQL运行应用程序</strong></p>
<ol>
<li><p>修改数据库权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER &#x27;root&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;secret&#x27;;</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure></li>
<li><p>指定环境变量，并将容器连接到应用程序网络。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 `</span><br><span class="line">   -w /app -v &quot;$(pwd):/app&quot; `</span><br><span class="line">   --network todo-app `</span><br><span class="line">   -e MYSQL_HOST=mysql `</span><br><span class="line">   -e MYSQL_USER=root `</span><br><span class="line">   -e MYSQL_PASSWORD=secret `</span><br><span class="line">   -e MYSQL_DB=todos `</span><br><span class="line">   node:12-alpine `</span><br><span class="line">   sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>查看日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;container-id&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>在浏览器中打开应用程序并向todo列表中添加内容</p>
</li>
<li><p>连接mysql数据库并验证内容已经被写入数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it &lt;mysql-container-id&gt; mysql -p todos</span><br></pre></td></tr></table></figure>

<p> 在mysql sell中运行</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from todo_items;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Part8：使用Docker-Compose"><a href="#Part8：使用Docker-Compose" class="headerlink" title="Part8：使用Docker Compose"></a>Part8：使用Docker Compose</h2><h4 id="安装Docker-Compose"><a href="#安装Docker-Compose" class="headerlink" title="安装Docker Compose"></a>安装Docker Compose</h4><p>查看版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version</span><br></pre></td></tr></table></figure>

<h4 id="创建Compose文件"><a href="#创建Compose文件" class="headerlink" title="创建Compose文件"></a>创建Compose文件</h4><ol>
<li>在app项目的根目录下，创建<code>docker-compose.yml</code>文件</li>
<li>定义模式版本</li>
<li>定义希望作为应用程序的一部分运行的服务(或容器)列表</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br></pre></td></tr></table></figure>

<h4 id="定义应用服务"><a href="#定义应用服务" class="headerlink" title="定义应用服务"></a>定义应用服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PS&gt; docker run -dp 3000:3000 `</span><br><span class="line">  -w /app -v &quot;$(pwd):/app&quot; `</span><br><span class="line">  --network todo-app `</span><br><span class="line">  -e MYSQL_HOST=mysql `</span><br><span class="line">  -e MYSQL_USER=root `</span><br><span class="line">  -e MYSQL_PASSWORD=secret `</span><br><span class="line">  -e MYSQL_DB=todos `</span><br><span class="line">  node:12-alpine `</span><br><span class="line">  sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>定义容器的服务条目和镜像</p>
</li>
<li><p>定义指令</p>
</li>
<li><p>定义服务端口</p>
</li>
<li><p>定义工作目录和卷</p>
</li>
<li><p>迁移环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line">   </span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    image: node:12-alpine</span><br><span class="line">    command: sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - 3000:3000</span><br><span class="line">    working_dir: /app</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_HOST: mysql</span><br><span class="line">      MYSQL_USER: root</span><br><span class="line">      MYSQL_PASSWORD: secret</span><br><span class="line">      MYSQL_DB: todos</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="定义MySQL服务"><a href="#定义MySQL服务" class="headerlink" title="定义MySQL服务"></a>定义MySQL服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PS&gt; docker run -d `</span><br><span class="line">  --network todo-app --network-alias mysql `</span><br><span class="line">  -v todo-mysql-data:/var/lib/mysql `</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=secret `</span><br><span class="line">  -e MYSQL_DATABASE=todos `</span><br><span class="line">  mysql:5.7</span><br></pre></td></tr></table></figure>

<ol>
<li>定义新服务并命名为<code>mysql</code></li>
<li>定义卷映射</li>
<li>指定环境变量</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.7&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    image: node:12-alpine</span><br><span class="line">    command: sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;</span><br><span class="line">    ports:</span><br><span class="line">      - 3000:3000</span><br><span class="line">    working_dir: /app</span><br><span class="line">    volumes:</span><br><span class="line">      - ./:/app</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_HOST: mysql</span><br><span class="line">      MYSQL_USER: root</span><br><span class="line">      MYSQL_PASSWORD: secret</span><br><span class="line">      MYSQL_DB: todos</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    volumes:</span><br><span class="line">      - todo-mysql-data:/var/lib/mysql</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: secret</span><br><span class="line">      MYSQL_DATABASE: todos</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  todo-mysql-data:</span><br></pre></td></tr></table></figure>

<h4 id="运行应用程序堆栈"><a href="#运行应用程序堆栈" class="headerlink" title="运行应用程序堆栈"></a>运行应用程序堆栈</h4><ol>
<li><p>启动应用程序堆栈</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></li>
<li><p>查看日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Part9：镜像构建的最佳实践"><a href="#Part9：镜像构建的最佳实践" class="headerlink" title="Part9：镜像构建的最佳实践"></a>Part9：镜像构建的最佳实践</h2><h4 id="安全性扫描"><a href="#安全性扫描" class="headerlink" title="安全性扫描"></a>安全性扫描</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker scan getting-started</span><br></pre></td></tr></table></figure>

<h4 id="镜像层"><a href="#镜像层" class="headerlink" title="镜像层"></a>镜像层</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image history getting-started</span><br></pre></td></tr></table></figure>

<p>展开所有内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image history --no-trunc getting-started</span><br></pre></td></tr></table></figure>

<h4 id="层缓存"><a href="#层缓存" class="headerlink" title="层缓存"></a>层缓存</h4><ol>
<li><p>更新Dcokerfile</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line"> FROM node:12-alpine</span><br><span class="line"> WORKDIR /app</span><br><span class="line"> COPY package.json yarn.lock ./</span><br><span class="line"> RUN yarn install --production</span><br><span class="line"> COPY . .</span><br><span class="line"> CMD [&quot;node&quot;, &quot;src/index.js&quot;]</span><br></pre></td></tr></table></figure></li>
<li><p>创建<code>dockerignore</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br></pre></td></tr></table></figure></li>
<li><p>创建一个新镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure></li>
<li><p>修改<code>src/static.index.html</code></p>
</li>
<li><p>重新构建镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t getting-started .</span><br></pre></td></tr></table></figure>

<p>这一次构建使用了缓存</p>
</li>
</ol>
<h4 id="多级构建"><a href="#多级构建" class="headerlink" title="多级构建"></a>多级构建</h4><p>React的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line">FROM node:12 AS build</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY package* yarn.lock ./</span><br><span class="line">RUN yarn install</span><br><span class="line">COPY public ./public</span><br><span class="line">COPY src ./src</span><br><span class="line">RUN yarn run build</span><br><span class="line"></span><br><span class="line">FROM nginx:alpine</span><br><span class="line">COPY --from=build /app/build /usr/share/nginx/html</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hmt0.github.io/project/2021/10/29/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AA%E8%83%BD%E5%9C%A8React%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%80%E9%A1%B6%E5%B1%82%E8%B0%83%E7%94%A8Hook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="He Mengting">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hmt的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/project/2021/10/29/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AA%E8%83%BD%E5%9C%A8React%E5%87%BD%E6%95%B0%E7%9A%84%E6%9C%80%E9%A1%B6%E5%B1%82%E8%B0%83%E7%94%A8Hook/" class="post-title-link" itemprop="url">为什么只能在React函数的最顶层调用Hook?</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-29 17:19:55" itemprop="dateCreated datePublished" datetime="2021-10-29T17:19:55+08:00">2021-10-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-18 17:31:37" itemprop="dateModified" datetime="2022-01-18T17:31:37+08:00">2022-01-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Hook是React函数组件的机制，以Counter组件为例，我们先看一下函数组件和普通组件有什么区别？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [state0, setState0] = Didact.useState(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> [satte1, setState1] = Didact.useState(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> [satte2, setState2] = Didact.useState(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">            setState0(c =&gt; c+1)</span></span><br><span class="line"><span class="xml">            setCount1(c =&gt; c+1)&#125;&#125;&gt; </span></span><br><span class="line"><span class="xml">            Count: &#123;state0&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>首先它是通过函数定义的，实际要渲染的内容写在返回值中</li>
<li>在函数中可以写各种各样的Hook（<code>useState</code>）</li>
</ol>
<p>那么为什么这种函数叫Hook呢？我们来看一下<code>useState</code>的内部原理：</p>
<p>在我们调用<code>useState</code>时，就会创建一个hook对象，里面包含state的值和一个actions队列。</p>
<p>在Counter第一次挂载的时候会把通过<code>useState</code>创建好的hook一个个添加到<code>wipFiber</code>的hooks队列中，此时<code>wipFiber.hook</code>中有三个hook:</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20211029145820062.png" alt="image-20211029145820062"></p>
<p>因此，在我们执行<code>[state, setState] = useState(0)</code>的时候实际上<code>useState</code>函数返回的就是<code>hook.state</code>和一个闭包函数<code>setState</code>。</p>
<p>这个时候actions队列中还是空空如也的，当我们点击了Counter，就会根据<code>onClick</code>的回调函数调用相应的<code>setState</code>函数，这里做的主要工作是向对应hook（<code>setState</code>是闭包函数，保存着相应<code>useState</code>函数中定义的hook）的actions queue中加入action，也就是我们传给<code>setState</code>的回调函数，同时更新<code>wipRoot</code>。</p>
<p>这个时候就有可能调用到函数组件的更新了，因为我们是通过调用<code>requestIdleCallback</code>去执行组件的更新任务的，所以不能保证更新的时机，有可能执行了几个<code>setState</code>之后合并起来一起更新。</p>
<p>更新函数式组件时，会再次依次执行<code>useState</code>函数，与初次渲染不同的是，这次会<strong>根据<code>hookIndex</code>获取上一个Fiber</strong>的hooks队列中保存的对应的<code>hook</code>，这就是为什么这个保存着状态和动作的对象叫hook的原因：总是要在重新渲染时把上次的状态和动作给“钩”过来，才能实现状态的更新，也是Hook函数这么叫的原因。</p>
<p>使用<code>hookIndex</code>就是我们把新的<code>useState</code>中的hook和上一次联系起来的手段，所以要确保函数组件每一次执行的时候，<code>useState</code>调用的顺序都是一致的！</p>
<p>关于倒计时：</p>
<p>在<code>setInterval</code>中调用<code>setState</code>，会发现倒计时只改变了一次数字就不再变化了，把<code>useState</code>的执行过程打印出来可以看到：</p>
<p><img src="C:\Users\luna6\AppData\Roaming\Typora\typora-user-images\image-20211031180819358.png" alt="image-20211031180819358"></p>
<p>只有在<code>useState</code>第二次（第一次是初次渲染）被调用的时候才在hook中添加了action，而且<code>setState</code>执行了五次，添加了五次。这是因为<code>setState</code>实在<code>setInterval</code>中调用的，而<code>setInterval</code>是在第一次更新的时候的useState中被调用的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/project/page/2/">2</a><a class="page-number" href="/project/page/3/">3</a><a class="extend next" rel="next" href="/project/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">He Mengting</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/project/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">He Mengting</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/project/lib/anime.min.js"></script>
  <script src="/project/lib/velocity/velocity.min.js"></script>
  <script src="/project/lib/velocity/velocity.ui.min.js"></script>

<script src="/project/js/utils.js"></script>

<script src="/project/js/motion.js"></script>


<script src="/project/js/schemes/muse.js"></script>


<script src="/project/js/next-boot.js"></script>




  















  

  

</body>
</html>
